GLOB sdist-make: /code/modules/weko-items-ui/setup.py
c1 inst-nodeps: /code/modules/weko-items-ui/.tox/.tmp/package/1/weko-items-ui-0.1.0.dev20170000.zip
c1 installed: alabaster==0.7.13,alembic==0.9.6,amqp==2.6.0,angular-gettext-babel==0.3,aniso8601==8.0.0,arcp==0.2.1,arrow==0.12.1,asn1crypto==0.23.0,atomicwrites==1.4.1,attrs==17.4.0,b2handle==1.1.2,Babel==2.5.1,bagit==1.7.0,beautifulsoup4==4.9.3,bibtexparser==1.0.1,billiard==3.6.3.0,binaryornot==0.4.4,bioblend==0.11.0,bleach==3.1.0,blinker==1.4,boto==2.49.0,boto3==1.7.84,botocore==1.10.84,CacheControl==0.12.14,cachelib==0.1,cachetools==4.2.4,captcha==0.4,cchardet==2.1.1,celery==4.4.4,certifi==2017.11.5,cffi==1.11.2,chardet==3.0.4,citeproc-py==0.5.1,citeproc-py-styles==0.1.2,click==6.7,cookiecutter==1.6.0,counter-robots==2018.6,coverage==6.2,cryptography==2.1.4,datacite==1.0.1,DateTime==4.9,decorator==4.1.2,defusedxml==0.5.0,dictdiffer==0.7.0,distlib==0.3.6,dnspython==2.2.1,docutils==0.18.1,dojson==1.3.2,elasticsearch==6.1.1,elasticsearch-dsl==6.4.0,elementpath==1.0.6,email-validator==1.0.5,entrypoints==0.2.3,feedgen==0.7.0,filelock==3.4.1,Flask==1.1.0,Flask-Admin==1.5.3,Flask-Alembic==2.0.1,Flask-Assets==0.12,Flask-BabelEx==0.9.4,Flask-Breadcrumbs==0.5.0,Flask-Caching==1.10.1,Flask-CeleryExt==0.3.4,Flask-Collect==1.2.2,Flask-Cors==3.0.3,Flask-DebugToolbar==0.13.1,Flask-IIIF==0.6.1,Flask-KVSession==0.6.2,Flask-Limiter==1.1.0,Flask-Login==0.4.1,Flask-Mail==0.9.1,flask-marshmallow==0.14.0,Flask-Menu==0.6.0,-e git+https://github.com/RCOSDP/flask-oauthlib.git@98eb36e1dfc66256fa7ea62237e9879acb906e9d#egg=Flask_OAuthlib,Flask-Plugins==1.6.1,Flask-Principal==0.4.0,Flask-RESTful==0.3.8,Flask-Security==3.0.0,flask-shell-ipython==0.4.1,Flask-Sitemap==0.4.0,Flask-SQLAlchemy==2.3.2,flask-talisman==0.4.1,Flask-WTF==0.14.3,-e git+https://github.com/RCOSDP/pyfpdf.git@f9b032148283d535cabc7789858081c80de36fef#egg=fpdf,frozendict==2.3.8,fs==0.5.4,ftfy==4.4.3,future==0.16.0,galaxy2cwl==0.1.4,github3.py==1.1.0,gxformat2==0.20.0,html5lib==1.0.1,idna==2.6,iiif-prezi==0.3.0,imagesize==1.4.1,importlib-metadata==4.8.3,importlib-resources==5.4.0,infinity==1.4,intervals==0.8.0,invenio-access==1.1.0,-e git+https://github.com/ivis-futagami/weko.git@b57f801a126218109d001f469c439055107f1b03#egg=invenio_accounts&subdirectory=modules/invenio-accounts,invenio-admin==1.1.2,invenio-app==1.1.0,invenio-assets==1.0.0,invenio-base==1.0.2,invenio-cache==1.0.0,invenio-celery==1.1.3,-e git+https://github.com/ivis-futagami/weko.git@b57f801a126218109d001f469c439055107f1b03#egg=invenio_communities&subdirectory=modules/invenio-communities,invenio-config==1.0.0,invenio-csl-rest==1.0.0a1,-e git+https://github.com/ivis-futagami/weko.git@b57f801a126218109d001f469c439055107f1b03#egg=invenio_db&subdirectory=modules/invenio-db,-e git+https://github.com/ivis-futagami/weko.git@b57f801a126218109d001f469c439055107f1b03#egg=invenio_deposit&subdirectory=modules/invenio-deposit,-e git+https://github.com/ivis-futagami/weko.git@b57f801a126218109d001f469c439055107f1b03#egg=invenio_files_rest&subdirectory=modules/invenio-files-rest,invenio-formatter==1.0.0b3,invenio-i18n==1.0.0,-e git+https://github.com/ivis-futagami/weko.git@b57f801a126218109d001f469c439055107f1b03#egg=invenio_iiif&subdirectory=modules/invenio-iiif,-e git+https://github.com/ivis-futagami/weko.git@b57f801a126218109d001f469c439055107f1b03#egg=invenio_indexer&subdirectory=modules/invenio-indexer,invenio-jsonschemas==1.0.0,invenio-logging==1.0.0b3,-e git+https://github.com/ivis-futagami/weko.git@b57f801a126218109d001f469c439055107f1b03#egg=invenio_mail&subdirectory=modules/invenio-mail,invenio-marc21==1.0.0a8,-e git+https://github.com/ivis-futagami/weko.git@b57f801a126218109d001f469c439055107f1b03#egg=invenio_oaiharvester&subdirectory=modules/invenio-oaiharvester,-e git+https://github.com/ivis-futagami/weko.git@b57f801a126218109d001f469c439055107f1b03#egg=invenio_oaiserver&subdirectory=modules/invenio-oaiserver,-e git+https://github.com/ivis-futagami/weko.git@b57f801a126218109d001f469c439055107f1b03#egg=invenio_oauth2server&subdirectory=modules/invenio-oauth2server,invenio-oauthclient==1.0.0,invenio-pidrelations==1.0.0a4,invenio-pidstore==1.0.0,-e git+https://github.com/ivis-futagami/weko.git@b57f801a126218109d001f469c439055107f1b03#egg=invenio_previewer&subdirectory=modules/invenio-previewer,invenio-query-parser==0.6.0,-e git+https://github.com/ivis-futagami/weko.git@b57f801a126218109d001f469c439055107f1b03#egg=invenio_queues&subdirectory=modules/invenio-queues,-e git+https://github.com/ivis-futagami/weko.git@b57f801a126218109d001f469c439055107f1b03#egg=invenio_records&subdirectory=modules/invenio-records,invenio-records-files==1.0.0a10,-e git+https://github.com/ivis-futagami/weko.git@b57f801a126218109d001f469c439055107f1b03#egg=invenio_records_rest&subdirectory=modules/invenio-records-rest,invenio-records-ui==1.0.0,-e git+https://github.com/ivis-futagami/weko.git@b57f801a126218109d001f469c439055107f1b03#egg=invenio_resourcesyncclient&subdirectory=modules/invenio-resourcesyncclient,-e git+https://github.com/ivis-futagami/weko.git@b57f801a126218109d001f469c439055107f1b03#egg=invenio_resourcesyncserver&subdirectory=modules/invenio-resourcesyncserver,invenio-rest==1.1.2,-e git+https://github.com/ivis-futagami/weko.git@b57f801a126218109d001f469c439055107f1b03#egg=invenio_s3&subdirectory=modules/invenio-s3,-e git+https://github.com/RCOSDP/invenio-search.git@cff9744c5dc651893a9c51672c5b8da9adc21e16#egg=invenio_search,-e git+https://github.com/RCOSDP/invenio-search-ui.git@74bd3b2990ff27b39e01b6b31be9a0b5fda3dd0f#egg=invenio_search_ui,-e git+https://github.com/ivis-futagami/weko.git@b57f801a126218109d001f469c439055107f1b03#egg=invenio_stats&subdirectory=modules/invenio-stats,invenio-theme==1.0.0b4,ipaddress==1.0.19,ipython==6.2.1,ipython-genutils==0.2.0,isodate==0.6.1,itsdangerous==0.24,jedi==0.11.0,Jinja2==2.10.1,jinja2-cli==0.6.0,jinja2-time==0.2.0,jmespath==0.10.0,jsmin==2.2.2,jsonpatch==1.21,jsonpath-ng==1.5.2,jsonpointer==1.14,jsonref==0.1,jsonresolver==0.2.1,jsonschema==2.6.0,jupyter-client==5.2.2,jupyter-core==4.4.0,-e git+https://github.com/RCOSDP/kombu.git@f204fdf078d5e94393c86693f545e2d011f620f5#egg=kombu,limits==1.2.1,lockfile==0.12.2,lxml==4.1.1,Mako==1.0.7,MarkupSafe==1.1.1,marshmallow==2.20.1,marshmallow-sqlalchemy==0.23.1,maxminddb==1.5.2,maxminddb-geolite2==2017.803,mistune==0.8.3,mock==5.0.2,more-itertools==8.10.0,msgpack==0.6.2,nbconvert==5.3.1,nbformat==4.4.0,netaddr==0.8.0,node-semver==0.1.1,numpy==1.16.1,oauthlib==2.1.0,ordereddict==1.1,packaging==21.3,pandocfilters==1.4.2,parso==0.1.0,passlib==1.7.1,pbr==5.11.1,pexpect==4.3.0,pickleshare==0.7.4,Pillow==8.1.2,platformdirs==2.4.0,pluggy==0.13.1,ply==3.11,poyo==0.4.1,prompt-toolkit==1.0.15,psycopg2==2.7.3.2,ptyprocess==0.5.2,py==1.11.0,pycparser==2.18,Pygments==2.2.0,PyJWT==1.5.3,PyLD==2.0.3,pyparsing==3.1.0,-e git+https://github.com/RCOSDP/PyPDF2.git@fefc684a3a74aff6f99e5dff24f9b4dd1c95169d#egg=PyPDF2,pyPEG2==2.15.2,pytest==4.2.0,pytest-cov==2.9.0,pytest-flask==0.15.1,pytest-invenio==1.2.1,pytest-mock==3.2.0,python-dateutil==2.8.2,python-editor==1.0.3,python-geoip==1.2,pytz==2017.3,PyYAML==6.0.1,pyzmq==17.0.0,rdflib==5.0.0,rdflib-jsonld==0.6.1,redis==2.10.6,requests==2.18.4,requests-oauthlib==1.1.0,requests-toolbelt==1.0.0,resync==2.0.1,rocrate==0.6.0,ruamel.yaml==0.17.21,ruamel.yaml.clib==0.2.8,s3fs==0.1.6,s3transfer==0.1.13,schema-salad==8.3.20221115203138,selenium==3.141.0,Sickle==0.6.4,simplegeneric==0.8.1,simplejson==3.12.0,simplekv==0.11.2,six==1.16.0,snowballstemmer==2.2.0,soupsieve==2.3.2.post1,speaklater==1.3,Sphinx==1.8.4,sphinxcontrib-serializinghtml==1.1.5,sphinxcontrib-websupport==1.2.4,SQLAlchemy==1.2.19,SQLAlchemy-Continuum==1.3.6,SQLAlchemy-Utils==0.35.0,stevedore==3.5.2,sword3common==0.1.1,testpath==0.3.1,tika==2.6.0,toml==0.10.2,tornado==4.5.3,tox==3.28.0,traitlets==4.3.2,typing_extensions==4.1.1,ua-parser==0.7.3,uritemplate==4.1.1,uritools==2.1.0,urllib3==1.22,uWSGI==2.0.21,uwsgitop==0.11,validators==0.12.0,vine==1.3.0,virtualenv==20.17.1,virtualenv-clone==0.5.7,virtualenvwrapper==4.8.4,Wand==0.6.1,wcwidth==0.1.7,webargs==5.5.2,webassets==0.12.1,webencodings==0.5.1,-e git+https://github.com/ivis-futagami/weko.git@b57f801a126218109d001f469c439055107f1b03#egg=weko_accounts&subdirectory=modules/weko-accounts,-e git+https://github.com/ivis-futagami/weko.git@b57f801a126218109d001f469c439055107f1b03#egg=weko_admin&subdirectory=modules/weko-admin,-e git+https://github.com/ivis-futagami/weko.git@b57f801a126218109d001f469c439055107f1b03#egg=weko_authors&subdirectory=modules/weko-authors,-e git+https://github.com/ivis-futagami/weko.git@b57f801a126218109d001f469c439055107f1b03#egg=weko_bulkupdate&subdirectory=modules/weko-bulkupdate,-e git+https://github.com/ivis-futagami/weko.git@b57f801a126218109d001f469c439055107f1b03#egg=weko_deposit&subdirectory=modules/weko-deposit,-e git+https://github.com/ivis-futagami/weko.git@b57f801a126218109d001f469c439055107f1b03#egg=weko_gridlayout&subdirectory=modules/weko-gridlayout,-e git+https://github.com/ivis-futagami/weko.git@b57f801a126218109d001f469c439055107f1b03#egg=weko_groups&subdirectory=modules/weko-groups,-e git+https://github.com/ivis-futagami/weko.git@b57f801a126218109d001f469c439055107f1b03#egg=weko_handle&subdirectory=modules/weko-handle,-e git+https://github.com/ivis-futagami/weko.git@b57f801a126218109d001f469c439055107f1b03#egg=weko_index_tree&subdirectory=modules/weko-index-tree,-e git+https://github.com/ivis-futagami/weko.git@b57f801a126218109d001f469c439055107f1b03#egg=weko_indextree_journal&subdirectory=modules/weko-indextree-journal,-e git+https://github.com/ivis-futagami/weko.git@b57f801a126218109d001f469c439055107f1b03#egg=weko_items_autofill&subdirectory=modules/weko-items-autofill,weko-items-ui @ file:///code/modules/weko-items-ui/.tox/.tmp/package/1/weko-items-ui-0.1.0.dev20170000.zip,-e git+https://github.com/ivis-futagami/weko.git@b57f801a126218109d001f469c439055107f1b03#egg=weko_itemtypes_ui&subdirectory=modules/weko-itemtypes-ui,-e git+https://github.com/ivis-futagami/weko.git@b57f801a126218109d001f469c439055107f1b03#egg=weko_logging&subdirectory=modules/weko-logging,-e git+https://github.com/ivis-futagami/weko.git@b57f801a126218109d001f469c439055107f1b03#egg=weko_records&subdirectory=modules/weko-records,-e git+https://github.com/ivis-futagami/weko.git@b57f801a126218109d001f469c439055107f1b03#egg=weko_records_ui&subdirectory=modules/weko-records-ui,-e git+https://github.com/ivis-futagami/weko.git@b57f801a126218109d001f469c439055107f1b03#egg=weko_redis&subdirectory=modules/weko-redis,-e git+https://github.com/ivis-futagami/weko.git@b57f801a126218109d001f469c439055107f1b03#egg=weko_schema_ui&subdirectory=modules/weko-schema-ui,-e git+https://github.com/ivis-futagami/weko.git@b57f801a126218109d001f469c439055107f1b03#egg=weko_search_ui&subdirectory=modules/weko-search-ui,-e git+https://github.com/ivis-futagami/weko.git@b57f801a126218109d001f469c439055107f1b03#egg=weko_sitemap&subdirectory=modules/weko-sitemap,-e git+https://github.com/ivis-futagami/weko.git@b57f801a126218109d001f469c439055107f1b03#egg=weko_swordserver&subdirectory=modules/weko-swordserver,-e git+https://github.com/ivis-futagami/weko.git@b57f801a126218109d001f469c439055107f1b03#egg=weko_theme&subdirectory=modules/weko-theme,-e git+https://github.com/ivis-futagami/weko.git@b57f801a126218109d001f469c439055107f1b03#egg=weko_user_profiles&subdirectory=modules/weko-user-profiles,-e git+https://github.com/ivis-futagami/weko.git@b57f801a126218109d001f469c439055107f1b03#egg=weko_workflow&subdirectory=modules/weko-workflow,Werkzeug==0.15.2,whichcraft==0.4.1,WTForms==2.1,WTForms-Alchemy==0.16.5,WTForms-Components==0.10.3,xmlschema==0.9.30,xmltodict==0.12.0,zipp==3.6.0,zope.interface==5.5.2
c1 run-test-pre: PYTHONHASHSEED='3029946218'
c1 run-test: commands[0] | pytest --cov=weko_items_ui tests -v --cov-branch --cov-report=xml --cov-report=html --cov-report=term --basetemp=/code/modules/weko-items-ui/.tox/c1/tmp
============================= test session starts ==============================
platform linux -- Python 3.6.15, pytest-4.2.0, py-1.11.0, pluggy-0.13.1 -- /code/modules/weko-items-ui/.tox/c1/bin/python
cachedir: .tox/c1/.pytest_cache
rootdir: /code/modules/weko-items-ui, inifile:
plugins: celery-4.4.4, flask-0.15.1, cov-2.9.0, mock-3.2.0, invenio-1.2.1
collecting ... collected 297 items

tests/test_api.py::test_item_login PASSED                                [  0%]
tests/test_permissions.py::test_edit_permission_factory FAILED           [  0%]
tests/test_rest.py::test_WekoRanking[new_items] PASSED                   [  1%]
tests/test_rest.py::test_WekoRanking[most_reviewed_items] PASSED         [  1%]
tests/test_rest.py::test_WekoRanking[most_downloaded_items] PASSED       [  1%]
tests/test_rest.py::test_WekoRanking[most_searched_keywords] PASSED      [  2%]
tests/test_rest.py::test_WekoRanking[created_most_items_user] PASSED     [  2%]
tests/test_rest.py::test_WekoRanking_error PASSED                        [  2%]
tests/test_rest.py::test_WekoFileRanking PASSED                          [  3%]
tests/test_rest.py::test_WekoFileRanking_error PASSED                    [  3%]
tests/test_utils.py::test_get_list_username PASSED                       [  3%]
tests/test_utils.py::test_get_list_email PASSED                          [  4%]
tests/test_utils.py::test_get_user_info_by_username PASSED               [  4%]
tests/test_utils.py::test_get_user_info_by_username_nouser PASSED        [  4%]
tests/test_utils.py::test_get_user_info_by_username_exception PASSED     [  5%]
tests/test_utils.py::test_validate_user PASSED                           [  5%]
tests/test_utils.py::test_validate_user_nodb PASSED                      [  5%]
tests/test_utils.py::test_get_user_info_by_email PASSED                  [  6%]
tests/test_utils.py::test_get_user_info_by_email_nodb PASSED             [  6%]
tests/test_utils.py::test_get_user_information PASSED                    [  6%]
tests/test_utils.py::test_get_user_information_nodb PASSED               [  7%]
tests/test_utils.py::test_get_user_permission PASSED                     [  7%]
tests/test_utils.py::test_get_current_user PASSED                        [  7%]
tests/test_utils.py::test_find_hidden_items PASSED                       [  8%]
tests/test_utils.py::test_get_permission_record PASSED                   [  8%]
tests/test_utils.py::test_parse_ranking_results PASSED                   [  8%]
tests/test_utils.py::test_parse_ranking_new_items PASSED                 [  9%]
tests/test_utils.py::test_parse_ranking_record PASSED                    [  9%]
tests/test_utils.py::test_validate_form_input_data PASSED                [  9%]
tests/test_utils.py::test_validate_form_input_data_2 PASSED              [ 10%]
tests/test_utils.py::test_parse_node_str_to_json_schema PASSED           [ 10%]
tests/test_utils.py::test_update_json_schema_with_required_items PASSED  [ 10%]
tests/test_utils.py::test_update_json_schema_by_activity_id FAILED       [ 11%]
tests/test_utils.py::test_update_schema_form_by_activity_id FAILED       [ 11%]
tests/test_utils.py::test_recursive_prepare_either_required_list PASSED  [ 11%]
tests/test_utils.py::test_recursive_update_schema_form_with_condition PASSED [ 12%]
tests/test_utils.py::test_package_export_file PASSED                     [ 12%]
tests/test_utils.py::test_make_stats_file PASSED                         [ 12%]
tests/test_utils.py::test_make_stats_file_issue33432 PASSED              [ 13%]
tests/test_utils.py::test_make_stats_file_issue36234 PASSED              [ 13%]
tests/test_utils.py::test_get_list_file_by_record_id PASSED              [ 13%]
tests/test_utils.py::test_write_bibtex_files FAILED                      [ 14%]
tests/test_utils.py::test_write_files PASSED                             [ 14%]
tests/test_utils.py::test_check_item_type_name PASSED                    [ 14%]
tests/test_utils.py::test_export_items PASSED                            [ 15%]
tests/test_utils.py::test_export_items_issue32943 PASSED                 [ 15%]
tests/test_utils.py::test__get_max_export_items PASSED                   [ 15%]
tests/test_utils.py::test__export_item PASSED                            [ 16%]
tests/test_utils.py::test__custom_export_metadata PASSED                 [ 16%]
tests/test_utils.py::test_get_new_items_by_date PASSED                   [ 16%]
tests/test_utils.py::test_update_schema_remove_hidden_item FAILED        [ 17%]
tests/test_utils.py::test_get_files_from_metadata PASSED                 [ 17%]
tests/test_utils.py::test_to_files_js PASSED                             [ 17%]
tests/test_utils.py::test_update_sub_items_by_user_role PASSED           [ 18%]
tests/test_utils.py::test_remove_excluded_items_in_json_schema PASSED    [ 18%]
tests/test_utils.py::test_get_excluded_sub_items PASSED                  [ 18%]
tests/test_utils.py::test_get_current_user_role PASSED                   [ 19%]
tests/test_utils.py::test_is_need_to_show_agreement_page[0-True] PASSED  [ 19%]
tests/test_utils.py::test_is_need_to_show_agreement_page[1-True] PASSED  [ 19%]
tests/test_utils.py::test_is_need_to_show_agreement_page[2-True] PASSED  [ 20%]
tests/test_utils.py::test_is_need_to_show_agreement_page[3-True] PASSED  [ 20%]
tests/test_utils.py::test_is_need_to_show_agreement_page[4-True] PASSED  [ 20%]
tests/test_utils.py::test_is_need_to_show_agreement_page[5-True] PASSED  [ 21%]
tests/test_utils.py::test_is_need_to_show_agreement_page[6-True] PASSED  [ 21%]
tests/test_utils.py::test_is_need_to_show_agreement_page[7-True] PASSED  [ 21%]
tests/test_utils.py::test_update_index_tree_for_record FAILED            [ 22%]
tests/test_utils.py::test_validate_user_mail PASSED                      [ 22%]
tests/test_utils.py::test_check_approval_email PASSED                    [ 22%]
tests/test_utils.py::test_check_approval_email_in_flow FAILED            [ 23%]
tests/test_utils.py::test_update_action_handler PASSED                   [ 23%]
tests/test_utils.py::test_validate_user_mail_and_index PASSED            [ 23%]
tests/test_utils.py::test_recursive_form PASSED                          [ 24%]
tests/test_utils.py::test_set_multi_language_name PASSED                 [ 24%]
tests/test_utils.py::test_get_data_authors_prefix_settings PASSED        [ 24%]
tests/test_utils.py::test_get_data_authors_affiliation_settings PASSED   [ 25%]
tests/test_utils.py::test_hide_meta_data_for_role[0-True] PASSED         [ 25%]
tests/test_utils.py::test_hide_meta_data_for_role[1-False] PASSED        [ 25%]
tests/test_utils.py::test_hide_meta_data_for_role[2-False] PASSED        [ 26%]
tests/test_utils.py::test_hide_meta_data_for_role[3-False] PASSED        [ 26%]
tests/test_utils.py::test_hide_meta_data_for_role[4-False] PASSED        [ 26%]
tests/test_utils.py::test_hide_meta_data_for_role[5-True] PASSED         [ 27%]
tests/test_utils.py::test_hide_meta_data_for_role[6-False] PASSED        [ 27%]
tests/test_utils.py::test_hide_meta_data_for_role[7-True] PASSED         [ 27%]
tests/test_utils.py::test_get_ignore_item_from_mapping FAILED            [ 28%]
tests/test_utils.py::test_get_ignore_item_from_mapping_with_item_type FAILED [ 28%]
tests/test_utils.py::test_get_mapping_name_item_type_by_key PASSED       [ 28%]
tests/test_utils.py::test_get_mapping_name_item_type_by_sub_key PASSED   [ 29%]
tests/test_utils.py::test_get_hide_list_by_schema_form PASSED            [ 29%]
tests/test_utils.py::test_get_hide_parent_keys PASSED                    [ 29%]
tests/test_utils.py::test_get_hide_parent_and_sub_keys PASSED            [ 30%]
tests/test_utils.py::test_get_item_from_option PASSED                    [ 30%]
tests/test_utils.py::test_get_item_from_option_with_item_type PASSED     [ 30%]
tests/test_utils.py::test_get_options_list PASSED                        [ 31%]
tests/test_utils.py::test_get_options_and_order_list PASSED              [ 31%]
tests/test_utils.py::test_hide_table_row PASSED                          [ 31%]
tests/test_utils.py::test_is_schema_include_key PASSED                   [ 32%]
tests/test_utils.py::test_isExistKeyInDict PASSED                        [ 32%]
tests/test_utils.py::test_set_validation_message PASSED                  [ 32%]
tests/test_utils.py::test_translate_validation_message PASSED            [ 33%]
tests/test_utils.py::test_get_workflow_by_item_type_id PASSED            [ 33%]
tests/test_utils.py::test_validate_bibtex FAILED                         [ 34%]
tests/test_utils.py::test_make_bibtex_data FAILED                        [ 34%]
tests/test_utils.py::test_translate_schema_form PASSED                   [ 34%]
tests/test_utils.py::test_WekoQueryRankingHelper_get FAILED              [ 35%]
tests/test_utils.py::test_get_ranking FAILED                             [ 35%]
tests/test_utils.py::test___sanitize_string PASSED                       [ 35%]
tests/test_utils.py::test_sanitize_input_data PASSED                     [ 36%]
tests/test_utils.py::test_save_title PASSED                              [ 36%]
tests/test_utils.py::test_get_key_title_in_item_type_mapping PASSED      [ 36%]
tests/test_utils.py::test_get_title_in_request PASSED                    [ 37%]
tests/test_utils.py::test_hide_form_items PASSED                         [ 37%]
tests/test_utils.py::test_hide_thumbnail PASSED                          [ 37%]
tests/test_utils.py::test_get_ignore_item PASSED                         [ 38%]
tests/test_utils.py::test_make_stats_file_with_permission PASSED         [ 38%]
tests/test_utils.py::test_make_stats_file_with_permission_issue33432 PASSED [ 38%]
tests/test_utils.py::test_check_item_is_being_edit FAILED                [ 39%]
tests/test_utils.py::test_check_item_is_deleted PASSED                   [ 39%]
tests/test_utils.py::test_permission_ranking PASSED                      [ 39%]
tests/test_utils.py::test_has_permission_edit_item PASSED                [ 40%]
tests/test_utils.py::test_has_permission_edit_item2 PASSED               [ 40%]
tests/test_utils.py::test_has_permission_edit_item3 PASSED               [ 40%]
tests/test_utils.py::test_get_file_download_data PASSED                  [ 41%]
tests/test_views.py::test_index_acl_nologin PASSED                       [ 41%]
tests/test_views.py::test_index_acl[0-302] PASSED                        [ 41%]
tests/test_views.py::test_index_acl[1-302] PASSED                        [ 42%]
tests/test_views.py::test_index_acl[2-302] PASSED                        [ 42%]
tests/test_views.py::test_index_acl[3-302] PASSED                        [ 42%]
tests/test_views.py::test_index_acl[4-403] PASSED                        [ 43%]
tests/test_views.py::test_index_acl[5-403] PASSED                        [ 43%]
tests/test_views.py::test_index_acl[6-302] PASSED                        [ 43%]
tests/test_views.py::test_index_acl[7-403] PASSED                        [ 44%]
tests/test_views.py::test_index[0-200] PASSED                            [ 44%]
tests/test_views.py::test_index_noitemtype PASSED                        [ 44%]
tests/test_views.py::test_index_exception PASSED                         [ 45%]
tests/test_views.py::test_iframe_index_acl_nologin PASSED                [ 45%]
tests/test_views.py::test_iframe_index_acl[0-200] PASSED                 [ 45%]
tests/test_views.py::test_iframe_index_acl[1-200] PASSED                 [ 46%]
tests/test_views.py::test_iframe_index_acl[2-200] PASSED                 [ 46%]
tests/test_views.py::test_iframe_index_acl[3-200] PASSED                 [ 46%]
tests/test_views.py::test_iframe_index_acl[4-403] PASSED                 [ 47%]
tests/test_views.py::test_iframe_index_acl[5-403] PASSED                 [ 47%]
tests/test_views.py::test_iframe_index_acl[6-200] PASSED                 [ 47%]
tests/test_views.py::test_iframe_index_acl[7-403] PASSED                 [ 48%]
tests/test_views.py::test_iframe_index_noitemtypeid[0-404] PASSED        [ 48%]
tests/test_views.py::test_iframe_index[0-200] PASSED                     [ 48%]
tests/test_views.py::test_iframe_index_exception PASSED                  [ 49%]
tests/test_views.py::test_iframe_save_model_nologin PASSED               [ 49%]
tests/test_views.py::test_iframe_save_model_acl[0-200] FAILED            [ 49%]
tests/test_views.py::test_iframe_save_model_error[0-200] PASSED          [ 50%]
tests/test_views.py::test_iframe_save_model[0-200] PASSED                [ 50%]
tests/test_views.py::test_iframe_success PASSED                          [ 50%]
tests/test_views.py::test_iframe_error PASSED                            [ 51%]
tests/test_views.py::test_get_json_schema_acl_nologin PASSED             [ 51%]
tests/test_views.py::test_get_json_schema_acl[0-200] PASSED              [ 51%]
tests/test_views.py::test_get_json_schema_acl[1-200] PASSED              [ 52%]
tests/test_views.py::test_get_json_schema_acl[2-200] PASSED              [ 52%]
tests/test_views.py::test_get_json_schema_acl[3-200] PASSED              [ 52%]
tests/test_views.py::test_get_json_schema_acl[4-200] PASSED              [ 53%]
tests/test_views.py::test_get_json_schema_acl[5-200] PASSED              [ 53%]
tests/test_views.py::test_get_json_schema_acl[6-200] PASSED              [ 53%]
tests/test_views.py::test_get_json_schema_acl[7-200] PASSED              [ 54%]
tests/test_views.py::test_get_json_schema[0-200] FAILED                  [ 54%]
tests/test_views.py::test_get_schema_form_acl_nologin PASSED             [ 54%]
tests/test_views.py::test_get_schema_form_acl[0-200] PASSED              [ 55%]
tests/test_views.py::test_get_schema_form_acl[1-200] PASSED              [ 55%]
tests/test_views.py::test_get_schema_form_acl[2-200] PASSED              [ 55%]
tests/test_views.py::test_get_schema_form_acl[3-200] PASSED              [ 56%]
tests/test_views.py::test_get_schema_form_acl[4-200] PASSED              [ 56%]
tests/test_views.py::test_get_schema_form_acl[5-200] PASSED              [ 56%]
tests/test_views.py::test_get_schema_form_acl[6-200] PASSED              [ 57%]
tests/test_views.py::test_get_schema_form_acl[7-200] PASSED              [ 57%]
tests/test_views.py::test_get_schema_form[0-200] PASSED                  [ 57%]
tests/test_views.py::test_items_index_acl_nologin PASSED                 [ 58%]
tests/test_views.py::test_items_index_acl[0-200] PASSED                  [ 58%]
tests/test_views.py::test_items_index_acl[1-200] PASSED                  [ 58%]
tests/test_views.py::test_items_index_acl[2-200] PASSED                  [ 59%]
tests/test_views.py::test_items_index_acl[3-200] PASSED                  [ 59%]
tests/test_views.py::test_items_index_acl[4-403] PASSED                  [ 59%]
tests/test_views.py::test_items_index_acl[5-403] PASSED                  [ 60%]
tests/test_views.py::test_items_index_acl[6-200] PASSED                  [ 60%]
tests/test_views.py::test_items_index_acl[7-403] PASSED                  [ 60%]
tests/test_views.py::test_iframe_items_index_acl_nologin PASSED          [ 61%]
tests/test_views.py::test_iframe_items_index_acl[0-302] PASSED           [ 61%]
tests/test_views.py::test_iframe_items_index_acl[1-302] PASSED           [ 61%]
tests/test_views.py::test_iframe_items_index_acl[2-302] PASSED           [ 62%]
tests/test_views.py::test_iframe_items_index_acl[3-302] PASSED           [ 62%]
tests/test_views.py::test_iframe_items_index_acl[4-302] PASSED           [ 62%]
tests/test_views.py::test_iframe_items_index_acl[5-302] PASSED           [ 63%]
tests/test_views.py::test_iframe_items_index_acl[6-302] PASSED           [ 63%]
tests/test_views.py::test_iframe_items_index_acl[7-302] PASSED           [ 63%]
tests/test_views.py::test_iframe_items_index_get_error FAILED            [ 64%]
tests/test_views.py::test_iframe_items_index_update_index_error FAILED   [ 64%]
tests/test_views.py::test_iframe_items_index_update_index FAILED         [ 64%]
tests/test_views.py::test_iframe_items_index_get FAILED                  [ 65%]
tests/test_views.py::test_iframe_items_index_put_error PASSED            [ 65%]
tests/test_views.py::test_iframe_items_index_put FAILED                  [ 65%]
tests/test_views.py::test_iframe_items_index_post FAILED                 [ 66%]
tests/test_views.py::test_default_view_method PASSED                     [ 66%]
tests/test_views.py::test_to_links_js FAILED                             [ 67%]
tests/test_views.py::test_index_upload_acl_nologin PASSED                [ 67%]
tests/test_views.py::test_index_upload_acl[0-200] PASSED                 [ 67%]
tests/test_views.py::test_index_upload_acl[1-200] PASSED                 [ 68%]
tests/test_views.py::test_index_upload_acl[2-200] PASSED                 [ 68%]
tests/test_views.py::test_index_upload_acl[3-200] PASSED                 [ 68%]
tests/test_views.py::test_index_upload_acl[4-200] PASSED                 [ 69%]
tests/test_views.py::test_index_upload_acl[5-200] PASSED                 [ 69%]
tests/test_views.py::test_index_upload_acl[6-200] PASSED                 [ 69%]
tests/test_views.py::test_index_upload_acl[7-200] PASSED                 [ 70%]
tests/test_views.py::test_get_search_data_acl FAILED                     [ 70%]
tests/test_views.py::test_get_search_data FAILED                         [ 70%]
tests/test_views.py::test_validate_user_email_and_index_login[0-200] PASSED [ 71%]
tests/test_views.py::test_validate_user_email_and_index_login[1-200] PASSED [ 71%]
tests/test_views.py::test_validate_user_email_and_index_login[2-200] PASSED [ 71%]
tests/test_views.py::test_validate_user_email_and_index_login[3-200] PASSED [ 72%]
tests/test_views.py::test_validate_user_email_and_index_login[4-200] PASSED [ 72%]
tests/test_views.py::test_validate_user_email_and_index_login[5-200] PASSED [ 72%]
tests/test_views.py::test_validate_user_email_and_index_login[6-200] PASSED [ 73%]
tests/test_views.py::test_validate_user_email_and_index_login[7-200] PASSED [ 73%]
tests/test_views.py::test_validate_user_email_and_index_guest PASSED     [ 73%]
tests/test_views.py::test_validate_user_info_login[0-200] PASSED         [ 74%]
tests/test_views.py::test_validate_user_info_login[1-200] PASSED         [ 74%]
tests/test_views.py::test_validate_user_info_login[2-200] PASSED         [ 74%]
tests/test_views.py::test_validate_user_info_login[3-200] PASSED         [ 75%]
tests/test_views.py::test_validate_user_info_login[4-200] PASSED         [ 75%]
tests/test_views.py::test_validate_user_info_login[5-200] PASSED         [ 75%]
tests/test_views.py::test_validate_user_info_login[6-200] PASSED         [ 76%]
tests/test_views.py::test_validate_user_info_login[7-200] PASSED         [ 76%]
tests/test_views.py::test_validate_user_info_guest PASSED                [ 76%]
tests/test_views.py::test_get_user_info_acl_nologin FAILED               [ 77%]
tests/test_views.py::test_get_user_info_acl[0-200] PASSED                [ 77%]
tests/test_views.py::test_get_user_info_acl[1-200] PASSED                [ 77%]
tests/test_views.py::test_get_user_info_acl[2-200] PASSED                [ 78%]
tests/test_views.py::test_get_user_info_acl[3-200] PASSED                [ 78%]
tests/test_views.py::test_get_user_info_acl[4-200] FAILED                [ 78%]
tests/test_views.py::test_get_user_info_acl[5-200] FAILED                [ 79%]
tests/test_views.py::test_get_user_info_acl[6-200] PASSED                [ 79%]
tests/test_views.py::test_get_user_info_acl[7-200] FAILED                [ 79%]
tests/test_views.py::test_get_current_login_user_id_acl_nologin PASSED   [ 80%]
tests/test_views.py::test_get_current_login_user_id_acl[0-200] PASSED    [ 80%]
tests/test_views.py::test_get_current_login_user_id_acl[1-200] PASSED    [ 80%]
tests/test_views.py::test_get_current_login_user_id_acl[2-200] PASSED    [ 81%]
tests/test_views.py::test_get_current_login_user_id_acl[3-200] PASSED    [ 81%]
tests/test_views.py::test_get_current_login_user_id_acl[4-200] PASSED    [ 81%]
tests/test_views.py::test_get_current_login_user_id_acl[5-200] PASSED    [ 82%]
tests/test_views.py::test_get_current_login_user_id_acl[6-200] PASSED    [ 82%]
tests/test_views.py::test_get_current_login_user_id_acl[7-200] PASSED    [ 82%]
tests/test_views.py::test_prepare_edit_item_login[0-200] FAILED          [ 83%]
tests/test_views.py::test_prepare_edit_item_login[1-200] FAILED          [ 83%]
tests/test_views.py::test_prepare_edit_item_login[2-200] FAILED          [ 83%]
tests/test_views.py::test_prepare_edit_item_login[3-200] FAILED          [ 84%]
tests/test_views.py::test_prepare_edit_item_login[4-200] FAILED          [ 84%]
tests/test_views.py::test_prepare_edit_item_login[5-200] FAILED          [ 84%]
tests/test_views.py::test_prepare_edit_item_login[6-200] FAILED          [ 85%]
tests/test_views.py::test_prepare_edit_item_login[7-200] FAILED          [ 85%]
tests/test_views.py::test_prepare_edit_item_guest PASSED                 [ 85%]
tests/test_views.py::test_ranking_acl_nologin FAILED                     [ 86%]
tests/test_views.py::test_check_ranking_show PASSED                      [ 86%]
tests/test_views.py::test_check_restricted_content_login[0-200] PASSED   [ 86%]
tests/test_views.py::test_check_restricted_content_login[1-200] PASSED   [ 87%]
tests/test_views.py::test_check_restricted_content_login[2-200] PASSED   [ 87%]
tests/test_views.py::test_check_restricted_content_login[3-200] PASSED   [ 87%]
tests/test_views.py::test_check_restricted_content_login[4-200] PASSED   [ 88%]
tests/test_views.py::test_check_restricted_content_login[5-200] PASSED   [ 88%]
tests/test_views.py::test_check_restricted_content_login[6-200] PASSED   [ 88%]
tests/test_views.py::test_check_restricted_content_login[7-200] PASSED   [ 89%]
tests/test_views.py::test_check_restricted_content_guest PASSED          [ 89%]
tests/test_views.py::test_validate_bibtex_export_acl_nologin FAILED      [ 89%]
tests/test_views.py::test_export_acl_nologin PASSED                      [ 90%]
tests/test_views.py::test_validate_login[0-200] PASSED                   [ 90%]
tests/test_views.py::test_validate_login[1-200] PASSED                   [ 90%]
tests/test_views.py::test_validate_login[2-200] PASSED                   [ 91%]
tests/test_views.py::test_validate_login[3-200] PASSED                   [ 91%]
tests/test_views.py::test_validate_login[4-200] PASSED                   [ 91%]
tests/test_views.py::test_validate_login[5-200] PASSED                   [ 92%]
tests/test_views.py::test_validate_login[6-200] PASSED                   [ 92%]
tests/test_views.py::test_validate_login[7-200] PASSED                   [ 92%]
tests/test_views.py::test_validate_guest PASSED                          [ 93%]
tests/test_views.py::test_check_validation_error_msg_acl_nologin PASSED  [ 93%]
tests/test_views.py::test_corresponding_activity_list_acl_nologin PASSED [ 93%]
tests/test_views.py::test_get_authors_prefix_settings_acl_nologin PASSED [ 94%]
tests/test_views.py::test_get_authors_affiliation_settings_acl_nologin PASSED [ 94%]
tests/test_views.py::test_session_validate_acl_nologin PASSED            [ 94%]
tests/test_views.py::test_check_record_doi_acl_nologin PASSED            [ 95%]
tests/test_views.py::test_check_record_doi_indexes_acl_nologin PASSED    [ 95%]
tests/test_views.py::test_check_record_doi_indexes_acl[0-200] PASSED     [ 95%]
tests/test_views.py::test_check_record_doi_indexes_acl[1-200] PASSED     [ 96%]
tests/test_views.py::test_check_record_doi_indexes_acl[2-200] PASSED     [ 96%]
tests/test_views.py::test_check_record_doi_indexes_acl[3-200] PASSED     [ 96%]
tests/test_views.py::test_check_record_doi_indexes_acl[4-200] PASSED     [ 97%]
tests/test_views.py::test_check_record_doi_indexes_acl[5-200] PASSED     [ 97%]
tests/test_views.py::test_check_record_doi_indexes_acl[6-200] PASSED     [ 97%]
tests/test_views.py::test_check_record_doi_indexes_acl[7-200] PASSED     [ 98%]
tests/test_views.py::test_check_record_doi_indexes[0-200] PASSED         [ 98%]
tests/test_weko_items_ui.py::test_version PASSED                         [ 98%]
tests/test_weko_items_ui.py::test_init PASSED                            [ 99%]
tests/test_weko_items_ui.py::test_view PASSED                            [ 99%]
tests/test_weko_items_ui.py::test_prepare_edit_item FAILED               [100%]

=================================== FAILURES ===================================
_________________________ test_edit_permission_factory _________________________

db_records = [(<PersistentIdentifier depid:1 / rec:1e071ad9-b8d0-44a2-bcee-282c36a4492d (R)>, <PersistentIdentifier recid:1 / rec:1...617258105262': {'resourceuri': 'http://purl.org/coar/resource_type/c_5794', 'resourcetype': 'conference paper'}}), ...]

    def test_edit_permission_factory(db_records):
        depid, recid, parent, doi, record, item = db_records[0]
        expect = page_permission_factory(record, flg='Edit').can()
        ret = edit_permission_factory(record)
>       assert ret.can()==False
E       assert True == False
E         -True
E         +False

tests/test_permissions.py:21: AssertionError
------------------------------ Captured log setup ------------------------------
ext.py                     255 WARNING  JSONSCHEMAS_HOST is set to localhost
____________________ test_update_json_schema_by_activity_id ____________________

app = <Flask 'testapp'>

    def test_update_json_schema_by_activity_id(app):
        with open("tests/data/json_data.json", "r") as f:
            json_data = json.load(f)
            with app.test_request_context():
>               assert (
                    update_json_schema_by_activity_id(json_data, "A-00000000-00000") == None
                )

tests/test_utils.py:5934: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 
weko_items_ui/utils.py:1687: in update_json_schema_by_activity_id
    sessionstore = redis_connection.connection(db=current_app.config['ACCOUNTS_SESSION_REDIS_DB_NO'], kv = True)
../weko-redis/weko_redis/redis.py:44: in connection
    raise ex
../weko-redis/weko_redis/redis.py:40: in connection
    store = self.redis_connection(db)
../weko-redis/weko_redis/redis.py:68: in redis_connection
    raise ex
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

self = <weko_redis.redis.RedisConnection object at 0x7f8a46a5fd30>, db = 1

    def redis_connection(self, db):
        """
        Establishes a direct Redis connection and returns the Redis store object.
    
        Args:
            db (int): The Redis database index to connect to.
    
        Returns:
            object: The Redis store object.
        """
        store = None
        try:
>           redis_url = 'redis://' + current_app.config['CACHE_REDIS_HOST'] + ':' + current_app.config['REDIS_PORT'] + '/' + str(db)
E           TypeError: must be str, not NoneType

../weko-redis/weko_redis/redis.py:65: TypeError
------------------------------ Captured log setup ------------------------------
ext.py                     255 WARNING  JSONSCHEMAS_HOST is set to localhost
____________________ test_update_schema_form_by_activity_id ____________________

app = <Flask 'testapp'>
db_itemtype = {'item_type': <ItemType 1>, 'item_type_mapping': <ItemTypeMapping 1>, 'item_type_name': <ItemTypeName 1>}

    def test_update_schema_form_by_activity_id(app,db_itemtype):
        item_type = db_itemtype['item_type']
        with app.test_request_context():
>           assert update_schema_form_by_activity_id(item_type.form, "A-00000000-00000")==None

tests/test_utils.py:5951: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 
weko_items_ui/utils.py:1717: in update_schema_form_by_activity_id
    sessionstore = redis_connection.connection(db=current_app.config['ACCOUNTS_SESSION_REDIS_DB_NO'], kv = True)
../weko-redis/weko_redis/redis.py:44: in connection
    raise ex
../weko-redis/weko_redis/redis.py:40: in connection
    store = self.redis_connection(db)
../weko-redis/weko_redis/redis.py:68: in redis_connection
    raise ex
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

self = <weko_redis.redis.RedisConnection object at 0x7f8a46bc83c8>, db = 1

    def redis_connection(self, db):
        """
        Establishes a direct Redis connection and returns the Redis store object.
    
        Args:
            db (int): The Redis database index to connect to.
    
        Returns:
            object: The Redis store object.
        """
        store = None
        try:
>           redis_url = 'redis://' + current_app.config['CACHE_REDIS_HOST'] + ':' + current_app.config['REDIS_PORT'] + '/' + str(db)
E           TypeError: must be str, not NoneType

../weko-redis/weko_redis/redis.py:65: TypeError
------------------------------ Captured log setup ------------------------------
ext.py                     255 WARNING  JSONSCHEMAS_HOST is set to localhost
___________________________ test_write_bibtex_files ____________________________

db_oaischema = None

    def test_write_bibtex_files(db_oaischema):
        item_types_data = {
            "15": {
                "item_type_id": "15",
                "name": "デフォルトアイテムタイプ（フル）(15)",
                "root_url": "https://localhost:8443/",
                "jsonschema": "items/jsonschema/15",
                "keys": [],
                "labels": [],
                "recids": [1],
                "data": {},
            }
        }
        export_path = "/tmp/weko_export_agvb5jc9/20220827140620"
>       assert write_bibtex_files(item_types_data, export_path)

tests/test_utils.py:8121: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 
weko_items_ui/utils.py:2438: in write_bibtex_files
    output = make_bibtex_data(item_type_data['recids'])
weko_items_ui/utils.py:3517: in make_bibtex_data
    from weko_schema_ui.serializers import WekoBibTexSerializer
../weko-schema-ui/weko_schema_ui/serializers/__init__.py:62: in <module>
    BibTexSerializer = WekoBibTexSerializer()
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

self = <weko_schema_ui.serializers.WekoBibTexSerializer.WekoBibTexSerializer object at 0x7f8a3fb19748>

    def __init__(self):
        """Init."""
        # Load namespace
        self.__ns = cache_schema('jpcoar_mapping').get('namespaces')
        self.__lst_identifier_type = ['doi', 'hdl', 'url']
        # JPCOAR elements
>       jp_jp = '{' + self.__ns['jpcoar'] + '}'
E       KeyError: 'jpcoar'

../weko-schema-ui/weko_schema_ui/serializers/WekoBibTexSerializer.py:133: KeyError
------------------------------ Captured log setup ------------------------------
ext.py                     255 WARNING  JSONSCHEMAS_HOST is set to localhost
____________________ test_update_schema_remove_hidden_item _____________________

db_itemtype = {'item_type': <ItemType 1>, 'item_type_mapping': <ItemTypeMapping 1>, 'item_type_name': <ItemTypeName 1>}

    def test_update_schema_remove_hidden_item(db_itemtype):
        item_type = db_itemtype["item_type"]
        system_properties = [
            "subitem_systemidt_identifier",
            "subitem_systemfile_datetime",
            "subitem_systemfile_filename",
            "subitem_system_id_rg_doi",
            "subitem_system_date_type",
            "subitem_system_date",
            "subitem_system_identifier_type",
            "subitem_system_identifier",
            "subitem_system_text",
        ]
        hidden_items = [
            item_type.form.index(form)
            for form in item_type.form
            if form.get("items")
            and form["items"][0]["key"].split(".")[1] == "subitem_systemidt_identifier"
        ]
    
>       assert (
            update_schema_remove_hidden_item(
                item_type.schema, item_type.render, hidden_items
            )
            == ""
        )

tests/test_utils.py:8282: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

schema = {'$schema': 'http://json-schema.org/draft-04/schema#', 'description': '', 'properties': {'item_1617186331708': {'items...e': 'Access Rights', 'type': 'object'}, ...}, 'required': ['pubdate', 'item_1617186331708', 'item_1617258105262'], ...}
render = {'edit_notes': {'item_1617186331708': '', 'item_1617186385884': '', 'item_1617186419668': '', 'item_1617186476635': ''...': False, 'hidden': True, 'multiple': False, 'oneline': False, ...}, 'title': 'Persistent Identifier(URI)', ...}}, ...}
items_name = [39, 40, 41]

    def update_schema_remove_hidden_item(schema, render, items_name):
        """Update schema: remove hidden items.
    
        :param schema: json schema
        :param render: json render
        :param items_name: list items which has hidden flg
        :return: The json object.
        """
        for item in items_name:
            hidden_flg = False
>           key = schema[item]['key']
E           KeyError: 39

weko_items_ui/utils.py:2769: KeyError
------------------------------ Captured log setup ------------------------------
ext.py                     255 WARNING  JSONSCHEMAS_HOST is set to localhost
______________________ test_update_index_tree_for_record _______________________

app = <Flask 'testapp'>
db_itemtype = {'item_type': <ItemType 1>, 'item_type_mapping': <ItemTypeMapping 1>, 'item_type_name': <ItemTypeName 1>}
db_records = [(<PersistentIdentifier depid:1 / rec:2bdf8d33-20dc-4324-858d-9a77b9060b69 (R)>, <PersistentIdentifier recid:1 / rec:2...617258105262': {'resourceuri': 'http://purl.org/coar/resource_type/c_5794', 'resourcetype': 'conference paper'}}), ...]
users = [{'email': 'contributor@test.org', 'id': 2, 'obj': <User 2>}, {'email': 'repoadmin@test.org', 'id': 4, 'obj': <User 4>...eneraluser@test.org', 'id': 6, 'obj': <User 5>}, {'email': 'originalroleuser@test.org', 'id': 7, 'obj': <User 7>}, ...]
esindex = <invenio_search.ext._SearchState object at 0x7f8a46c766d8>

    def test_update_index_tree_for_record(app, db_itemtype, db_records, users, esindex):
        depid, recid, parent, doi, record, item = db_records[0]
        record['$schema'] = "/items/jsonschema/1"
        redis_connection = RedisConnection()
>       datastore = redis_connection.connection(db=app.config['CACHE_REDIS_DB'], kv = True)

tests/test_utils.py:8375: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 
../weko-redis/weko_redis/redis.py:44: in connection
    raise ex
../weko-redis/weko_redis/redis.py:40: in connection
    store = self.redis_connection(db)
../weko-redis/weko_redis/redis.py:68: in redis_connection
    raise ex
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

self = <weko_redis.redis.RedisConnection object at 0x7f8a3f310208>, db = 0

    def redis_connection(self, db):
        """
        Establishes a direct Redis connection and returns the Redis store object.
    
        Args:
            db (int): The Redis database index to connect to.
    
        Returns:
            object: The Redis store object.
        """
        store = None
        try:
>           redis_url = 'redis://' + current_app.config['CACHE_REDIS_HOST'] + ':' + current_app.config['REDIS_PORT'] + '/' + str(db)
E           TypeError: must be str, not NoneType

../weko-redis/weko_redis/redis.py:65: TypeError
------------------------------ Captured log setup ------------------------------
ext.py                     255 WARNING  JSONSCHEMAS_HOST is set to localhost
______________________ test_check_approval_email_in_flow _______________________

users = [{'email': 'contributor@test.org', 'id': 2, 'obj': <User 2>}, {'email': 'repoadmin@test.org', 'id': 4, 'obj': <User 4>...eneraluser@test.org', 'id': 6, 'obj': <User 5>}, {'email': 'originalroleuser@test.org', 'id': 7, 'obj': <User 7>}, ...]
db_workflow = {'activity': <Activity 1>, 'flow_action1': <FlowAction 1>, 'flow_action2': <FlowAction 2>, 'flow_action3': <FlowAction 3>, ...}

    def test_check_approval_email_in_flow(users,db_workflow):
        activity = db_workflow['activity']
>       assert check_approval_email_in_flow(activity.activity_id,users[0]['obj'].email)==True
E       assert False == True
E         -False
E         +True

tests/test_utils.py:8443: AssertionError
------------------------------ Captured log setup ------------------------------
ext.py                     255 WARNING  JSONSCHEMAS_HOST is set to localhost
______________________ test_get_ignore_item_from_mapping _______________________

users = [{'email': 'contributor@test.org', 'id': 2, 'obj': <User 2>}, {'email': 'repoadmin@test.org', 'id': 4, 'obj': <User 4>...eneraluser@test.org', 'id': 6, 'obj': <User 5>}, {'email': 'originalroleuser@test.org', 'id': 7, 'obj': <User 7>}, ...]
db = <SQLAlchemy engine=sqlite:////code/modules/weko-items-ui/test.db>

    def test_get_ignore_item_from_mapping(users,db):
        with open("tests/data/item_type_hide/schema.json") as f:
            schema = json.load(f)
        with open("tests/data/item_type_hide/form.json") as f:
            form = json.load(f)
        with open("tests/data/item_type_hide/render.json") as f:
            render = json.load(f)
        with open("tests/data/item_type_hide/mapping.json") as f:
            mapping = json.load(f)
    
        itemtype_name = ItemTypeName(id=10, name="test_itemtype_hide", has_site_license=True, is_active=True)
        itemtype = ItemType(id=10,name_id=10, schema=schema, form=form, render=render, tag=1)
        itemtype_mapping = ItemTypeMapping(id=10,item_type_id=10,mapping=mapping)
    
        with db.session.begin_nested():
            db.session.add(itemtype_name)
            db.session.add(itemtype)
            db.session.add(itemtype_mapping)
        db.session.commit()
    
>       result =  get_ignore_item_from_mapping(10)
E       TypeError: get_ignore_item_from_mapping() missing 1 required positional argument: 'item_type'

tests/test_utils.py:8564: TypeError
------------------------------ Captured log setup ------------------------------
ext.py                     255 WARNING  JSONSCHEMAS_HOST is set to localhost
_______________ test_get_ignore_item_from_mapping_with_item_type _______________

users = [{'email': 'contributor@test.org', 'id': 2, 'obj': <User 2>}, {'email': 'repoadmin@test.org', 'id': 4, 'obj': <User 4>...eneraluser@test.org', 'id': 6, 'obj': <User 5>}, {'email': 'originalroleuser@test.org', 'id': 7, 'obj': <User 7>}, ...]
db = <SQLAlchemy engine=sqlite:////code/modules/weko-items-ui/test.db>
db_itemtype = {'item_type': <ItemType 1>, 'item_type_mapping': <ItemTypeMapping 1>, 'item_type_name': <ItemTypeName 1>}

    def test_get_ignore_item_from_mapping_with_item_type(users,db, db_itemtype):
        with open("tests/data/item_type_hide/schema.json") as f:
            schema = json.load(f)
        with open("tests/data/item_type_hide/form.json") as f:
            form = json.load(f)
        with open("tests/data/item_type_hide/render.json") as f:
            render = json.load(f)
        with open("tests/data/item_type_hide/mapping.json") as f:
            mapping = json.load(f)
    
        itemtype_name = ItemTypeName(id=20, name="test_itemtype_hide", has_site_license=True, is_active=True)
        itemtype = ItemType(id=20,name_id=20, schema=schema, form=form, render=render, tag=1)
        itemtype_mapping = ItemTypeMapping(id=20,item_type_id=20,mapping=mapping)
    
        with db.session.begin_nested():
            db.session.add(itemtype_name)
            db.session.add(itemtype)
            db.session.add(itemtype_mapping)
        db.session.commit()
    
        result =  get_ignore_item_from_mapping(20, item_type=itemtype)
        test = ['title', 'contributor', 'type',  ['date'], ['creator', 'creatorName'], ['contributor', 'contributorName']]
>       assert result == test
E       AssertionError: assert ['title', 'ty...ributorName']] == ['title', 'con...ributorName']]
E         At index 1 diff: 'type' != 'contributor'
E         Full diff:
E         ['title',
E         +  'contributor',
E         'type',
E         -  'contributor',
E         ['date'],...
E         
E         ...Full output truncated (3 lines hidden), use '-vv' to show

tests/test_utils.py:8593: AssertionError
------------------------------ Captured log setup ------------------------------
ext.py                     255 WARNING  JSONSCHEMAS_HOST is set to localhost
_____________________________ test_validate_bibtex _____________________________

app = <Flask 'testapp'>
db = <SQLAlchemy engine=sqlite:////code/modules/weko-items-ui/test.db>
db_records = [(<PersistentIdentifier depid:1 / rec:cfcfc333-c4dd-45ff-bc75-8b8d5ccce011 (R)>, <PersistentIdentifier recid:1 / rec:c...617258105262': {'resourceuri': 'http://purl.org/coar/resource_type/c_5794', 'resourcetype': 'conference paper'}}), ...]
db_itemtype = {'item_type': <ItemType 1>, 'item_type_mapping': <ItemTypeMapping 1>, 'item_type_name': <ItemTypeName 1>}
db_oaischema = None

    def test_validate_bibtex(app, db, db_records, db_itemtype, db_oaischema):
        app.config.update(OAISERVER_XSL_URL=None)
>       assert validate_bibtex([1]) == ""

tests/test_utils.py:8783: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 
weko_items_ui/utils.py:3496: in validate_bibtex
    from weko_schema_ui.serializers import WekoBibTexSerializer
../weko-schema-ui/weko_schema_ui/serializers/__init__.py:62: in <module>
    BibTexSerializer = WekoBibTexSerializer()
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

self = <weko_schema_ui.serializers.WekoBibTexSerializer.WekoBibTexSerializer object at 0x7f8a3d5bd860>

    def __init__(self):
        """Init."""
        # Load namespace
        self.__ns = cache_schema('jpcoar_mapping').get('namespaces')
        self.__lst_identifier_type = ['doi', 'hdl', 'url']
        # JPCOAR elements
>       jp_jp = '{' + self.__ns['jpcoar'] + '}'
E       KeyError: 'jpcoar'

../weko-schema-ui/weko_schema_ui/serializers/WekoBibTexSerializer.py:133: KeyError
------------------------------ Captured log setup ------------------------------
ext.py                     255 WARNING  JSONSCHEMAS_HOST is set to localhost
____________________________ test_make_bibtex_data _____________________________

db_records = [(<PersistentIdentifier depid:1 / rec:3fa3f065-786c-455b-80eb-127a97977cbf (R)>, <PersistentIdentifier recid:1 / rec:3...617258105262': {'resourceuri': 'http://purl.org/coar/resource_type/c_5794', 'resourcetype': 'conference paper'}}), ...]

    def test_make_bibtex_data(db_records):
>       assert make_bibtex_data([1])==""

tests/test_utils.py:8789: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 
weko_items_ui/utils.py:3517: in make_bibtex_data
    from weko_schema_ui.serializers import WekoBibTexSerializer
../weko-schema-ui/weko_schema_ui/serializers/__init__.py:62: in <module>
    BibTexSerializer = WekoBibTexSerializer()
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

self = <weko_schema_ui.serializers.WekoBibTexSerializer.WekoBibTexSerializer object at 0x7f8a3df21c88>

    def __init__(self):
        """Init."""
        # Load namespace
>       self.__ns = cache_schema('jpcoar_mapping').get('namespaces')
E       AttributeError: 'NoneType' object has no attribute 'get'

../weko-schema-ui/weko_schema_ui/serializers/WekoBibTexSerializer.py:130: AttributeError
------------------------------ Captured log setup ------------------------------
ext.py                     255 WARNING  JSONSCHEMAS_HOST is set to localhost
_______________________ test_WekoQueryRankingHelper_get ________________________

app = <Flask 'testapp'>
users = [{'email': 'contributor@test.org', 'id': 2, 'obj': <User 2>}, {'email': 'repoadmin@test.org', 'id': 4, 'obj': <User 4>...eneraluser@test.org', 'id': 6, 'obj': <User 5>}, {'email': 'originalroleuser@test.org', 'id': 7, 'obj': <User 7>}, ...]
db_records = [(<PersistentIdentifier depid:1 / rec:7e4880f7-85ee-4c17-8dc1-82208bc9e36c (R)>, <PersistentIdentifier recid:1 / rec:7...617258105262': {'resourceuri': 'http://purl.org/coar/resource_type/c_5794', 'resourcetype': 'conference paper'}}), ...]
esindex = <invenio_search.ext._SearchState object at 0x7f8a45b67a58>
mocker = <pytest_mock.plugin.MockFixture object at 0x7f8a443f4cf8>

    def test_WekoQueryRankingHelper_get(app, users, db_records,esindex,mocker):
        user = users[2]
        # add data to record_view
        view_data = [
            {"rec_index":0,"count":1,"date":"2023-08-24"}, # recid:1
            {"rec_index":1,"count":3,"date": "2023-08-23"}, # recid:1.1
            {"rec_index":6,"count":2,"date": "2023-08-25"}, # recid: 4
            {"rec_index":4,"count":5,"date": "2023-08-25"}, # recid: 3
            {"rec_index":0,"count":5,"date": "2022-08-25"} # recid: 1
        ]
        for data in view_data:
            _record=db_records[data["rec_index"]]
            pid = _record[1]
            record=_record[4]
            es_id = uuid.uuid4()
            body = {
                "timestamp":datetime.strptime(data["date"],"%Y-%m-%d"),"unique_id":str(es_id),"count":data["count"],"unique_count":data["count"],"country":None,"hostname":"None","remote_attr":"111.111.11.1","record_id":pid.object_uuid,"record_name":record["item_title"],"record_index_names":"test_index","pid_type":pid.pid_type,"pid_value":pid.pid_value,"cur_user_id":user["id"],"site_license_name":"","site_license_flag":False
            }
>           esindex.index(index="test-stats-record-view",doc_type="record-view-day-aggregation",id=str(es_id),body=body)

tests/test_utils.py:8828: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

self = <invenio_search.ext._SearchState object at 0x7f8a45b67a58>
name = 'index'

    def __getattr__(self, name):
        if name == "__members__":
            return dir(self._get_current_object())
>       return getattr(self._get_current_object(), name)
E       AttributeError: '_SearchState' object has no attribute 'index'

.tox/c1/lib/python3.6/site-packages/werkzeug/local.py:348: AttributeError
------------------------------ Captured log setup ------------------------------
ext.py                     255 WARNING  JSONSCHEMAS_HOST is set to localhost
_______________________________ test_get_ranking _______________________________

app = <Flask 'testapp'>
users = [{'email': 'contributor@test.org', 'id': 2, 'obj': <User 2>}, {'email': 'repoadmin@test.org', 'id': 4, 'obj': <User 4>...eneraluser@test.org', 'id': 6, 'obj': <User 5>}, {'email': 'originalroleuser@test.org', 'id': 7, 'obj': <User 7>}, ...]
db_records = [(<PersistentIdentifier depid:1 / rec:8f69f33a-0880-43b4-b043-a12c48371ce3 (R)>, <PersistentIdentifier recid:1 / rec:8...617258105262': {'resourceuri': 'http://purl.org/coar/resource_type/c_5794', 'resourcetype': 'conference paper'}}), ...]
db_ranking = {'settings': <RankingSettings 1>}
esindex = <invenio_search.ext._SearchState object at 0x7f8a440676a0>
mocker = <pytest_mock.plugin.MockFixture object at 0x7f8a3d5cb320>

    def test_get_ranking(app, users, db_records, db_ranking, esindex,mocker):
        user = users[2]
        # add data to record_view
        today = datetime.today()
        view_data = [
            {"rec_index":0,"count":1,"date":today+timedelta(days=-2)}, # recid:1
            {"rec_index":1,"count":3,"date":today+timedelta(days=-2)}, # recid:1.1
            {"rec_index":6,"count":2,"date":today+timedelta(days=-2)}, # recid: 4
            {"rec_index":4,"count":5,"date":today+timedelta(days=-2)}, # recid: 3
            {"rec_index":0,"count":5,"date":today+timedelta(days=-370)} # recid: 1
        ]
        for data in view_data:
            _record=db_records[data["rec_index"]]
            pid = _record[1]
            record=_record[4]
            es_id = uuid.uuid4()
            body = {
                "timestamp":data["date"],"unique_id":str(es_id),"count":data["count"],"unique_count":data["count"],"country":None,"hostname":"None","remote_attr":"111.111.11.1","record_id":pid.object_uuid,"record_name":record["item_title"],"record_index_names":"test_index","pid_type":pid.pid_type,"pid_value":pid.pid_value,"cur_user_id":user["id"],"site_license_name":"","site_license_flag":False
            }
>           esindex.index(index="test-stats-record-view",doc_type="record-view-day-aggregation",id=str(es_id),body=body)

tests/test_utils.py:8888: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

self = <invenio_search.ext._SearchState object at 0x7f8a440676a0>
name = 'index'

    def __getattr__(self, name):
        if name == "__members__":
            return dir(self._get_current_object())
>       return getattr(self._get_current_object(), name)
E       AttributeError: '_SearchState' object has no attribute 'index'

.tox/c1/lib/python3.6/site-packages/werkzeug/local.py:348: AttributeError
------------------------------ Captured log setup ------------------------------
ext.py                     255 WARNING  JSONSCHEMAS_HOST is set to localhost
________________________ test_check_item_is_being_edit _________________________

db = <SQLAlchemy engine=sqlite:////code/modules/weko-items-ui/test.db>
db_records = [(<PersistentIdentifier depid:1 / rec:8e847167-c451-4696-a982-0752bd49bcc5 (R)>, <PersistentIdentifier recid:1 / rec:8...617258105262': {'resourceuri': 'http://purl.org/coar/resource_type/c_5794', 'resourcetype': 'conference paper'}}), ...]
db_workflow = {'activity': <Activity 1>, 'flow_action1': <FlowAction 1>, 'flow_action2': <FlowAction 2>, 'flow_action3': <FlowAction 3>, ...}
db_activity = {'activity': <Activity 2>, 'recid': <PersistentIdentifier recid:1 / rec:8e847167-c451-4696-a982-0752bd49bcc5 (R)>}

    def test_check_item_is_being_edit(db, db_records, db_workflow, db_activity):
        workflow = db_workflow["workflow"]
        depid, recid, parent, doi, record, item = db_records[1]
>       assert check_item_is_being_edit(recid) == False
E       AssertionError: assert '' == False
E         -''
E         +False

tests/test_utils.py:10318: AssertionError
------------------------------ Captured log setup ------------------------------
ext.py                     255 WARNING  JSONSCHEMAS_HOST is set to localhost
______________________ test_iframe_save_model_acl[0-200] _______________________

app = <Flask 'testapp'>, client = <FlaskClient <Flask 'testapp'>>
db_itemtype = {'item_type': <ItemType 1>, 'item_type_mapping': <ItemTypeMapping 1>, 'item_type_name': <ItemTypeName 1>}
db_workflow = {'activity': <Activity 1>, 'flow_action1': <FlowAction 1>, 'flow_action2': <FlowAction 2>, 'flow_action3': <FlowAction 3>, ...}
users = [{'email': 'contributor@test.org', 'id': 2, 'obj': <User 2>}, {'email': 'repoadmin@test.org', 'id': 4, 'obj': <User 4>...eneraluser@test.org', 'id': 6, 'obj': <User 5>}, {'email': 'originalroleuser@test.org', 'id': 7, 'obj': <User 7>}, ...]
id = 0, status_code = 200

    @pytest.mark.parametrize(
        "id, status_code",
        [
            (0, 200),
            # (1, 200),
            # (2, 200),
            # (3, 200),
            # (4, 200),
            # (5, 200),
            # (6, 200),
            # (7, 200),
        ],
    )
    def test_iframe_save_model_acl(app, client, db_itemtype, db_workflow, users, id, status_code):
        login_user_via_session(client=client, email=users[id]["email"])
        url = url_for("weko_items_ui.iframe_save_model", _external=True)
        with client.session_transaction() as session:
            session["activity_info"] = db_workflow['activity'].__dict__
        data = {"metainfo": {"either_valid_test": "test", "pubdate": "2022-08-19", "item_1617186331708": [{"subitem_1551255647225": "aa", "subitem_1551255648112": "ja"}], "item_1617186385884": [{}], "item_1617186419668": [{"creatorAffiliations": [{"affiliationNameIdentifiers": [{}], "affiliationNames": [{}]}], "creatorAlternatives": [{}], "creatorMails": [{}], "creatorNames": [{}], "familyNames": [{}], "givenNames": [{}], "nameIdentifiers": [{}]}], "item_1617186499011": [{}], "item_1617186609386": [{}], "item_1617186626617": [{}], "item_1617186643794": [{}], "item_1617186660861": [{}], "item_1617186702042": [{}], "item_1617186783814": [{}], "item_1617186859717": [{}], "item_1617186882738": [{"subitem_geolocation_place": [{}]}], "item_1617186901218": [{"subitem_1522399412622": [{}], "subitem_1522399651758": [{}]}], "item_1617186920753": [{}], "item_1617186941041": [{}], "item_1617187112279": [{}], "item_1617187187528": [{"subitem_1599711633003": [{}], "subitem_1599711660052": [{}], "subitem_1599711758470": [{}], "subitem_1599711788485": [{}]}], "item_1617349709064": [{"contributorAffiliations": [{"contributorAffiliationNameIdentifiers": [{}], "contributorAffiliationNames": [{}]}], "contributorAlternatives": [{}], "contributorMails": [{}], "contributorNames": [{}], "familyNames": [{}], "givenNames": [{}], "nameIdentifiers": [{}]}], "item_1617353299429": [{"subitem_1523320863692": [{}]}], "item_1617605131499": [{"date": [{}], "fileDate": [{}], "filesize": [{}]}], "item_1617610673286": [{"nameIdentifiers": [{}], "rightHolderNames": [{}]}], "item_1617620223087": [{}], "item_1617944105607": [{"subitem_1551256015892": [{}], "subitem_1551256037922": [{}]}], "item_1617187056579": {"bibliographic_titles": [{}]}, "item_1617258105262": {"resourcetype": "conference paper", "resourceuri": "http://purl.org/coar/resource_type/c_5794"}, "shared_user_id": -1}, "files": [], "endpoints": {"initialization": "/api/deposits/items"}}
        activity = Activity.query.first()
        assert activity.temp_data == {}
        res = client.post(url, json=data)
        assert res.status_code == status_code
        activity = Activity.query.first()
>       assert activity.temp_data == '{"endpoints": {"initialization": "/api/deposits/items"}, "files": [], "metainfo": {"item_1617186331708": [{"subitem_1551255647225": "aa", "subitem_1551255648112": "ja"}], "item_1617186385884": [{}], "item_1617186419668": [{"creatorAffiliations": [{"affiliationNameIdentifiers": [{}], "affiliationNames": [{}]}], "creatorAlternatives": [{}], "creatorMails": [{}], "creatorNames": [{}], "familyNames": [{}], "givenNames": [{}], "nameIdentifiers": [{}]}], "item_1617186499011": [{}], "item_1617186609386": [{}], "item_1617186626617": [{}], "item_1617186643794": [{}], "item_1617186660861": [{}], "item_1617186702042": [{}], "item_1617186783814": [{}], "item_1617186859717": [{}], "item_1617186882738": [{"subitem_geolocation_place": [{}]}], "item_1617186901218": [{"subitem_1522399412622": [{}], "subitem_1522399651758": [{}]}], "item_1617186920753": [{}], "item_1617186941041": [{}], "item_1617187056579": {"bibliographic_titles": [{}]}, "item_1617187112279": [{}], "item_1617187187528": [{"subitem_1599711633003": [{}], "subitem_1599711660052": [{}], "subitem_1599711758470": [{}], "subitem_1599711788485": [{}]}], "item_1617258105262": {"resourcetype": "conference paper", "resourceuri": "http://purl.org/coar/resource_type/c_5794"}, "item_1617349709064": [{"contributorAffiliations": [{"contributorAffiliationNameIdentifiers": [{}], "contributorAffiliationNames": [{}]}], "contributorAlternatives": [{}], "contributorMails": [{}], "contributorNames": [{}], "familyNames": [{}], "givenNames": [{}], "nameIdentifiers": [{}]}], "item_1617353299429": [{"subitem_1523320863692": [{}]}], "item_1617605131499": [{"date": [{}], "fileDate": [{}], "filesize": [{}]}], "item_1617610673286": [{"nameIdentifiers": [{}], "rightHolderNames": [{}]}], "item_1617620223087": [{}], "item_1617944105607": [{"subitem_1551256015892": [{}], "subitem_1551256037922": [{}]}], "pubdate": "2022-08-19", "shared_user_id": -1}}'
E       assert {} == '{"endpoints": {"initializat...19", "shared_user_id": -1}}'
E         -{}
E         +'{"endpoints": {"initialization": "/api/deposits/items"}, "files": [], "metainfo": {"item_1617186331708": [{"subitem_1551255647225": "aa", "subitem_1551255648112": "ja"}], "item_1617186385884": [{}], "item_1617186419668": [{"creatorAffiliations": [{"affiliationNameIdentifiers": [{}], "affiliationNames": [{}]}], "creatorAlternatives": [{}], "creatorMails": [{}], "creatorNames": [{}], "familyNames": [{}], "givenNames": [{}], "nameIdentifiers": [{}]}], "item_1617186499011": [{}], "item_1617186609386": [{}], "item_1617186626617": [{}], "item_1617186643794": [{}], "item...
E         
E         ...Full output truncated (1 line hidden), use '-vv' to show

tests/test_views.py:324: AssertionError
------------------------------ Captured log setup ------------------------------
ext.py                     255 WARNING  JSONSCHEMAS_HOST is set to localhost
_________________________ test_get_json_schema[0-200] __________________________

client = <FlaskClient <Flask 'testapp'>>
users = [{'email': 'contributor@test.org', 'id': 2, 'obj': <User 2>}, {'email': 'repoadmin@test.org', 'id': 4, 'obj': <User 4>...eneraluser@test.org', 'id': 6, 'obj': <User 5>}, {'email': 'originalroleuser@test.org', 'id': 7, 'obj': <User 7>}, ...]
db_itemtype = {'item_type': <ItemType 1>, 'item_type_mapping': <ItemTypeMapping 1>, 'item_type_name': <ItemTypeName 1>}
db_itemtype5 = {'item_type': <ItemType 5>, 'item_type_mapping': <ItemTypeMapping 5>, 'item_type_name': <ItemTypeName 5>}
id = 0, status_code = 200

    @pytest.mark.parametrize(
        "id, status_code",
        [
            (0, 200),
        ],
    )
    def test_get_json_schema(client, users, db_itemtype, db_itemtype5, id, status_code):
        login_user_via_session(client=client, email=users[id]["email"])
        url = url_for("weko_items_ui.get_json_schema", item_type_id=0, _external=True)
        res = client.get(url)
        assert res.status_code == status_code
        assert json.loads(res.data) == {}
    
        res = None
        url = url_for(
            "weko_items_ui.get_json_schema",
            item_type_id=0,
            activity_id="A-00000000-00000",
            _external=True,
        )
        res = client.get(url)
        assert res.status_code == status_code
        assert json.loads(res.data) == {}
    
        res = None
        url = url_for(
            "weko_items_ui.get_json_schema",
            item_type_id=99,
            activity_id="A-00000000-00000",
            _external=True,
        )
        res = client.get(url)
        assert res.status_code == 400
    
        res = None
        url = url_for("weko_items_ui.get_json_schema", item_type_id=1, _external=True)
        res = client.get(url)
        assert res.status_code == status_code
        assert json.loads(res.data) == {
            "$schema": "http://json-schema.org/draft-04/schema#",
            "description": "",
            "properties": {
                "item_1617186331708": {
                    "items": {
                        "properties": {
                            "subitem_1551255647225": {
                                "format": "text",
                                "title": "Title",
                                "title_i18n": {"en": "Title", "ja": "タイトル"},
                                "title_i18n_temp": {"en": "Title", "ja": "タイトル"},
                                "type": "string",
                            },
                            "subitem_1551255648112": {
                                "currentEnum": [
                                    "ja",
                                    "ja-Kana",
                                    "en",
                                    "fr",
                                    "it",
                                    "de",
                                    "es",
                                    "zh-cn",
                                    "zh-tw",
                                    "ru",
                                    "la",
                                    "ms",
                                    "eo",
                                    "ar",
                                    "el",
                                    "ko",
                                ],
                                "enum": [
                                    None,
                                    "ja",
                                    "ja-Kana",
                                    "en",
                                    "fr",
                                    "it",
                                    "de",
                                    "es",
                                    "zh-cn",
                                    "zh-tw",
                                    "ru",
                                    "la",
                                    "ms",
                                    "eo",
                                    "ar",
                                    "el",
                                    "ko",
                                ],
                                "format": "select",
                                "title": "Language",
                                "type": ["null", "string"],
                            },
                        },
                        "required": ["subitem_1551255647225", "subitem_1551255648112"],
                        "type": "object",
                    },
                    "maxItems": 9999,
                    "minItems": 1,
                    "title": "Title",
                    "type": "array",
                },
                "item_1617186385884": {
                    "items": {
                        "properties": {
                            "subitem_1551255720400": {
                                "format": "text",
                                "title": "Alternative Title",
                                "title_i18n": {"en": "Alternative Title", "ja": "その他のタイトル"},
                                "title_i18n_temp": {
                                    "en": "Alternative Title",
                                    "ja": "その他のタイトル",
                                },
                                "type": "string",
                            },
                            "subitem_1551255721061": {
                                "currentEnum": [
                                    "ja",
                                    "ja-Kana",
                                    "en",
                                    "fr",
                                    "it",
                                    "de",
                                    "es",
                                    "zh-cn",
                                    "zh-tw",
                                    "ru",
                                    "la",
                                    "ms",
                                    "eo",
                                    "ar",
                                    "el",
                                    "ko",
                                ],
                                "enum": [
                                    None,
                                    "ja",
                                    "ja-Kana",
                                    "en",
                                    "fr",
                                    "it",
                                    "de",
                                    "es",
                                    "zh-cn",
                                    "zh-tw",
                                    "ru",
                                    "la",
                                    "ms",
                                    "eo",
                                    "ar",
                                    "el",
                                    "ko",
                                ],
                                "format": "select",
                                "title": "Language",
                                "type": ["null", "string"],
                            },
                        },
                        "type": "object",
                    },
                    "maxItems": 9999,
                    "minItems": 1,
                    "title": "Alternative Title",
                    "type": "array",
                },
                "item_1617186419668": {
                    "items": {
                        "properties": {
                            "creatorAffiliations": {
                                "format": "array",
                                "items": {
                                    "format": "object",
                                    "properties": {
                                        "affiliationNameIdentifiers": {
                                            "format": "array",
                                            "items": {
                                                "format": "object",
                                                "properties": {
                                                    "affiliationNameIdentifier": {
                                                        "format": "text",
                                                        "title": "所属機関識別子",
                                                        "title_i18n": {
                                                            "en": "Affiliation Name Identifier",
                                                            "ja": "所属機関識別子",
                                                        },
                                                        "title_i18n_temp": {
                                                            "en": "Affiliation Name Identifier",
                                                            "ja": "所属機関識別子",
                                                        },
                                                        "type": "string",
                                                    },
                                                    "affiliationNameIdentifierScheme": {
                                                        "currentEnum": [
                                                            "kakenhi",
                                                            "ISNI",
                                                            "Ringgold",
                                                            "GRID",
                                                        ],
                                                        "enum": [
                                                            None,
                                                            "kakenhi",
                                                            "ISNI",
                                                            "Ringgold",
                                                            "GRID",
                                                        ],
                                                        "format": "select",
                                                        "title": "所属機関識別子スキーマ",
                                                        "type": ["null", "string"],
                                                    },
                                                    "affiliationNameIdentifierURI": {
                                                        "format": "text",
                                                        "title": "所属機関識別子URI",
                                                        "title_i18n": {
                                                            "en": "Affiliation Name Identifier URI",
                                                            "ja": "所属機関識別子URI",
                                                        },
                                                        "title_i18n_temp": {
                                                            "en": "Affiliation Name Identifier URI",
                                                            "ja": "所属機関識別子URI",
                                                        },
                                                        "type": "string",
                                                    },
                                                },
                                                "type": "object",
                                            },
                                            "title": "所属機関識別子",
                                            "type": "array",
                                        },
                                        "affiliationNames": {
                                            "format": "array",
                                            "items": {
                                                "format": "object",
                                                "properties": {
                                                    "affiliationName": {
                                                        "format": "text",
                                                        "title": "所属機関名",
                                                        "title_i18n": {
                                                            "en": "Affiliation Name",
                                                            "ja": "所属機関名",
                                                        },
                                                        "title_i18n_temp": {
                                                            "en": "Affiliation Name",
                                                            "ja": "所属機関名",
                                                        },
                                                        "type": "string",
                                                    },
                                                    "affiliationNameLang": {
                                                        "currentEnum": [
                                                            "ja",
                                                            "ja-Kana",
                                                            "en",
                                                            "fr",
                                                            "it",
                                                            "de",
                                                            "es",
                                                            "zh-cn",
                                                            "zh-tw",
                                                            "ru",
                                                            "la",
                                                            "ms",
                                                            "eo",
                                                            "ar",
                                                            "el",
                                                            "ko",
                                                        ],
                                                        "enum": [
                                                            None,
                                                            "ja",
                                                            "ja-Kana",
                                                            "en",
                                                            "fr",
                                                            "it",
                                                            "de",
                                                            "es",
                                                            "zh-cn",
                                                            "zh-tw",
                                                            "ru",
                                                            "la",
                                                            "ms",
                                                            "eo",
                                                            "ar",
                                                            "el",
                                                            "ko",
                                                        ],
                                                        "format": "select",
                                                        "title": "言語",
                                                        "type": ["null", "string"],
                                                    },
                                                },
                                                "type": "object",
                                            },
                                            "title": "所属機関名",
                                            "type": "array",
                                        },
                                    },
                                    "type": "object",
                                },
                                "title": "作成者所属",
                                "type": "array",
                            },
                            "creatorAlternatives": {
                                "format": "array",
                                "items": {
                                    "format": "object",
                                    "properties": {
                                        "creatorAlternative": {
                                            "format": "text",
                                            "title": "別名",
                                            "title_i18n": {
                                                "en": "Alternative Name",
                                                "ja": "別名",
                                            },
                                            "title_i18n_temp": {
                                                "en": "Alternative Name",
                                                "ja": "別名",
                                            },
                                            "type": "string",
                                        },
                                        "creatorAlternativeLang": {
                                            "currentEnum": [
                                                "ja",
                                                "ja-Kana",
                                                "en",
                                                "fr",
                                                "it",
                                                "de",
                                                "es",
                                                "zh-cn",
                                                "zh-tw",
                                                "ru",
                                                "la",
                                                "ms",
                                                "eo",
                                                "ar",
                                                "el",
                                                "ko",
                                            ],
                                            "enum": [
                                                None,
                                                "ja",
                                                "ja-Kana",
                                                "en",
                                                "fr",
                                                "it",
                                                "de",
                                                "es",
                                                "zh-cn",
                                                "zh-tw",
                                                "ru",
                                                "la",
                                                "ms",
                                                "eo",
                                                "ar",
                                                "el",
                                                "ko",
                                            ],
                                            "format": "select",
                                            "title": "言語",
                                            "type": ["null", "string"],
                                        },
                                    },
                                    "type": "object",
                                },
                                "title": "作成者別名",
                                "type": "array",
                            },
                            "creatorMails": {
                                "format": "array",
                                "items": {
                                    "format": "object",
                                    "properties": {
                                        "creatorMail": {
                                            "format": "text",
                                            "title": "メールアドレス",
                                            "title_i18n": {
                                                "en": "Email Address",
                                                "ja": "メールアドレス",
                                            },
                                            "title_i18n_temp": {
                                                "en": "Email Address",
                                                "ja": "メールアドレス",
                                            },
                                            "type": "string",
                                        }
                                    },
                                    "type": "object",
                                },
                                "title": "作成者メールアドレス",
                                "type": "array",
                            },
                            "creatorNames": {
                                "format": "array",
                                "items": {
                                    "format": "object",
                                    "properties": {
                                        "creatorName": {
                                            "format": "text",
                                            "title": "姓名",
                                            "title_i18n": {"en": "Name", "ja": "姓名"},
                                            "title_i18n_temp": {"en": "Name", "ja": "姓名"},
                                            "type": "string",
                                        },
                                        "creatorNameLang": {
                                            "currentEnum": [
                                                "ja",
                                                "ja-Kana",
                                                "en",
                                                "fr",
                                                "it",
                                                "de",
                                                "es",
                                                "zh-cn",
                                                "zh-tw",
                                                "ru",
                                                "la",
                                                "ms",
                                                "eo",
                                                "ar",
                                                "el",
                                                "ko",
                                            ],
                                            "enum": [
                                                None,
                                                "ja",
                                                "ja-Kana",
                                                "en",
                                                "fr",
                                                "it",
                                                "de",
                                                "es",
                                                "zh-cn",
                                                "zh-tw",
                                                "ru",
                                                "la",
                                                "ms",
                                                "eo",
                                                "ar",
                                                "el",
                                                "ko",
                                            ],
                                            "format": "select",
                                            "title": "言語",
                                            "type": ["null", "string"],
                                        },
                                    },
                                    "type": "object",
                                },
                                "title": "作成者姓名",
                                "type": "array",
                            },
                            "familyNames": {
                                "format": "array",
                                "items": {
                                    "format": "object",
                                    "properties": {
                                        "familyName": {
                                            "format": "text",
                                            "title": "姓",
                                            "title_i18n": {"en": "Family Name", "ja": "姓"},
                                            "title_i18n_temp": {
                                                "en": "Family Name",
                                                "ja": "姓",
                                            },
                                            "type": "string",
                                        },
                                        "familyNameLang": {
                                            "currentEnum": [
                                                "ja",
                                                "ja-Kana",
                                                "en",
                                                "fr",
                                                "it",
                                                "de",
                                                "es",
                                                "zh-cn",
                                                "zh-tw",
                                                "ru",
                                                "la",
                                                "ms",
                                                "eo",
                                                "ar",
                                                "el",
                                                "ko",
                                            ],
                                            "enum": [
                                                None,
                                                "ja",
                                                "ja-Kana",
                                                "en",
                                                "fr",
                                                "it",
                                                "de",
                                                "es",
                                                "zh-cn",
                                                "zh-tw",
                                                "ru",
                                                "la",
                                                "ms",
                                                "eo",
                                                "ar",
                                                "el",
                                                "ko",
                                            ],
                                            "format": "select",
                                            "title": "言語",
                                            "type": ["null", "string"],
                                        },
                                    },
                                    "type": "object",
                                },
                                "title": "作成者姓",
                                "type": "array",
                            },
                            "givenNames": {
                                "format": "array",
                                "items": {
                                    "format": "object",
                                    "properties": {
                                        "givenName": {
                                            "format": "text",
                                            "title": "名",
                                            "title_i18n": {"en": "Given Name", "ja": "名"},
                                            "title_i18n_temp": {
                                                "en": "Given Name",
                                                "ja": "名",
                                            },
                                            "type": "string",
                                        },
                                        "givenNameLang": {
                                            "currentEnum": [
                                                "ja",
                                                "ja-Kana",
                                                "en",
                                                "fr",
                                                "it",
                                                "de",
                                                "es",
                                                "zh-cn",
                                                "zh-tw",
                                                "ru",
                                                "la",
                                                "ms",
                                                "eo",
                                                "ar",
                                                "el",
                                                "ko",
                                            ],
                                            "enum": [
                                                None,
                                                "ja",
                                                "ja-Kana",
                                                "en",
                                                "fr",
                                                "it",
                                                "de",
                                                "es",
                                                "zh-cn",
                                                "zh-tw",
                                                "ru",
                                                "la",
                                                "ms",
                                                "eo",
                                                "ar",
                                                "el",
                                                "ko",
                                            ],
                                            "format": "select",
                                            "title": "言語",
                                            "type": ["null", "string"],
                                        },
                                    },
                                    "type": "object",
                                },
                                "title": "作成者名",
                                "type": "array",
                            },
                            "iscreator": {
                                "format": "text",
                                "title": "iscreator",
                                "title_i18n": {"en": "", "ja": ""},
                                "type": "string",
                                "uniqueKey": "item_1617186419668_iscreator",
                            },
                            "nameIdentifiers": {
                                "format": "array",
                                "items": {
                                    "format": "object",
                                    "properties": {
                                        "nameIdentifier": {
                                            "format": "text",
                                            "title": "作成者識別子",
                                            "title_i18n": {
                                                "en": "Creator Identifier",
                                                "ja": "作成者識別子",
                                            },
                                            "title_i18n_temp": {
                                                "en": "Creator Identifier",
                                                "ja": "作成者識別子",
                                            },
                                            "type": "string",
                                        },
                                        "nameIdentifierScheme": {
                                            "currentEnum": [],
                                            "format": "select",
                                            "title": "作成者識別子Scheme",
                                            "type": ["null", "string"],
                                        },
                                        "nameIdentifierURI": {
                                            "format": "text",
                                            "title": "作成者識別子URI",
                                            "title_i18n": {
                                                "en": "Creator Identifier URI",
                                                "ja": "作成者識別子URI",
                                            },
                                            "title_i18n_temp": {
                                                "en": "Creator Identifier URI",
                                                "ja": "作成者識別子URI",
                                            },
                                            "type": "string",
                                        },
                                    },
                                    "type": "object",
                                },
                                "title": "作成者識別子",
                                "type": "array",
                            },
                        },
                        "type": "object",
                    },
                    "maxItems": 9999,
                    "minItems": 1,
                    "title": "Creator",
                    "type": "array",
                },
                "item_1617186476635": {
                    "properties": {
                        "subitem_1522299639480": {
                            "currentEnum": [
                                "embargoed access",
                                "metadata only access",
                                "open access",
                                "restricted access",
                            ],
                            "enum": [
                                None,
                                "embargoed access",
                                "metadata only access",
                                "open access",
                                "restricted access",
                            ],
                            "format": "select",
                            "title": "アクセス権",
                            "type": ["null", "string"],
                        },
                        "subitem_1600958577026": {
                            "format": "text",
                            "title": "アクセス権URI",
                            "title_i18n": {"en": "Access Rights URI", "ja": "アクセス権URI"},
                            "title_i18n_temp": {
                                "en": "Access Rights URI",
                                "ja": "アクセス権URI",
                            },
                            "type": "string",
                        },
                    },
                    "title": "Access Rights",
                    "type": "object",
                },
                "item_1617186499011": {
                    "items": {
                        "properties": {
                            "subitem_1522650717957": {
                                "currentEnum": [
                                    "ja",
                                    "en",
                                    "fr",
                                    "it",
                                    "de",
                                    "es",
                                    "zh-cn",
                                    "zh-tw",
                                    "ru",
                                    "la",
                                    "ms",
                                    "eo",
                                    "ar",
                                    "el",
                                    "ko",
                                ],
                                "enum": [
                                    None,
                                    "ja",
                                    "en",
                                    "fr",
                                    "it",
                                    "de",
                                    "es",
                                    "zh-cn",
                                    "zh-tw",
                                    "ru",
                                    "la",
                                    "ms",
                                    "eo",
                                    "ar",
                                    "el",
                                    "ko",
                                ],
                                "format": "select",
                                "title": "言語",
                                "type": ["null", "string"],
                            },
                            "subitem_1522650727486": {
                                "format": "text",
                                "title": "権利情報Resource",
                                "title_i18n": {
                                    "en": "Rights Information Resource",
                                    "ja": "権利情報Resource",
                                },
                                "title_i18n_temp": {
                                    "en": "Rights Information Resource",
                                    "ja": "権利情報Resource",
                                },
                                "type": "string",
                            },
                            "subitem_1522651041219": {
                                "format": "text",
                                "title": "権利情報",
                                "title_i18n": {"en": "Rights Information", "ja": "権利情報"},
                                "title_i18n_temp": {
                                    "en": "Rights Information",
                                    "ja": "権利情報",
                                },
                                "type": "string",
                            },
                        },
                        "type": "object",
                    },
                    "maxItems": 9999,
                    "minItems": 1,
                    "title": "Rights",
                    "type": "array",
                },
                "item_1617186609386": {
                    "items": {
                        "properties": {
                            "subitem_1522299896455": {
                                "currentEnum": [
                                    "ja",
                                    "ja-Kana",
                                    "en",
                                    "fr",
                                    "it",
                                    "de",
                                    "es",
                                    "zh-cn",
                                    "zh-tw",
                                    "ru",
                                    "la",
                                    "ms",
                                    "eo",
                                    "ar",
                                    "el",
                                    "ko",
                                ],
                                "enum": [
                                    None,
                                    "ja",
                                    "ja-Kana",
                                    "en",
                                    "fr",
                                    "it",
                                    "de",
                                    "es",
                                    "zh-cn",
                                    "zh-tw",
                                    "ru",
                                    "la",
                                    "ms",
                                    "eo",
                                    "ar",
                                    "el",
                                    "ko",
                                ],
                                "format": "select",
                                "title": "言語",
                                "type": ["null", "string"],
                            },
                            "subitem_1522300014469": {
                                "currentEnum": [
                                    "BSH",
                                    "DDC",
                                    "LCC",
                                    "LCSH",
                                    "MeSH",
                                    "NDC",
                                    "NDLC",
                                    "NDLSH",
                                    "SciVal",
                                    "UDC",
                                    "Other",
                                ],
                                "enum": [
                                    None,
                                    "BSH",
                                    "DDC",
                                    "LCC",
                                    "LCSH",
                                    "MeSH",
                                    "NDC",
                                    "NDLC",
                                    "NDLSH",
                                    "SciVal",
                                    "UDC",
                                    "Other",
                                ],
                                "format": "select",
                                "title": "主題Scheme",
                                "type": ["null", "string"],
                            },
                            "subitem_1522300048512": {
                                "format": "text",
                                "title": "主題URI",
                                "title_i18n": {"en": "Subject URI", "ja": "主題URI"},
                                "title_i18n_temp": {"en": "Subject URI", "ja": "主題URI"},
                                "type": "string",
                            },
                            "subitem_1523261968819": {
                                "format": "text",
                                "title": "主題",
                                "title_i18n": {"en": "Subject", "ja": "主題"},
                                "title_i18n_temp": {"en": "Subject", "ja": "主題"},
                                "type": "string",
                            },
                        },
                        "type": "object",
                    },
                    "maxItems": 9999,
                    "minItems": 1,
                    "title": "Subject",
                    "type": "array",
                },
                "item_1617186626617": {
                    "items": {
                        "properties": {
                            "subitem_description": {
                                "format": "textarea",
                                "title": "内容記述",
                                "title_i18n": {"en": "Description", "ja": "内容記述"},
                                "title_i18n_temp": {"en": "Description", "ja": "内容記述"},
                                "type": "string",
                            },
                            "subitem_description_language": {
                                "currentEnum": [
                                    "ja",
                                    "en",
                                    "fr",
                                    "it",
                                    "de",
                                    "es",
                                    "zh-cn",
                                    "zh-tw",
                                    "ru",
                                    "la",
                                    "ms",
                                    "eo",
                                    "ar",
                                    "el",
                                    "ko",
                                ],
                                "enum": [
                                    None,
                                    "ja",
                                    "en",
                                    "fr",
                                    "it",
                                    "de",
                                    "es",
                                    "zh-cn",
                                    "zh-tw",
                                    "ru",
                                    "la",
                                    "ms",
                                    "eo",
                                    "ar",
                                    "el",
                                    "ko",
                                ],
                                "format": "select",
                                "title": "言語",
                                "type": ["null", "string"],
                            },
                            "subitem_description_type": {
                                "currentEnum": [
                                    "Abstract",
                                    "Methods",
                                    "TableOfContents",
                                    "TechnicalInfo",
                                    "Other",
                                ],
                                "enum": [
                                    None,
                                    "Abstract",
                                    "Methods",
                                    "TableOfContents",
                                    "TechnicalInfo",
                                    "Other",
                                ],
                                "format": "select",
                                "title": "内容記述タイプ",
                                "type": ["null", "string"],
                            },
                        },
                        "type": "object",
                    },
                    "maxItems": 9999,
                    "minItems": 1,
                    "title": "Description",
                    "type": "array",
                },
                "item_1617186643794": {
                    "items": {
                        "properties": {
                            "subitem_1522300295150": {
                                "currentEnum": [
                                    "ja",
                                    "en",
                                    "fr",
                                    "it",
                                    "de",
                                    "es",
                                    "zh-cn",
                                    "zh-tw",
                                    "ru",
                                    "la",
                                    "ms",
                                    "eo",
                                    "ar",
                                    "el",
                                    "ko",
                                ],
                                "enum": [
                                    None,
                                    "ja",
                                    "en",
                                    "fr",
                                    "it",
                                    "de",
                                    "es",
                                    "zh-cn",
                                    "zh-tw",
                                    "ru",
                                    "la",
                                    "ms",
                                    "eo",
                                    "ar",
                                    "el",
                                    "ko",
                                ],
                                "format": "select",
                                "title": "言語",
                                "type": ["null", "string"],
                            },
                            "subitem_1522300316516": {
                                "format": "text",
                                "title": "出版者",
                                "title_i18n": {"en": "Publisher", "ja": "出版者"},
                                "title_i18n_temp": {"en": "Publisher", "ja": "出版者"},
                                "type": "string",
                            },
                        },
                        "type": "object",
                    },
                    "maxItems": 9999,
                    "minItems": 1,
                    "title": "Publisher",
                    "type": "array",
                },
                "item_1617186660861": {
                    "items": {
                        "properties": {
                            "subitem_1522300695726": {
                                "currentEnum": [
                                    "Accepted",
                                    "Available",
                                    "Collected",
                                    "Copyrighted",
                                    "Created",
                                    "Issued",
                                    "Submitted",
                                    "Updated",
                                    "Valid",
                                ],
                                "enum": [
                                    None,
                                    "Accepted",
                                    "Available",
                                    "Collected",
                                    "Copyrighted",
                                    "Created",
                                    "Issued",
                                    "Submitted",
                                    "Updated",
                                    "Valid",
                                ],
                                "format": "select",
                                "title": "日付タイプ",
                                "type": ["null", "string"],
                            },
                            "subitem_1522300722591": {
                                "format": "datetime",
                                "title": "日付",
                                "title_i18n": {"en": "Date", "ja": "日付"},
                                "title_i18n_temp": {"en": "Date", "ja": "日付"},
                                "type": "string",
                            },
                        },
                        "type": "object",
                    },
                    "maxItems": 9999,
                    "minItems": 1,
                    "title": "Date",
                    "type": "array",
                },
                "item_1617186702042": {
                    "items": {
                        "properties": {
                            "subitem_1551255818386": {
                                "currentEnum": [
                                    "jpn",
                                    "eng",
                                    "fra",
                                    "ita",
                                    "spa",
                                    "zho",
                                    "rus",
                                    "lat",
                                    "msa",
                                    "epo",
                                    "ara",
                                    "ell",
                                    "kor",
                                ],
                                "enum": [
                                    None,
                                    "jpn",
                                    "eng",
                                    "fra",
                                    "ita",
                                    "spa",
                                    "zho",
                                    "rus",
                                    "lat",
                                    "msa",
                                    "epo",
                                    "ara",
                                    "ell",
                                    "kor",
                                ],
                                "format": "select",
                                "title": "Language",
                                "type": ["null", "string"],
                            }
                        },
                        "type": "object",
                    },
                    "maxItems": 9999,
                    "minItems": 1,
                    "title": "Language",
                    "type": "array",
                },
                "item_1617186783814": {
                    "items": {
                        "properties": {
                            "subitem_identifier_type": {
                                "currentEnum": ["DOI", "HDL", "URI"],
                                "enum": [None, "DOI", "HDL", "URI"],
                                "format": "select",
                                "title": "識別子タイプ",
                                "type": ["null", "string"],
                            },
                            "subitem_identifier_uri": {
                                "format": "text",
                                "title": "識別子",
                                "title_i18n": {"en": "Identifier", "ja": "識別子"},
                                "title_i18n_temp": {"en": "Identifier", "ja": "識別子"},
                                "type": "string",
                            },
                        },
                        "type": "object",
                    },
                    "maxItems": 9999,
                    "minItems": 1,
                    "title": "Identifier",
                    "type": "array",
                },
                "item_1617186819068": {
                    "properties": {
                        "subitem_identifier_reg_text": {
                            "format": "text",
                            "title": "ID登録",
                            "title_i18n": {"en": "Identifier Registration", "ja": "ID登録"},
                            "title_i18n_temp": {
                                "en": "Identifier Registration",
                                "ja": "ID登録",
                            },
                            "type": "string",
                        },
                        "subitem_identifier_reg_type": {
                            "currentEnum": ["JaLC", "Crossref", "DataCite", "PMID"],
                            "enum": [None, "JaLC", "Crossref", "DataCite", "PMID"],
                            "format": "select",
                            "title": "ID登録タイプ",
                            "type": ["null", "string"],
                        },
                    },
                    "title": "Identifier Registration",
                    "type": "object",
                },
                "item_1617186859717": {
                    "items": {
                        "properties": {
                            "subitem_1522658018441": {
                                "currentEnum": [
                                    "ja",
                                    "en",
                                    "fr",
                                    "it",
                                    "de",
                                    "es",
                                    "zh-cn",
                                    "zh-tw",
                                    "ru",
                                    "la",
                                    "ms",
                                    "eo",
                                    "ar",
                                    "el",
                                    "ko",
                                ],
                                "enum": [
                                    None,
                                    "ja",
                                    "en",
                                    "fr",
                                    "it",
                                    "de",
                                    "es",
                                    "zh-cn",
                                    "zh-tw",
                                    "ru",
                                    "la",
                                    "ms",
                                    "eo",
                                    "ar",
                                    "el",
                                    "ko",
                                ],
                                "format": "select",
                                "title": "言語",
                                "type": ["null", "string"],
                            },
                            "subitem_1522658031721": {
                                "format": "text",
                                "title": "時間的範囲",
                                "title_i18n": {"en": "Temporal", "ja": "時間的範囲"},
                                "title_i18n_temp": {"en": "Temporal", "ja": "時間的範囲"},
                                "type": "string",
                            },
                        },
                        "type": "object",
                    },
                    "maxItems": 9999,
                    "minItems": 1,
                    "title": "Temporal",
                    "type": "array",
                },
                "item_1617186882738": {
                    "items": {
                        "properties": {
                            "subitem_geolocation_box": {
                                "format": "object",
                                "properties": {
                                    "subitem_east_longitude": {
                                        "format": "text",
                                        "title": "東部経度",
                                        "title_i18n": {
                                            "en": "East Bound Longitude",
                                            "ja": "東部経度",
                                        },
                                        "title_i18n_temp": {
                                            "en": "East Bound Longitude",
                                            "ja": "東部経度",
                                        },
                                        "type": "string",
                                    },
                                    "subitem_north_latitude": {
                                        "format": "text",
                                        "title": "北部緯度",
                                        "title_i18n": {
                                            "en": "North Bound Latitude",
                                            "ja": "北部緯度",
                                        },
                                        "title_i18n_temp": {
                                            "en": "North Bound Latitude",
                                            "ja": "北部緯度",
                                        },
                                        "type": "string",
                                    },
                                    "subitem_south_latitude": {
                                        "format": "text",
                                        "title": "南部緯度",
                                        "title_i18n": {
                                            "en": "South Bound Latitude",
                                            "ja": "南部緯度",
                                        },
                                        "title_i18n_temp": {
                                            "en": "South Bound Latitude",
                                            "ja": "南部緯度",
                                        },
                                        "type": "string",
                                    },
                                    "subitem_west_longitude": {
                                        "format": "text",
                                        "title": "西部経度",
                                        "title_i18n": {
                                            "en": "West Bound Longitude",
                                            "ja": "西部経度",
                                        },
                                        "title_i18n_temp": {
                                            "en": "West Bound Longitude",
                                            "ja": "西部経度",
                                        },
                                        "type": "string",
                                    },
                                },
                                "title": "位置情報（空間）",
                                "type": "object",
                            },
                            "subitem_geolocation_place": {
                                "format": "array",
                                "items": {
                                    "format": "object",
                                    "properties": {
                                        "subitem_geolocation_place_text": {
                                            "format": "text",
                                            "title": "位置情報（自由記述）",
                                            "title_i18n": {
                                                "en": "Geo Location Place",
                                                "ja": "位置情報（自由記述）",
                                            },
                                            "title_i18n_temp": {
                                                "en": "Geo Location Place",
                                                "ja": "位置情報（自由記述）",
                                            },
                                            "type": "string",
                                        }
                                    },
                                    "type": "object",
                                },
                                "title": "位置情報（自由記述）",
                                "type": "array",
                            },
                            "subitem_geolocation_point": {
                                "format": "object",
                                "properties": {
                                    "subitem_point_latitude": {
                                        "format": "text",
                                        "title": "緯度",
                                        "title_i18n": {"en": "Point Latitude", "ja": "緯度"},
                                        "title_i18n_temp": {
                                            "en": "Point Latitude",
                                            "ja": "緯度",
                                        },
                                        "type": "string",
                                    },
                                    "subitem_point_longitude": {
                                        "format": "text",
                                        "title": "経度",
                                        "title_i18n": {"en": "Point Longitude", "ja": "経度"},
                                        "title_i18n_temp": {
                                            "en": "Point Longitude",
                                            "ja": "経度",
                                        },
                                        "type": "string",
                                    },
                                },
                                "title": "位置情報（点）",
                                "type": "object",
                            },
                        },
                        "type": "object",
                    },
                    "maxItems": 9999,
                    "minItems": 1,
                    "title": "Geo Location",
                    "type": "array",
                },
                "item_1617186901218": {
                    "items": {
                        "properties": {
                            "subitem_1522399143519": {
                                "format": "object",
                                "properties": {
                                    "subitem_1522399281603": {
                                        "currentEnum": [
                                            "Crossref Funder",
                                            "GRID",
                                            "ISNI",
                                            "Other",
                                            "kakenhi",
                                        ],
                                        "enum": [
                                            None,
                                            "Crossref Funder",
                                            "GRID",
                                            "ISNI",
                                            "Other",
                                            "kakenhi",
                                        ],
                                        "format": "select",
                                        "title": "助成機関識別子タイプ",
                                        "type": ["null", "string"],
                                    },
                                    "subitem_1522399333375": {
                                        "format": "text",
                                        "title": "助成機関識別子",
                                        "title_i18n": {
                                            "en": "Funder Identifier",
                                            "ja": "助成機関識別子",
                                        },
                                        "title_i18n_temp": {
                                            "en": "Funder Identifier",
                                            "ja": "助成機関識別子",
                                        },
                                        "type": "string",
                                    },
                                },
                                "title": "助成機関識別子",
                                "type": "object",
                            },
                            "subitem_1522399412622": {
                                "format": "array",
                                "items": {
                                    "format": "object",
                                    "properties": {
                                        "subitem_1522399416691": {
                                            "currentEnum": [
                                                "ja",
                                                "en",
                                                "fr",
                                                "it",
                                                "de",
                                                "es",
                                                "zh-cn",
                                                "zh-tw",
                                                "ru",
                                                "la",
                                                "ms",
                                                "eo",
                                                "ar",
                                                "el",
                                                "ko",
                                            ],
                                            "enum": [
                                                None,
                                                "ja",
                                                "en",
                                                "fr",
                                                "it",
                                                "de",
                                                "es",
                                                "zh-cn",
                                                "zh-tw",
                                                "ru",
                                                "la",
                                                "ms",
                                                "eo",
                                                "ar",
                                                "el",
                                                "ko",
                                            ],
                                            "format": "select",
                                            "title": "言語",
                                            "type": ["null", "string"],
                                        },
                                        "subitem_1522737543681": {
                                            "format": "text",
                                            "title": "助成機関名",
                                            "title_i18n": {
                                                "en": "Funder Name",
                                                "ja": "助成機関名",
                                            },
                                            "title_i18n_temp": {
                                                "en": "Funder Name",
                                                "ja": "助成機関名",
                                            },
                                            "type": "string",
                                        },
                                    },
                                    "type": "object",
                                },
                                "title": "助成機関名",
                                "type": "array",
                            },
                            "subitem_1522399571623": {
                                "format": "object",
                                "properties": {
                                    "subitem_1522399585738": {
                                        "format": "text",
                                        "title": "研究課題URI",
                                        "title_i18n": {"en": "Award URI", "ja": "研究課題URI"},
                                        "title_i18n_temp": {
                                            "en": "Award URI",
                                            "ja": "研究課題URI",
                                        },
                                        "type": "string",
                                    },
                                    "subitem_1522399628911": {
                                        "format": "text",
                                        "title": "研究課題番号",
                                        "title_i18n": {
                                            "en": "Award Number",
                                            "ja": "研究課題番号",
                                        },
                                        "title_i18n_temp": {
                                            "en": "Award Number",
                                            "ja": "研究課題番号",
                                        },
                                        "type": "string",
                                    },
                                },
                                "title": "研究課題番号",
                                "type": "object",
                            },
                            "subitem_1522399651758": {
                                "format": "array",
                                "items": {
                                    "format": "object",
                                    "properties": {
                                        "subitem_1522721910626": {
                                            "currentEnum": [
                                                "ja",
                                                "en",
                                                "fr",
                                                "it",
                                                "de",
                                                "es",
                                                "zh-cn",
                                                "zh-tw",
                                                "ru",
                                                "la",
                                                "ms",
                                                "eo",
                                                "ar",
                                                "el",
                                                "ko",
                                            ],
                                            "enum": [
                                                None,
                                                "ja",
                                                "en",
                                                "fr",
                                                "it",
                                                "de",
                                                "es",
                                                "zh-cn",
                                                "zh-tw",
                                                "ru",
                                                "la",
                                                "ms",
                                                "eo",
                                                "ar",
                                                "el",
                                                "ko",
                                            ],
                                            "format": "select",
                                            "title": "言語",
                                            "type": ["null", "string"],
                                        },
                                        "subitem_1522721929892": {
                                            "format": "text",
                                            "title": "研究課題名",
                                            "title_i18n": {
                                                "en": "Award Title",
                                                "ja": "研究課題名",
                                            },
                                            "title_i18n_temp": {
                                                "en": "Award Title",
                                                "ja": "研究課題名",
                                            },
                                            "type": "string",
                                        },
                                    },
                                    "type": "object",
                                },
                                "title": "研究課題名",
                                "type": "array",
                            },
                        },
                        "type": "object",
                    },
                    "maxItems": 9999,
                    "minItems": 1,
                    "title": "Funding Reference",
                    "type": "array",
                },
                "item_1617186920753": {
                    "items": {
                        "properties": {
                            "subitem_1522646500366": {
                                "currentEnum": ["PISSN", "EISSN", "ISSN", "NCID"],
                                "enum": [None, "PISSN", "EISSN", "ISSN", "NCID"],
                                "format": "select",
                                "title": "収録物識別子タイプ",
                                "type": ["null", "string"],
                            },
                            "subitem_1522646572813": {
                                "format": "text",
                                "title": "収録物識別子",
                                "title_i18n": {"en": "Source Identifier", "ja": "収録物識別子"},
                                "title_i18n_temp": {
                                    "en": "Source Identifier",
                                    "ja": "収録物識別子",
                                },
                                "type": "string",
                            },
                        },
                        "type": "object",
                    },
                    "maxItems": 9999,
                    "minItems": 1,
                    "title": "Source Identifier",
                    "type": "array",
                },
                "item_1617186941041": {
                    "items": {
                        "properties": {
                            "subitem_1522650068558": {
                                "currentEnum": [
                                    "ja",
                                    "en",
                                    "fr",
                                    "it",
                                    "de",
                                    "es",
                                    "zh-cn",
                                    "zh-tw",
                                    "ru",
                                    "la",
                                    "ms",
                                    "eo",
                                    "ar",
                                    "el",
                                    "ko",
                                ],
                                "enum": [
                                    None,
                                    "ja",
                                    "en",
                                    "fr",
                                    "it",
                                    "de",
                                    "es",
                                    "zh-cn",
                                    "zh-tw",
                                    "ru",
                                    "la",
                                    "ms",
                                    "eo",
                                    "ar",
                                    "el",
                                    "ko",
                                ],
                                "format": "select",
                                "title": "言語",
                                "type": ["null", "string"],
                            },
                            "subitem_1522650091861": {
                                "format": "text",
                                "title": "収録物名",
                                "title_i18n": {"en": "Source Title", "ja": "収録物名"},
                                "title_i18n_temp": {"en": "Source Title", "ja": "収録物名"},
                                "type": "string",
                            },
                        },
                        "type": "object",
                    },
                    "maxItems": 9999,
                    "minItems": 1,
                    "title": "Source Title",
                    "type": "array",
                },
                "item_1617186959569": {
                    "properties": {
                        "subitem_1551256328147": {
                            "format": "text",
                            "title": "Volume Number",
                            "title_i18n": {"en": "Volume Number", "ja": "巻"},
                            "title_i18n_temp": {"en": "Volume Number", "ja": "巻"},
                            "type": "string",
                        }
                    },
                    "title": "Volume Number",
                    "type": "object",
                },
                "item_1617186981471": {
                    "properties": {
                        "subitem_1551256294723": {
                            "format": "text",
                            "title": "Issue Number",
                            "title_i18n": {"en": "Issue Number", "ja": "号"},
                            "title_i18n_temp": {"en": "Issue Number", "ja": "号"},
                            "type": "string",
                        }
                    },
                    "title": "Issue Number",
                    "type": "object",
                },
                "item_1617186994930": {
                    "properties": {
                        "subitem_1551256248092": {
                            "format": "text",
                            "title": "Number of Pages",
                            "title_i18n": {"en": "Number of Pages", "ja": "ページ数"},
                            "title_i18n_temp": {"en": "Number of Pages", "ja": "ページ数"},
                            "type": "string",
                        }
                    },
                    "title": "Number of Pages",
                    "type": "object",
                },
                "item_1617187024783": {
                    "properties": {
                        "subitem_1551256198917": {
                            "format": "text",
                            "title": "Page Start",
                            "title_i18n": {"en": "Page Start", "ja": "開始ページ"},
                            "title_i18n_temp": {"en": "Page Start", "ja": "開始ページ"},
                            "type": "string",
                        }
                    },
                    "title": "Page Start",
                    "type": "object",
                },
                "item_1617187045071": {
                    "properties": {
                        "subitem_1551256185532": {
                            "format": "text",
                            "title": "Page End",
                            "title_i18n": {"en": "Page End", "ja": "終了ページ"},
                            "title_i18n_temp": {"en": "Page End", "ja": "終了ページ"},
                            "type": "string",
                        }
                    },
                    "title": "Page End",
                    "type": "object",
                },
                "item_1617187056579": {
                    "properties": {
                        "bibliographicIssueDates": {
                            "format": "object",
                            "properties": {
                                "bibliographicIssueDate": {
                                    "format": "datetime",
                                    "title": "日付",
                                    "title_i18n": {"en": "Date", "ja": "日付"},
                                    "title_i18n_temp": {"en": "Date", "ja": "日付"},
                                    "type": "string",
                                },
                                "bibliographicIssueDateType": {
                                    "currentEnum": ["Issued"],
                                    "enum": [None, "Issued"],
                                    "format": "select",
                                    "title": "日付タイプ",
                                    "type": ["null", "string"],
                                },
                            },
                            "title": "発行日",
                            "type": "object",
                        },
                        "bibliographicIssueNumber": {
                            "format": "text",
                            "title": "号",
                            "title_i18n": {"en": "Issue Number", "ja": "号"},
                            "title_i18n_temp": {"en": "Issue Number", "ja": "号"},
                            "type": "string",
                        },
                        "bibliographicNumberOfPages": {
                            "format": "text",
                            "title": "ページ数",
                            "title_i18n": {"en": "Number of Page", "ja": "ページ数"},
                            "title_i18n_temp": {"en": "Number of Page", "ja": "ページ数"},
                            "type": "string",
                        },
                        "bibliographicPageEnd": {
                            "format": "text",
                            "title": "終了ページ",
                            "title_i18n": {"en": "Page End", "ja": "終了ページ"},
                            "title_i18n_temp": {"en": "Page End", "ja": "終了ページ"},
                            "type": "string",
                        },
                        "bibliographicPageStart": {
                            "format": "text",
                            "title": "開始ページ",
                            "title_i18n": {"en": "Page Start", "ja": "開始ページ"},
                            "title_i18n_temp": {"en": "Page Start", "ja": "開始ページ"},
                            "type": "string",
                        },
                        "bibliographicVolumeNumber": {
                            "format": "text",
                            "title": "巻",
                            "title_i18n": {"en": "Volume Number", "ja": "巻"},
                            "title_i18n_temp": {"en": "Volume Number", "ja": "巻"},
                            "type": "string",
                        },
                        "bibliographic_titles": {
                            "format": "array",
                            "items": {
                                "format": "object",
                                "properties": {
                                    "bibliographic_title": {
                                        "format": "text",
                                        "title": "タイトル",
                                        "title_i18n": {"en": "Title", "ja": "タイトル"},
                                        "title_i18n_temp": {"en": "Title", "ja": "タイトル"},
                                        "type": "string",
                                    },
                                    "bibliographic_titleLang": {
                                        "currentEnum": [
                                            "ja",
                                            "en",
                                            "fr",
                                            "it",
                                            "de",
                                            "es",
                                            "zh-cn",
                                            "zh-tw",
                                            "ru",
                                            "la",
                                            "ms",
                                            "eo",
                                            "ar",
                                            "el",
                                            "ko",
                                        ],
                                        "enum": [
                                            None,
                                            "ja",
                                            "en",
                                            "fr",
                                            "it",
                                            "de",
                                            "es",
                                            "zh-cn",
                                            "zh-tw",
                                            "ru",
                                            "la",
                                            "ms",
                                            "eo",
                                            "ar",
                                            "el",
                                            "ko",
                                        ],
                                        "format": "select",
                                        "title": "言語",
                                        "type": ["null", "string"],
                                    },
                                },
                                "type": "object",
                            },
                            "title": "雑誌名",
                            "type": "array",
                        },
                    },
                    "title": "Bibliographic Information",
                    "type": "object",
                },
                "item_1617187087799": {
                    "properties": {
                        "subitem_1551256171004": {
                            "format": "text",
                            "title": "Dissertation Number",
                            "title_i18n": {"en": "Dissertation Number", "ja": "学位授与番号"},
                            "title_i18n_temp": {
                                "en": "Dissertation Number",
                                "ja": "学位授与番号",
                            },
                            "type": "string",
                        }
                    },
                    "title": "Dissertation Number",
                    "type": "object",
                },
                "item_1617187112279": {
                    "items": {
                        "properties": {
                            "subitem_1551256126428": {
                                "format": "text",
                                "title": "Degree Name",
                                "title_i18n": {"en": "Degree Name", "ja": "学位名"},
                                "title_i18n_temp": {"en": "Degree Name", "ja": "学位名"},
                                "type": "string",
                            },
                            "subitem_1551256129013": {
                                "currentEnum": [
                                    "ja",
                                    "en",
                                    "fr",
                                    "it",
                                    "de",
                                    "es",
                                    "zh-cn",
                                    "zh-tw",
                                    "ru",
                                    "la",
                                    "ms",
                                    "eo",
                                    "ar",
                                    "el",
                                    "ko",
                                ],
                                "enum": [
                                    None,
                                    "ja",
                                    "en",
                                    "fr",
                                    "it",
                                    "de",
                                    "es",
                                    "zh-cn",
                                    "zh-tw",
                                    "ru",
                                    "la",
                                    "ms",
                                    "eo",
                                    "ar",
                                    "el",
                                    "ko",
                                ],
                                "format": "select",
                                "title": "Language",
                                "type": ["null", "string"],
                            },
                        },
                        "type": "object",
                    },
                    "maxItems": 9999,
                    "minItems": 1,
                    "title": "Degree Name",
                    "type": "array",
                },
                "item_1617187136212": {
                    "properties": {
                        "subitem_1551256096004": {
                            "format": "datetime",
                            "title": "Date Granted",
                            "title_i18n": {"en": "Date Granted", "ja": "学位授与年月日"},
                            "title_i18n_temp": {"en": "Date Granted", "ja": "学位授与年月日"},
                            "type": "string",
                        }
                    },
                    "title": "Date Granted",
                    "type": "object",
                },
                "item_1617187187528": {
                    "items": {
                        "properties": {
                            "subitem_1599711633003": {
                                "format": "array",
                                "items": {
                                    "format": "object",
                                    "properties": {
                                        "subitem_1599711636923": {
                                            "format": "text",
                                            "title": "Conference Name",
                                            "title_i18n": {
                                                "en": "Conference Name",
                                                "ja": "会議名",
                                            },
                                            "title_i18n_temp": {
                                                "en": "Conference Name",
                                                "ja": "会議名",
                                            },
                                            "type": "string",
                                        },
                                        "subitem_1599711645590": {
                                            "currentEnum": [
                                                "ja",
                                                "en",
                                                "fr",
                                                "it",
                                                "de",
                                                "es",
                                                "zh-cn",
                                                "zh-tw",
                                                "ru",
                                                "la",
                                                "ms",
                                                "eo",
                                                "ar",
                                                "el",
                                                "ko",
                                            ],
                                            "enum": [
                                                None,
                                                "ja",
                                                "en",
                                                "fr",
                                                "it",
                                                "de",
                                                "es",
                                                "zh-cn",
                                                "zh-tw",
                                                "ru",
                                                "la",
                                                "ms",
                                                "eo",
                                                "ar",
                                                "el",
                                                "ko",
                                            ],
                                            "format": "select",
                                            "title": "Language",
                                            "type": ["null", "string"],
                                        },
                                    },
                                    "type": "object",
                                },
                                "title": "Conference Name",
                                "type": "array",
                            },
                            "subitem_1599711655652": {
                                "format": "text",
                                "title": "Conference Sequence",
                                "title_i18n": {"en": "Conference Sequence", "ja": "回次"},
                                "title_i18n_temp": {
                                    "en": "Conference Sequence",
                                    "ja": "回次",
                                },
                                "type": "string",
                            },
                            "subitem_1599711660052": {
                                "format": "array",
                                "items": {
                                    "format": "object",
                                    "properties": {
                                        "subitem_1599711680082": {
                                            "format": "text",
                                            "title": "Conference Sponsor",
                                            "title_i18n": {
                                                "en": "Conference Sponsor",
                                                "ja": "主催機関",
                                            },
                                            "title_i18n_temp": {
                                                "en": "Conference Sponsor",
                                                "ja": "主催機関",
                                            },
                                            "type": "string",
                                        },
                                        "subitem_1599711686511": {
                                            "currentEnum": [
                                                "ja",
                                                "en",
                                                "fr",
                                                "it",
                                                "de",
                                                "es",
                                                "zh-cn",
                                                "zh-tw",
                                                "ru",
                                                "la",
                                                "ms",
                                                "eo",
                                                "ar",
                                                "el",
                                                "ko",
                                            ],
                                            "enum": [
                                                None,
                                                "ja",
                                                "en",
                                                "fr",
                                                "it",
                                                "de",
                                                "es",
                                                "zh-cn",
                                                "zh-tw",
                                                "ru",
                                                "la",
                                                "ms",
                                                "eo",
                                                "ar",
                                                "el",
                                                "ko",
                                            ],
                                            "format": "select",
                                            "title": "Language",
                                            "type": ["null", "string"],
                                        },
                                    },
                                    "type": "object",
                                },
                                "title": "Conference Sponsor",
                                "type": "array",
                            },
                            "subitem_1599711699392": {
                                "format": "object",
                                "properties": {
                                    "subitem_1599711704251": {
                                        "format": "text",
                                        "title": "Conference Date",
                                        "title_i18n": {
                                            "en": "Conference Date",
                                            "ja": "開催期間",
                                        },
                                        "title_i18n_temp": {
                                            "en": "Conference Date",
                                            "ja": "開催期間",
                                        },
                                        "type": "string",
                                    },
                                    "subitem_1599711712451": {
                                        "format": "text",
                                        "title": "Start Day",
                                        "title_i18n": {"en": "Start Day", "ja": "開始日"},
                                        "title_i18n_temp": {"en": "Start Day", "ja": "開始日"},
                                        "type": "string",
                                    },
                                    "subitem_1599711727603": {
                                        "format": "text",
                                        "title": "Start Month",
                                        "title_i18n": {"en": "Start Month", "ja": "開始月"},
                                        "title_i18n_temp": {
                                            "en": "Start Month",
                                            "ja": "開始月",
                                        },
                                        "type": "string",
                                    },
                                    "subitem_1599711731891": {
                                        "format": "text",
                                        "title": "Start Year",
                                        "title_i18n": {"en": "Start Year", "ja": "開始年"},
                                        "title_i18n_temp": {
                                            "en": "Start Year",
                                            "ja": "開始年",
                                        },
                                        "type": "string",
                                    },
                                    "subitem_1599711735410": {
                                        "format": "text",
                                        "title": "End Day",
                                        "title_i18n": {"en": "End Day", "ja": "終了日"},
                                        "title_i18n_temp": {"en": "End Day", "ja": "終了日"},
                                        "type": "string",
                                    },
                                    "subitem_1599711739022": {
                                        "format": "text",
                                        "title": "End Month",
                                        "title_i18n": {"en": "End Month", "ja": "終了月"},
                                        "title_i18n_temp": {"en": "End Month", "ja": "終了月"},
                                        "type": "string",
                                    },
                                    "subitem_1599711743722": {
                                        "format": "text",
                                        "title": "End Year",
                                        "title_i18n": {"en": "End Year", "ja": "終了年"},
                                        "title_i18n_temp": {"en": "End Year", "ja": "終了年"},
                                        "type": "string",
                                    },
                                    "subitem_1599711745532": {
                                        "currentEnum": [
                                            "ja",
                                            "en",
                                            "fr",
                                            "it",
                                            "de",
                                            "es",
                                            "zh-cn",
                                            "zh-tw",
                                            "ru",
                                            "la",
                                            "ms",
                                            "eo",
                                            "ar",
                                            "el",
                                            "ko",
                                        ],
                                        "enum": [
                                            None,
                                            "ja",
                                            "en",
                                            "fr",
                                            "it",
                                            "de",
                                            "es",
                                            "zh-cn",
                                            "zh-tw",
                                            "ru",
                                            "la",
                                            "ms",
                                            "eo",
                                            "ar",
                                            "el",
                                            "ko",
                                        ],
                                        "format": "select",
                                        "title": "Language",
                                        "type": ["null", "string"],
                                    },
                                },
                                "title": "Conference Date",
                                "type": "object",
                            },
                            "subitem_1599711758470": {
                                "format": "array",
                                "items": {
                                    "format": "object",
                                    "properties": {
                                        "subitem_1599711769260": {
                                            "format": "text",
                                            "title": "Conference Venue",
                                            "title_i18n": {
                                                "en": "Conference Venue",
                                                "ja": "開催会場",
                                            },
                                            "title_i18n_temp": {
                                                "en": "Conference Venue",
                                                "ja": "開催会場",
                                            },
                                            "type": "string",
                                        },
                                        "subitem_1599711775943": {
                                            "currentEnum": [
                                                "ja",
                                                "en",
                                                "fr",
                                                "it",
                                                "de",
                                                "es",
                                                "zh-cn",
                                                "zh-tw",
                                                "ru",
                                                "la",
                                                "ms",
                                                "eo",
                                                "ar",
                                                "el",
                                                "ko",
                                            ],
                                            "enum": [
                                                None,
                                                "ja",
                                                "en",
                                                "fr",
                                                "it",
                                                "de",
                                                "es",
                                                "zh-cn",
                                                "zh-tw",
                                                "ru",
                                                "la",
                                                "ms",
                                                "eo",
                                                "ar",
                                                "el",
                                                "ko",
                                            ],
                                            "format": "select",
                                            "title": "Language",
                                            "type": ["null", "string"],
                                        },
                                    },
                                    "type": "object",
                                },
                                "title": "Conference Venue",
                                "type": "array",
                            },
                            "subitem_1599711788485": {
                                "format": "array",
                                "items": {
                                    "format": "object",
                                    "properties": {
                                        "subitem_1599711798761": {
                                            "format": "text",
                                            "title": "Conference Place",
                                            "title_i18n": {
                                                "en": "Conference Place",
                                                "ja": "開催地",
                                            },
                                            "title_i18n_temp": {
                                                "en": "Conference Place",
                                                "ja": "開催地",
                                            },
                                            "type": "string",
                                        },
                                        "subitem_1599711803382": {
                                            "currentEnum": [
                                                "ja",
                                                "en",
                                                "fr",
                                                "it",
                                                "de",
                                                "es",
                                                "zh-cn",
                                                "zh-tw",
                                                "ru",
                                                "la",
                                                "ms",
                                                "eo",
                                                "ar",
                                                "el",
                                                "ko",
                                            ],
                                            "enum": [
                                                None,
                                                "ja",
                                                "en",
                                                "fr",
                                                "it",
                                                "de",
                                                "es",
                                                "zh-cn",
                                                "zh-tw",
                                                "ru",
                                                "la",
                                                "ms",
                                                "eo",
                                                "ar",
                                                "el",
                                                "ko",
                                            ],
                                            "format": "select",
                                            "title": "Language",
                                            "type": ["null", "string"],
                                        },
                                    },
                                    "type": "object",
                                },
                                "title": "Conference Place",
                                "type": "array",
                            },
                            "subitem_1599711813532": {
                                "currentEnum": [
                                    "JPN",
                                    "ABW",
                                    "AFG",
                                    "AGO",
                                    "AIA",
                                    "ALA",
                                    "ALB",
                                    "AND",
                                    "ARE",
                                    "ARG",
                                    "ARM",
                                    "ASM",
                                    "ATA",
                                    "ATF",
                                    "ATG",
                                    "AUS",
                                    "AUT",
                                    "AZE",
                                    "BDI",
                                    "BEL",
                                    "BEN",
                                    "BES",
                                    "BFA",
                                    "BGD",
                                    "BGR",
                                    "BHR",
                                    "BHS",
                                    "BIH",
                                    "BLM",
                                    "BLR",
                                    "BLZ",
                                    "BMU",
                                    "BOL",
                                    "BRA",
                                    "BRB",
                                    "BRN",
                                    "BTN",
                                    "BVT",
                                    "BWA",
                                    "CAF",
                                    "CAN",
                                    "CCK",
                                    "CHE",
                                    "CHL",
                                    "CHN",
                                    "CIV",
                                    "CMR",
                                    "COD",
                                    "COG",
                                    "COK",
                                    "COL",
                                    "COM",
                                    "CPV",
                                    "CRI",
                                    "CUB",
                                    "CUW",
                                    "CXR",
                                    "CYM",
                                    "CYP",
                                    "CZE",
                                    "DEU",
                                    "DJI",
                                    "DMA",
                                    "DNK",
                                    "DOM",
                                    "DZA",
                                    "ECU",
                                    "EGY",
                                    "ERI",
                                    "ESH",
                                    "ESP",
                                    "EST",
                                    "ETH",
                                    "FIN",
                                    "FJI",
                                    "FLK",
                                    "FRA",
                                    "FRO",
                                    "FSM",
                                    "GAB",
                                    "GBR",
                                    "GEO",
                                    "GGY",
                                    "GHA",
                                    "GIB",
                                    "GIN",
                                    "GLP",
                                    "GMB",
                                    "GNB",
                                    "GNQ",
                                    "GRC",
                                    "GRD",
                                    "GRL",
                                    "GTM",
                                    "GUF",
                                    "GUM",
                                    "GUY",
                                    "HKG",
                                    "HMD",
                                    "HND",
                                    "HRV",
                                    "HTI",
                                    "HUN",
                                    "IDN",
                                    "IMN",
                                    "IND",
                                    "IOT",
                                    "IRL",
                                    "IRN",
                                    "IRQ",
                                    "ISL",
                                    "ISR",
                                    "ITA",
                                    "JAM",
                                    "JEY",
                                    "JOR",
                                    "KAZ",
                                    "KEN",
                                    "KGZ",
                                    "KHM",
                                    "KIR",
                                    "KNA",
                                    "KOR",
                                    "KWT",
                                    "LAO",
                                    "LBN",
                                    "LBR",
                                    "LBY",
                                    "LCA",
                                    "LIE",
                                    "LKA",
                                    "LSO",
                                    "LTU",
                                    "LUX",
                                    "LVA",
                                    "MAC",
                                    "MAF",
                                    "MAR",
                                    "MCO",
                                    "MDA",
                                    "MDG",
                                    "MDV",
                                    "MEX",
                                    "MHL",
                                    "MKD",
                                    "MLI",
                                    "MLT",
                                    "MMR",
                                    "MNE",
                                    "MNG",
                                    "MNP",
                                    "MOZ",
                                    "MRT",
                                    "MSR",
                                    "MTQ",
                                    "MUS",
                                    "MWI",
                                    "MYS",
                                    "MYT",
                                    "NAM",
                                    "NCL",
                                    "NER",
                                    "NFK",
                                    "NGA",
                                    "NIC",
                                    "NIU",
                                    "NLD",
                                    "NOR",
                                    "NPL",
                                    "NRU",
                                    "NZL",
                                    "OMN",
                                    "PAK",
                                    "PAN",
                                    "PCN",
                                    "PER",
                                    "PHL",
                                    "PLW",
                                    "PNG",
                                    "POL",
                                    "PRI",
                                    "PRK",
                                    "PRT",
                                    "PRY",
                                    "PSE",
                                    "PYF",
                                    "QAT",
                                    "REU",
                                    "ROU",
                                    "RUS",
                                    "RWA",
                                    "SAU",
                                    "SDN",
                                    "SEN",
                                    "SGP",
                                    "SGS",
                                    "SHN",
                                    "SJM",
                                    "SLB",
                                    "SLE",
                                    "SLV",
                                    "SMR",
                                    "SOM",
                                    "SPM",
                                    "SRB",
                                    "SSD",
                                    "STP",
                                    "SUR",
                                    "SVK",
                                    "SVN",
                                    "SWE",
                                    "SWZ",
                                    "SXM",
                                    "SYC",
                                    "SYR",
                                    "TCA",
                                    "TCD",
                                    "TGO",
                                    "THA",
                                    "TJK",
                                    "TKL",
                                    "TKM",
                                    "TLS",
                                    "TON",
                                    "TTO",
                                    "TUN",
                                    "TUR",
                                    "TUV",
                                    "TWN",
                                    "TZA",
                                    "UGA",
                                    "UKR",
                                    "UMI",
                                    "URY",
                                    "USA",
                                    "UZB",
                                    "VAT",
                                    "VCT",
                                    "VEN",
                                    "VGB",
                                    "VIR",
                                    "VNM",
                                    "VUT",
                                    "WLF",
                                    "WSM",
                                    "YEM",
                                    "ZAF",
                                    "ZMB",
                                    "ZWE",
                                ],
                                "enum": [
                                    None,
                                    "JPN",
                                    "ABW",
                                    "AFG",
                                    "AGO",
                                    "AIA",
                                    "ALA",
                                    "ALB",
                                    "AND",
                                    "ARE",
                                    "ARG",
                                    "ARM",
                                    "ASM",
                                    "ATA",
                                    "ATF",
                                    "ATG",
                                    "AUS",
                                    "AUT",
                                    "AZE",
                                    "BDI",
                                    "BEL",
                                    "BEN",
                                    "BES",
                                    "BFA",
                                    "BGD",
                                    "BGR",
                                    "BHR",
                                    "BHS",
                                    "BIH",
                                    "BLM",
                                    "BLR",
                                    "BLZ",
                                    "BMU",
                                    "BOL",
                                    "BRA",
                                    "BRB",
                                    "BRN",
                                    "BTN",
                                    "BVT",
                                    "BWA",
                                    "CAF",
                                    "CAN",
                                    "CCK",
                                    "CHE",
                                    "CHL",
                                    "CHN",
                                    "CIV",
                                    "CMR",
                                    "COD",
                                    "COG",
                                    "COK",
                                    "COL",
                                    "COM",
                                    "CPV",
                                    "CRI",
                                    "CUB",
                                    "CUW",
                                    "CXR",
                                    "CYM",
                                    "CYP",
                                    "CZE",
                                    "DEU",
                                    "DJI",
                                    "DMA",
                                    "DNK",
                                    "DOM",
                                    "DZA",
                                    "ECU",
                                    "EGY",
                                    "ERI",
                                    "ESH",
                                    "ESP",
                                    "EST",
                                    "ETH",
                                    "FIN",
                                    "FJI",
                                    "FLK",
                                    "FRA",
                                    "FRO",
                                    "FSM",
                                    "GAB",
                                    "GBR",
                                    "GEO",
                                    "GGY",
                                    "GHA",
                                    "GIB",
                                    "GIN",
                                    "GLP",
                                    "GMB",
                                    "GNB",
                                    "GNQ",
                                    "GRC",
                                    "GRD",
                                    "GRL",
                                    "GTM",
                                    "GUF",
                                    "GUM",
                                    "GUY",
                                    "HKG",
                                    "HMD",
                                    "HND",
                                    "HRV",
                                    "HTI",
                                    "HUN",
                                    "IDN",
                                    "IMN",
                                    "IND",
                                    "IOT",
                                    "IRL",
                                    "IRN",
                                    "IRQ",
                                    "ISL",
                                    "ISR",
                                    "ITA",
                                    "JAM",
                                    "JEY",
                                    "JOR",
                                    "KAZ",
                                    "KEN",
                                    "KGZ",
                                    "KHM",
                                    "KIR",
                                    "KNA",
                                    "KOR",
                                    "KWT",
                                    "LAO",
                                    "LBN",
                                    "LBR",
                                    "LBY",
                                    "LCA",
                                    "LIE",
                                    "LKA",
                                    "LSO",
                                    "LTU",
                                    "LUX",
                                    "LVA",
                                    "MAC",
                                    "MAF",
                                    "MAR",
                                    "MCO",
                                    "MDA",
                                    "MDG",
                                    "MDV",
                                    "MEX",
                                    "MHL",
                                    "MKD",
                                    "MLI",
                                    "MLT",
                                    "MMR",
                                    "MNE",
                                    "MNG",
                                    "MNP",
                                    "MOZ",
                                    "MRT",
                                    "MSR",
                                    "MTQ",
                                    "MUS",
                                    "MWI",
                                    "MYS",
                                    "MYT",
                                    "NAM",
                                    "NCL",
                                    "NER",
                                    "NFK",
                                    "NGA",
                                    "NIC",
                                    "NIU",
                                    "NLD",
                                    "NOR",
                                    "NPL",
                                    "NRU",
                                    "NZL",
                                    "OMN",
                                    "PAK",
                                    "PAN",
                                    "PCN",
                                    "PER",
                                    "PHL",
                                    "PLW",
                                    "PNG",
                                    "POL",
                                    "PRI",
                                    "PRK",
                                    "PRT",
                                    "PRY",
                                    "PSE",
                                    "PYF",
                                    "QAT",
                                    "REU",
                                    "ROU",
                                    "RUS",
                                    "RWA",
                                    "SAU",
                                    "SDN",
                                    "SEN",
                                    "SGP",
                                    "SGS",
                                    "SHN",
                                    "SJM",
                                    "SLB",
                                    "SLE",
                                    "SLV",
                                    "SMR",
                                    "SOM",
                                    "SPM",
                                    "SRB",
                                    "SSD",
                                    "STP",
                                    "SUR",
                                    "SVK",
                                    "SVN",
                                    "SWE",
                                    "SWZ",
                                    "SXM",
                                    "SYC",
                                    "SYR",
                                    "TCA",
                                    "TCD",
                                    "TGO",
                                    "THA",
                                    "TJK",
                                    "TKL",
                                    "TKM",
                                    "TLS",
                                    "TON",
                                    "TTO",
                                    "TUN",
                                    "TUR",
                                    "TUV",
                                    "TWN",
                                    "TZA",
                                    "UGA",
                                    "UKR",
                                    "UMI",
                                    "URY",
                                    "USA",
                                    "UZB",
                                    "VAT",
                                    "VCT",
                                    "VEN",
                                    "VGB",
                                    "VIR",
                                    "VNM",
                                    "VUT",
                                    "WLF",
                                    "WSM",
                                    "YEM",
                                    "ZAF",
                                    "ZMB",
                                    "ZWE",
                                ],
                                "format": "select",
                                "title": "Conference Country",
                                "type": ["null", "string"],
                            },
                        },
                        "type": "object",
                    },
                    "maxItems": 9999,
                    "minItems": 1,
                    "title": "Conference",
                    "type": "array",
                },
                "item_1617258105262": {
                    "properties": {
                        "resourcetype": {
                            "currentEnum": [
                                "conference paper",
                                "data paper",
                                "departmental bulletin paper",
                                "editorial",
                                "journal article",
                                "newspaper",
                                "periodical",
                                "review article",
                                "software paper",
                                "article",
                                "book",
                                "book part",
                                "cartographic material",
                                "map",
                                "conference object",
                                "conference proceedings",
                                "conference poster",
                                "dataset",
                                "interview",
                                "image",
                                "still image",
                                "moving image",
                                "video",
                                "lecture",
                                "patent",
                                "internal report",
                                "report",
                                "research report",
                                "technical report",
                                "policy report",
                                "report part",
                                "working paper",
                                "data management plan",
                                "sound",
                                "thesis",
                                "bachelor thesis",
                                "master thesis",
                                "doctoral thesis",
                                "interactive resource",
                                "learning object",
                                "manuscript",
                                "musical notation",
                                "research proposal",
                                "software",
                                "technical documentation",
                                "workflow",
                                "other",
                            ],
                            "enum": [
                                None,
                                "conference paper",
                                "data paper",
                                "departmental bulletin paper",
                                "editorial",
                                "journal article",
                                "newspaper",
                                "periodical",
                                "review article",
                                "software paper",
                                "article",
                                "book",
                                "book part",
                                "cartographic material",
                                "map",
                                "conference object",
                                "conference proceedings",
                                "conference poster",
                                "dataset",
                                "interview",
                                "image",
                                "still image",
                                "moving image",
                                "video",
                                "lecture",
                                "patent",
                                "internal report",
                                "report",
                                "research report",
                                "technical report",
                                "policy report",
                                "report part",
                                "working paper",
                                "data management plan",
                                "sound",
                                "thesis",
                                "bachelor thesis",
                                "master thesis",
                                "doctoral thesis",
                                "interactive resource",
                                "learning object",
                                "manuscript",
                                "musical notation",
                                "research proposal",
                                "software",
                                "technical documentation",
                                "workflow",
                                "other",
                            ],
                            "format": "select",
                            "title": "資源タイプ",
                            "type": ["null", "string"],
                        },
                        "resourceuri": {
                            "format": "text",
                            "title": "資源タイプ識別子",
                            "title_i18n": {
                                "en": "Resource Type Identifier",
                                "ja": "資源タイプ識別子",
                            },
                            "title_i18n_temp": {
                                "en": "Resource Type Identifier",
                                "ja": "資源タイプ識別子",
                            },
                            "type": "string",
                        },
                    },
                    "required": ["resourcetype", "resourceuri"],
                    "title": "Resource Type",
                    "type": "object",
                },
                "item_1617265215918": {
                    "properties": {
                        "subitem_1522305645492": {
                            "currentEnum": [
                                "AO",
                                "SMUR",
                                "AM",
                                "P",
                                "VoR",
                                "CVoR",
                                "EVoR",
                                "NA",
                            ],
                            "enum": [
                                None,
                                "AO",
                                "SMUR",
                                "AM",
                                "P",
                                "VoR",
                                "CVoR",
                                "EVoR",
                                "NA",
                            ],
                            "format": "select",
                            "title": "出版タイプ",
                            "type": ["null", "string"],
                        },
                        "subitem_1600292170262": {
                            "format": "text",
                            "title": "出版タイプResource",
                            "title_i18n": {
                                "en": "Version Type Resource",
                                "ja": "出版タイプResource",
                            },
                            "title_i18n_temp": {
                                "en": "Version Type Resource",
                                "ja": "出版タイプResource",
                            },
                            "type": "string",
                        },
                    },
                    "title": "Version Type",
                    "type": "object",
                },
                "item_1617349709064": {
                    "items": {
                        "properties": {
                            "contributorAffiliations": {
                                "format": "array",
                                "items": {
                                    "format": "object",
                                    "properties": {
                                        "contributorAffiliationNameIdentifiers": {
                                            "format": "array",
                                            "items": {
                                                "format": "object",
                                                "properties": {
                                                    "contributorAffiliationNameIdentifier": {
                                                        "format": "text",
                                                        "title": "所属機関識別子",
                                                        "title_i18n": {
                                                            "en": "Affiliation Name Identifier",
                                                            "ja": "所属機関識別子",
                                                        },
                                                        "title_i18n_temp": {
                                                            "en": "Affiliation Name Identifier",
                                                            "ja": "所属機関識別子",
                                                        },
                                                        "type": "string",
                                                    },
                                                    "contributorAffiliationScheme": {
                                                        "currentEnum": [
                                                            "kakenhi",
                                                            "ISNI",
                                                            "Ringgold",
                                                            "GRID",
                                                        ],
                                                        "enum": [
                                                            None,
                                                            "kakenhi",
                                                            "ISNI",
                                                            "Ringgold",
                                                            "GRID",
                                                        ],
                                                        "format": "select",
                                                        "title": "所属機関識別子スキーマ",
                                                        "type": ["null", "string"],
                                                    },
                                                    "contributorAffiliationURI": {
                                                        "format": "text",
                                                        "title": "所属機関識別子URI",
                                                        "title_i18n": {
                                                            "en": "Affiliation Name Identifier URI",
                                                            "ja": "所属機関識別子URI",
                                                        },
                                                        "title_i18n_temp": {
                                                            "en": "Affiliation Name Identifier URI",
                                                            "ja": "所属機関識別子URI",
                                                        },
                                                        "type": "string",
                                                    },
                                                },
                                                "type": "object",
                                            },
                                            "title": "所属機関識別子",
                                            "type": "array",
                                        },
                                        "contributorAffiliationNames": {
                                            "format": "array",
                                            "items": {
                                                "format": "object",
                                                "properties": {
                                                    "contributorAffiliationName": {
                                                        "format": "text",
                                                        "title": "所属機関名",
                                                        "title_i18n": {
                                                            "en": "Affiliation Name",
                                                            "ja": "所属機関名",
                                                        },
                                                        "title_i18n_temp": {
                                                            "en": "Affiliation Name",
                                                            "ja": "所属機関名",
                                                        },
                                                        "type": "string",
                                                    },
                                                    "contributorAffiliationNameLang": {
                                                        "currentEnum": [
                                                            "ja",
                                                            "ja-Kana",
                                                            "en",
                                                            "fr",
                                                            "it",
                                                            "de",
                                                            "es",
                                                            "zh-cn",
                                                            "zh-tw",
                                                            "ru",
                                                            "la",
                                                            "ms",
                                                            "eo",
                                                            "ar",
                                                            "el",
                                                            "ko",
                                                        ],
                                                        "enum": [
                                                            None,
                                                            "ja",
                                                            "ja-Kana",
                                                            "en",
                                                            "fr",
                                                            "it",
                                                            "de",
                                                            "es",
                                                            "zh-cn",
                                                            "zh-tw",
                                                            "ru",
                                                            "la",
                                                            "ms",
                                                            "eo",
                                                            "ar",
                                                            "el",
                                                            "ko",
                                                        ],
                                                        "format": "select",
                                                        "title": "言語",
                                                        "type": ["null", "string"],
                                                    },
                                                },
                                                "type": "object",
                                            },
                                            "title": "所属機関識別子",
                                            "type": "array",
                                        },
                                    },
                                    "type": "object",
                                },
                                "title": "寄与者所属",
                                "type": "array",
                            },
                            "contributorAlternatives": {
                                "format": "array",
                                "items": {
                                    "format": "object",
                                    "properties": {
                                        "contributorAlternative": {
                                            "format": "text",
                                            "title": "別名",
                                            "title_i18n": {
                                                "en": "Alternative Name",
                                                "ja": "別名",
                                            },
                                            "title_i18n_temp": {
                                                "en": "Alternative Name",
                                                "ja": "別名",
                                            },
                                            "type": "string",
                                        },
                                        "contributorAlternativeLang": {
                                            "currentEnum": [
                                                "ja",
                                                "ja-Kana",
                                                "en",
                                                "fr",
                                                "it",
                                                "de",
                                                "es",
                                                "zh-cn",
                                                "zh-tw",
                                                "ru",
                                                "la",
                                                "ms",
                                                "eo",
                                                "ar",
                                                "el",
                                                "ko",
                                            ],
                                            "enum": [
                                                None,
                                                "ja",
                                                "ja-Kana",
                                                "en",
                                                "fr",
                                                "it",
                                                "de",
                                                "es",
                                                "zh-cn",
                                                "zh-tw",
                                                "ru",
                                                "la",
                                                "ms",
                                                "eo",
                                                "ar",
                                                "el",
                                                "ko",
                                            ],
                                            "format": "select",
                                            "title": "言語",
                                            "type": ["null", "string"],
                                        },
                                    },
                                    "type": "object",
                                },
                                "title": "寄与者別名",
                                "type": "array",
                            },
                            "contributorMails": {
                                "format": "array",
                                "items": {
                                    "format": "object",
                                    "properties": {
                                        "contributorMail": {
                                            "format": "text",
                                            "title": "メールアドレス",
                                            "title_i18n": {
                                                "en": "Email Address",
                                                "ja": "メールアドレス",
                                            },
                                            "title_i18n_temp": {
                                                "en": "Email Address",
                                                "ja": "メールアドレス",
                                            },
                                            "type": "string",
                                        }
                                    },
                                    "type": "object",
                                },
                                "title": "寄与者メールアドレス",
                                "type": "array",
                            },
                            "contributorNames": {
                                "format": "array",
                                "items": {
                                    "format": "object",
                                    "properties": {
                                        "contributorName": {
                                            "format": "text",
                                            "title": "姓名",
                                            "title_i18n": {"en": "Name", "ja": "姓名"},
                                            "title_i18n_temp": {"en": "Name", "ja": "姓名"},
                                            "type": "string",
                                        },
                                        "lang": {
                                            "currentEnum": [
                                                "ja",
                                                "ja-Kana",
                                                "en",
                                                "fr",
                                                "it",
                                                "de",
                                                "es",
                                                "zh-cn",
                                                "zh-tw",
                                                "ru",
                                                "la",
                                                "ms",
                                                "eo",
                                                "ar",
                                                "el",
                                                "ko",
                                            ],
                                            "enum": [
                                                None,
                                                "ja",
                                                "ja-Kana",
                                                "en",
                                                "fr",
                                                "it",
                                                "de",
                                                "es",
                                                "zh-cn",
                                                "zh-tw",
                                                "ru",
                                                "la",
                                                "ms",
                                                "eo",
                                                "ar",
                                                "el",
                                                "ko",
                                            ],
                                            "format": "select",
                                            "title": "言語",
                                            "type": ["null", "string"],
                                        },
                                    },
                                    "type": "object",
                                },
                                "title": "寄与者姓名",
                                "type": "array",
                            },
                            "contributorType": {
                                "currentEnum": [
                                    "ContactPerson",
                                    "DataCollector",
                                    "DataCurator",
                                    "DataManager",
                                    "Distributor",
                                    "Editor",
                                    "HostingInstitution",
                                    "Producer",
                                    "ProjectLeader",
                                    "ProjectManager",
                                    "ProjectMember",
                                    "RelatedPerson",
                                    "Researcher",
                                    "ResearchGroup",
                                    "Sponsor",
                                    "Supervisor",
                                    "WorkPackageLeader",
                                    "Other",
                                ],
                                "enum": [
                                    None,
                                    "ContactPerson",
                                    "DataCollector",
                                    "DataCurator",
                                    "DataManager",
                                    "Distributor",
                                    "Editor",
                                    "HostingInstitution",
                                    "Producer",
                                    "ProjectLeader",
                                    "ProjectManager",
                                    "ProjectMember",
                                    "RelatedPerson",
                                    "Researcher",
                                    "ResearchGroup",
                                    "Sponsor",
                                    "Supervisor",
                                    "WorkPackageLeader",
                                    "Other",
                                ],
                                "format": "select",
                                "title": "寄与者タイプ",
                                "type": ["null", "string"],
                            },
                            "familyNames": {
                                "format": "array",
                                "items": {
                                    "format": "object",
                                    "properties": {
                                        "familyName": {
                                            "format": "text",
                                            "title": "姓",
                                            "title_i18n": {"en": "Family Name", "ja": "姓"},
                                            "title_i18n_temp": {
                                                "en": "Family Name",
                                                "ja": "姓",
                                            },
                                            "type": "string",
                                        },
                                        "familyNameLang": {
                                            "currentEnum": [
                                                "ja",
                                                "ja-Kana",
                                                "en",
                                                "fr",
                                                "it",
                                                "de",
                                                "es",
                                                "zh-cn",
                                                "zh-tw",
                                                "ru",
                                                "la",
                                                "ms",
                                                "eo",
                                                "ar",
                                                "el",
                                                "ko",
                                            ],
                                            "enum": [
                                                None,
                                                "ja",
                                                "ja-Kana",
                                                "en",
                                                "fr",
                                                "it",
                                                "de",
                                                "es",
                                                "zh-cn",
                                                "zh-tw",
                                                "ru",
                                                "la",
                                                "ms",
                                                "eo",
                                                "ar",
                                                "el",
                                                "ko",
                                            ],
                                            "format": "select",
                                            "title": "言語",
                                            "type": ["null", "string"],
                                        },
                                    },
                                    "type": "object",
                                },
                                "title": "寄与者姓",
                                "type": "array",
                            },
                            "givenNames": {
                                "format": "array",
                                "items": {
                                    "format": "object",
                                    "properties": {
                                        "givenName": {
                                            "format": "text",
                                            "title": "名",
                                            "title_i18n": {"en": "Given Name", "ja": "名"},
                                            "title_i18n_temp": {
                                                "en": "Given Name",
                                                "ja": "名",
                                            },
                                            "type": "string",
                                        },
                                        "givenNameLang": {
                                            "currentEnum": [
                                                "ja",
                                                "ja-Kana",
                                                "en",
                                                "fr",
                                                "it",
                                                "de",
                                                "es",
                                                "zh-cn",
                                                "zh-tw",
                                                "ru",
                                                "la",
                                                "ms",
                                                "eo",
                                                "ar",
                                                "el",
                                                "ko",
                                            ],
                                            "enum": [
                                                None,
                                                "ja",
                                                "ja-Kana",
                                                "en",
                                                "fr",
                                                "it",
                                                "de",
                                                "es",
                                                "zh-cn",
                                                "zh-tw",
                                                "ru",
                                                "la",
                                                "ms",
                                                "eo",
                                                "ar",
                                                "el",
                                                "ko",
                                            ],
                                            "format": "select",
                                            "title": "言語",
                                            "type": ["null", "string"],
                                        },
                                    },
                                    "type": "object",
                                },
                                "title": "寄与者名",
                                "type": "array",
                            },
                            "nameIdentifiers": {
                                "format": "array",
                                "items": {
                                    "format": "object",
                                    "properties": {
                                        "nameIdentifier": {
                                            "format": "text",
                                            "title": "寄与者識別子",
                                            "title_i18n": {
                                                "en": "Contributor Identifier",
                                                "ja": "寄与者識別子",
                                            },
                                            "title_i18n_temp": {
                                                "en": "Contributor Identifier",
                                                "ja": "寄与者識別子",
                                            },
                                            "type": "string",
                                        },
                                        "nameIdentifierScheme": {
                                            "currentEnum": [],
                                            "format": "select",
                                            "title": "寄与者識別子Scheme",
                                            "type": ["null", "string"],
                                        },
                                        "nameIdentifierURI": {
                                            "format": "text",
                                            "title": "寄与者識別子URI",
                                            "title_i18n": {
                                                "en": "Contributor Identifier URI",
                                                "ja": "寄与者識別子URI",
                                            },
                                            "title_i18n_temp": {
                                                "en": "Contributor Identifier URI",
                                                "ja": "寄与者識別子URI",
                                            },
                                            "type": "string",
                                        },
                                    },
                                    "type": "object",
                                },
                                "title": "寄与者識別子",
                                "type": "array",
                            },
                        },
                        "type": "object",
                    },
                    "maxItems": 9999,
                    "minItems": 1,
                    "title": "Contributor",
                    "type": "array",
                },
                "item_1617349808926": {
                    "properties": {
                        "subitem_1523263171732": {
                            "format": "text",
                            "title": "バージョン情報",
                            "title_i18n": {"en": "Version", "ja": "バージョン情報"},
                            "title_i18n_temp": {"en": "Version", "ja": "バージョン情報"},
                            "type": "string",
                        }
                    },
                    "title": "Version",
                    "type": "object",
                },
                "item_1617351524846": {
                    "properties": {
                        "subitem_1523260933860": {
                            "currentEnum": [
                                "Paid",
                                "Fully waived",
                                "Not required",
                                "Partially waived",
                                "Not charged",
                                "Unknown",
                            ],
                            "enum": [
                                None,
                                "Paid",
                                "Fully waived",
                                "Not required",
                                "Partially waived",
                                "Not charged",
                                "Unknown",
                            ],
                            "format": "select",
                            "title": "APC",
                            "type": ["null", "string"],
                        }
                    },
                    "title": "APC",
                    "type": "object",
                },
                "item_1617353299429": {
                    "items": {
                        "properties": {
                            "subitem_1522306207484": {
                                "currentEnum": [
                                    "isVersionOf",
                                    "hasVersion",
                                    "isPartOf",
                                    "hasPart",
                                    "isReferencedBy",
                                    "references",
                                    "isFormatOf",
                                    "hasFormat",
                                    "isReplacedBy",
                                    "replaces",
                                    "isRequiredBy",
                                    "requires",
                                    "isSupplementTo",
                                    "isSupplementedBy",
                                    "isIdenticalTo",
                                    "isDerivedFrom",
                                    "isSourceOf",
                                ],
                                "enum": [
                                    None,
                                    "isVersionOf",
                                    "hasVersion",
                                    "isPartOf",
                                    "hasPart",
                                    "isReferencedBy",
                                    "references",
                                    "isFormatOf",
                                    "hasFormat",
                                    "isReplacedBy",
                                    "replaces",
                                    "isRequiredBy",
                                    "requires",
                                    "isSupplementTo",
                                    "isSupplementedBy",
                                    "isIdenticalTo",
                                    "isDerivedFrom",
                                    "isSourceOf",
                                ],
                                "format": "select",
                                "title": "関連タイプ",
                                "type": ["null", "string"],
                            },
                            "subitem_1522306287251": {
                                "format": "object",
                                "properties": {
                                    "subitem_1522306382014": {
                                        "currentEnum": [
                                            "ARK",
                                            "arXiv",
                                            "DOI",
                                            "HDL",
                                            "ICHUSHI",
                                            "ISBN",
                                            "J-GLOBAL",
                                            "Local",
                                            "PISSN",
                                            "EISSN",
                                            "ISSN（非推奨）",
                                            "NAID",
                                            "NCID",
                                            "PMID",
                                            "PURL",
                                            "SCOPUS",
                                            "URI",
                                            "WOS",
                                        ],
                                        "enum": [
                                            None,
                                            "ARK",
                                            "arXiv",
                                            "DOI",
                                            "HDL",
                                            "ICHUSHI",
                                            "ISBN",
                                            "J-GLOBAL",
                                            "Local",
                                            "PISSN",
                                            "EISSN",
                                            "ISSN（非推奨）",
                                            "NAID",
                                            "NCID",
                                            "PMID",
                                            "PURL",
                                            "SCOPUS",
                                            "URI",
                                            "WOS",
                                        ],
                                        "format": "select",
                                        "title": "識別子タイプ",
                                        "type": ["null", "string"],
                                    },
                                    "subitem_1522306436033": {
                                        "format": "text",
                                        "title": "関連識別子",
                                        "title_i18n": {
                                            "en": "Relation Identifier",
                                            "ja": "関連識別子",
                                        },
                                        "title_i18n_temp": {
                                            "en": "Relation Identifier",
                                            "ja": "関連識別子",
                                        },
                                        "type": "string",
                                    },
                                },
                                "title": "関連識別子",
                                "type": "object",
                            },
                            "subitem_1523320863692": {
                                "format": "array",
                                "items": {
                                    "format": "object",
                                    "properties": {
                                        "subitem_1523320867455": {
                                            "currentEnum": [
                                                "ja",
                                                "en",
                                                "fr",
                                                "it",
                                                "de",
                                                "es",
                                                "zh-cn",
                                                "zh-tw",
                                                "ru",
                                                "la",
                                                "ms",
                                                "eo",
                                                "ar",
                                                "el",
                                                "ko",
                                            ],
                                            "enum": [
                                                None,
                                                "ja",
                                                "en",
                                                "fr",
                                                "it",
                                                "de",
                                                "es",
                                                "zh-cn",
                                                "zh-tw",
                                                "ru",
                                                "la",
                                                "ms",
                                                "eo",
                                                "ar",
                                                "el",
                                                "ko",
                                            ],
                                            "format": "select",
                                            "title": "言語",
                                            "type": ["null", "string"],
                                        },
                                        "subitem_1523320909613": {
                                            "format": "text",
                                            "title": "関連名称",
                                            "title_i18n": {
                                                "en": "Related Title",
                                                "ja": "関連名称",
                                            },
                                            "title_i18n_temp": {
                                                "en": "Related Title",
                                                "ja": "関連名称",
                                            },
                                            "type": "string",
                                        },
                                    },
                                    "type": "object",
                                },
                                "title": "関連名称",
                                "type": "array",
                            },
                        },
                        "type": "object",
                    },
                    "maxItems": 9999,
                    "minItems": 1,
                    "title": "Relation",
                    "type": "array",
                },
                "item_1617605131499": {
                    "items": {
                        "properties": {
                            "accessrole": {
                                "enum": [
                                    "open_access",
                                    "open_date",
                                    "open_login",
                                    "open_no",
                                ],
                                "format": "radios",
                                "title": "アクセス",
                                "type": ["null", "string"],
                            },
                            "date": {
                                "format": "array",
                                "items": {
                                    "format": "object",
                                    "properties": {
                                        "dateType": {
                                            "currentEnum": [],
                                            "format": "select",
                                            "title": "日付タイプ",
                                            "type": ["null", "string"],
                                        },
                                        "dateValue": {
                                            "format": "datetime",
                                            "title": "日付",
                                            "title_i18n": {"en": "", "ja": ""},
                                            "type": "string",
                                        },
                                    },
                                    "type": "object",
                                },
                                "title": "オープンアクセスの日付",
                                "type": "array",
                            },
                            "displaytype": {
                                "currentEnum": ["detail", "simple", "preview"],
                                "enum": [None, "detail", "simple", "preview"],
                                "format": "select",
                                "title": "表示形式",
                                "type": ["null", "string"],
                            },
                            "fileDate": {
                                "format": "array",
                                "items": {
                                    "format": "object",
                                    "properties": {
                                        "fileDateType": {
                                            "currentEnum": [
                                                "Accepted",
                                                "Collected",
                                                "Copyrighted",
                                                "Created",
                                                "Issued",
                                                "Submitted",
                                                "Updated",
                                                "Valid",
                                            ],
                                            "enum": [
                                                None,
                                                "Accepted",
                                                "Collected",
                                                "Copyrighted",
                                                "Created",
                                                "Issued",
                                                "Submitted",
                                                "Updated",
                                                "Valid",
                                            ],
                                            "format": "select",
                                            "title": "日付タイプ",
                                            "type": ["null", "string"],
                                        },
                                        "fileDateValue": {
                                            "format": "datetime",
                                            "title": "日付",
                                            "title_i18n": {"en": "Date", "ja": "日付"},
                                            "title_i18n_temp": {"en": "Date", "ja": "日付"},
                                            "type": "string",
                                        },
                                    },
                                    "type": "object",
                                },
                                "title": "日付",
                                "type": "array",
                            },
                            "filename": {
                                "format": "text",
                                "title": "表示名",
                                "title_i18n": {"en": "FileName", "ja": "表示名"},
                                "title_i18n_temp": {"en": "FileName", "ja": "表示名"},
                                "type": ["null", "string"],
                            },
                            "filesize": {
                                "format": "array",
                                "items": {
                                    "format": "object",
                                    "properties": {
                                        "value": {
                                            "format": "text",
                                            "title": "サイズ",
                                            "title_i18n": {"en": "Size", "ja": "サイズ"},
                                            "title_i18n_temp": {"en": "Size", "ja": "サイズ"},
                                            "type": "string",
                                        }
                                    },
                                    "type": "object",
                                },
                                "title": "サイズ",
                                "type": "array",
                            },
                            "format": {
                                "format": "text",
                                "title": "フォーマット",
                                "title_i18n": {"en": "Format", "ja": "フォーマット"},
                                "title_i18n_temp": {"en": "Format", "ja": "フォーマット"},
                                "type": "string",
                            },
                            "groups": {
                                "currentEnum": [],
                                "format": "select",
                                "title": "グループ",
                                "type": ["null", "string"],
                            },
                            "licensefree": {
                                "format": "textarea",
                                "title": "自由ライセンス",
                                "title_i18n": {"en": "自由ライセンス", "ja": "自由ライセンス"},
                                "type": "string",
                            },
                            "licensetype": {
                                "currentEnum": [],
                                "format": "select",
                                "title": "ライセンス",
                                "type": ["null", "string"],
                            },
                            "url": {
                                "format": "object",
                                "properties": {
                                    "label": {
                                        "format": "text",
                                        "title": "ラベル",
                                        "title_i18n": {"en": "Label", "ja": "ラベル"},
                                        "title_i18n_temp": {"en": "Label", "ja": "ラベル"},
                                        "type": "string",
                                    },
                                    "objectType": {
                                        "currentEnum": [
                                            "abstract",
                                            "summary",
                                            "fulltext",
                                            "thumbnail",
                                            "other",
                                        ],
                                        "enum": [
                                            None,
                                            "abstract",
                                            "summary",
                                            "fulltext",
                                            "thumbnail",
                                            "other",
                                        ],
                                        "format": "select",
                                        "title": "オブジェクトタイプ",
                                        "type": ["null", "string"],
                                    },
                                    "url": {
                                        "format": "text",
                                        "title": "本文URL",
                                        "title_i18n": {"en": "Text URL", "ja": "本文URL"},
                                        "title_i18n_temp": {
                                            "en": "Text URL",
                                            "ja": "本文URL",
                                        },
                                        "type": "string",
                                    },
                                },
                                "title": "本文URL",
                                "type": "object",
                            },
                            "version": {
                                "format": "text",
                                "title": "バージョン情報",
                                "title_i18n": {
                                    "en": "Version Information",
                                    "ja": "バージョン情報",
                                },
                                "title_i18n_temp": {
                                    "en": "Version Information",
                                    "ja": "バージョン情報",
                                },
                                "type": "string",
                            },
                        },
                        "type": "object",
                    },
                    "maxItems": 9999,
                    "minItems": 1,
                    "title": "File",
                    "type": "array",
                },
                "item_1617610673286": {
                    "items": {
                        "properties": {
                            "nameIdentifiers": {
                                "format": "array",
                                "items": {
                                    "format": "object",
                                    "properties": {
                                        "nameIdentifier": {
                                            "format": "text",
                                            "title": "権利者識別子",
                                            "title_i18n": {
                                                "en": "Right Holder Identifier",
                                                "ja": "権利者識別子",
                                            },
                                            "title_i18n_temp": {
                                                "en": "Right Holder Identifier",
                                                "ja": "権利者識別子",
                                            },
                                            "type": "string",
                                        },
                                        "nameIdentifierScheme": {
                                            "currentEnum": [],
                                            "format": "select",
                                            "title": "権利者識別子Scheme",
                                            "type": ["null", "string"],
                                        },
                                        "nameIdentifierURI": {
                                            "format": "text",
                                            "title": "権利者識別子URI",
                                            "title_i18n": {
                                                "en": "Right Holder Identifier URI",
                                                "ja": "権利者識別子URI",
                                            },
                                            "title_i18n_temp": {
                                                "en": "Right Holder Identifier URI",
                                                "ja": "権利者識別子URI",
                                            },
                                            "type": "string",
                                        },
                                    },
                                    "type": "object",
                                },
                                "title": "権利者識別子",
                                "type": "array",
                            },
                            "rightHolderNames": {
                                "format": "array",
                                "items": {
                                    "format": "object",
                                    "properties": {
                                        "rightHolderLanguage": {
                                            "currentEnum": [
                                                "ja",
                                                "ja-Kana",
                                                "en",
                                                "fr",
                                                "it",
                                                "de",
                                                "es",
                                                "zh-cn",
                                                "zh-tw",
                                                "ru",
                                                "la",
                                                "ms",
                                                "eo",
                                                "ar",
                                                "el",
                                                "ko",
                                            ],
                                            "enum": [
                                                None,
                                                "ja",
                                                "ja-Kana",
                                                "en",
                                                "fr",
                                                "it",
                                                "de",
                                                "es",
                                                "zh-cn",
                                                "zh-tw",
                                                "ru",
                                                "la",
                                                "ms",
                                                "eo",
                                                "ar",
                                                "el",
                                                "ko",
                                            ],
                                            "format": "select",
                                            "title": "言語",
                                            "type": ["null", "string"],
                                        },
                                        "rightHolderName": {
                                            "format": "text",
                                            "title": "権利者名",
                                            "title_i18n": {
                                                "en": "Right Holder Name",
                                                "ja": "権利者名",
                                            },
                                            "title_i18n_temp": {
                                                "en": "Right Holder Name",
                                                "ja": "権利者名",
                                            },
                                            "type": "string",
                                        },
                                    },
                                    "type": "object",
                                },
                                "title": "権利者名",
                                "type": "array",
                            },
                        },
                        "type": "object",
                    },
                    "maxItems": 9999,
                    "minItems": 1,
                    "title": "Rights Holder",
                    "type": "array",
                },
                "item_1617620223087": {
                    "items": {
                        "properties": {
                            "subitem_1565671149650": {
                                "currentEnum": [
                                    "ja",
                                    "ja-Kana",
                                    "en",
                                    "fr",
                                    "it",
                                    "de",
                                    "es",
                                    "zh-cn",
                                    "zh-tw",
                                    "ru",
                                    "la",
                                    "ms",
                                    "eo",
                                    "ar",
                                    "el",
                                    "ko",
                                ],
                                "enum": [
                                    None,
                                    "ja",
                                    "ja-Kana",
                                    "en",
                                    "fr",
                                    "it",
                                    "de",
                                    "es",
                                    "zh-cn",
                                    "zh-tw",
                                    "ru",
                                    "la",
                                    "ms",
                                    "eo",
                                    "ar",
                                    "el",
                                    "ko",
                                ],
                                "format": "select",
                                "title": "Language",
                                "type": ["null", "string"],
                            },
                            "subitem_1565671169640": {
                                "format": "text",
                                "title": "Banner Headline",
                                "title_i18n": {"en": "Banner Headline", "ja": "大見出し"},
                                "title_i18n_temp": {"en": "Banner Headline", "ja": "大見出し"},
                                "type": "string",
                            },
                            "subitem_1565671178623": {
                                "format": "text",
                                "title": "Subheading",
                                "title_i18n": {"en": "Subheading", "ja": "小見出し"},
                                "title_i18n_temp": {"en": "Subheading", "ja": "小見出し"},
                                "type": "string",
                            },
                        },
                        "type": "object",
                    },
                    "maxItems": 9999,
                    "minItems": 1,
                    "title": "Heading",
                    "type": "array",
                },
                "item_1617944105607": {
                    "items": {
                        "properties": {
                            "subitem_1551256015892": {
                                "format": "array",
                                "items": {
                                    "format": "object",
                                    "properties": {
                                        "subitem_1551256027296": {
                                            "format": "text",
                                            "title": "Degree Grantor Name Identifier",
                                            "title_i18n": {
                                                "en": "Degree Grantor Name Identifier",
                                                "ja": "学位授与機関識別子",
                                            },
                                            "title_i18n_temp": {
                                                "en": "Degree Grantor Name Identifier",
                                                "ja": "学位授与機関識別子",
                                            },
                                            "type": "string",
                                        },
                                        "subitem_1551256029891": {
                                            "currentEnum": ["kakenhi"],
                                            "enum": [None, "kakenhi"],
                                            "format": "select",
                                            "title": "Degree Grantor Name Identifier Scheme",
                                            "type": ["null", "string"],
                                        },
                                    },
                                    "type": "object",
                                },
                                "title": "Degree Grantor Name Identifier",
                                "type": "array",
                            },
                            "subitem_1551256037922": {
                                "format": "array",
                                "items": {
                                    "format": "object",
                                    "properties": {
                                        "subitem_1551256042287": {
                                            "format": "text",
                                            "title": "Degree Grantor Name",
                                            "title_i18n": {
                                                "en": "Degree Grantor Name",
                                                "ja": "学位授与機関名",
                                            },
                                            "title_i18n_temp": {
                                                "en": "Degree Grantor Name",
                                                "ja": "学位授与機関名",
                                            },
                                            "type": "string",
                                        },
                                        "subitem_1551256047619": {
                                            "currentEnum": [
                                                "ja",
                                                "en",
                                                "fr",
                                                "it",
                                                "de",
                                                "es",
                                                "zh-cn",
                                                "zh-tw",
                                                "ru",
                                                "la",
                                                "ms",
                                                "eo",
                                                "ar",
                                                "el",
                                                "ko",
                                            ],
                                            "enum": [
                                                None,
                                                "ja",
                                                "en",
                                                "fr",
                                                "it",
                                                "de",
                                                "es",
                                                "zh-cn",
                                                "zh-tw",
                                                "ru",
                                                "la",
                                                "ms",
                                                "eo",
                                                "ar",
                                                "el",
                                                "ko",
                                            ],
                                            "format": "select",
                                            "title": "Language",
                                            "type": ["null", "string"],
                                        },
                                    },
                                    "type": "object",
                                },
                                "title": "Degree Grantor Name",
                                "type": "array",
                            },
                        },
                        "type": "object",
                    },
                    "maxItems": 9999,
                    "minItems": 1,
                    "title": "Degree Grantor",
                    "type": "array",
                },
                "item_1662046377046": {
                    "items": {
                        "properties": {
                            "subitem_thumbnail": {
                                "format": "array",
                                "items": {
                                    "format": "object",
                                    "properties": {
                                        "thumbnail_label": {
                                            "format": "text",
                                            "title": "ラベル",
                                            "title_i18n": {"en": "Label", "ja": "ラベル"},
                                            "title_i18n_temp": {"en": "Label", "ja": "ラベル"},
                                            "type": "string",
                                        },
                                        "thumbnail_url": {
                                            "format": "text",
                                            "title": "URI",
                                            "title_i18n": {"en": "URI", "ja": "URI"},
                                            "title_i18n_temp": {"en": "URI", "ja": "URI"},
                                            "type": "string",
                                        },
                                    },
                                    "type": "object",
                                },
                                "title": "URI",
                                "type": "array",
                            }
                        },
                        "type": "object",
                    },
                    "maxItems": 9999,
                    "minItems": 1,
                    "title": "サムネイル",
                    "type": "array",
                },
                "pubdate": {"format": "datetime", "title": "PubDate", "type": "string"},
                "system_file": {
                    "format": "object",
                    "properties": {
                        "subitem_systemfile_datetime": {
                            "format": "array",
                            "items": {
                                "format": "object",
                                "properties": {
                                    "subitem_systemfile_datetime_date": {
                                        "format": "datetime",
                                        "title": "SYSTEMFILE DateTime Date",
                                        "type": "string",
                                    },
                                    "subitem_systemfile_datetime_type": {
                                        "enum": [
                                            "Accepted",
                                            "Available",
                                            "Collected",
                                            "Copyrighted",
                                            "Created",
                                            "Issued",
                                            "Submitted",
                                            "Updated",
                                            "Valid",
                                        ],
                                        "format": "select",
                                        "title": "SYSTEMFILE DateTime Type",
                                        "type": "string",
                                    },
                                },
                                "type": "object",
                            },
                            "title": "SYSTEMFILE DateTime",
                            "type": "array",
                        },
                        "subitem_systemfile_filename": {
                            "format": "array",
                            "items": {
                                "format": "object",
                                "properties": {
                                    "subitem_systemfile_filename_label": {
                                        "format": "text",
                                        "title": "SYSTEMFILE Filename Label",
                                        "type": "string",
                                    },
                                    "subitem_systemfile_filename_type": {
                                        "enum": [
                                            "Abstract",
                                            "Fulltext",
                                            "Summary",
                                            "Thumbnail",
                                            "Other",
                                        ],
                                        "format": "select",
                                        "title": "SYSTEMFILE Filename Type",
                                        "type": "string",
                                    },
                                    "subitem_systemfile_filename_uri": {
                                        "format": "text",
                                        "title": "SYSTEMFILE Filename URI",
                                        "type": "string",
                                    },
                                },
                                "type": "object",
                            },
                            "title": "SYSTEMFILE Filename",
                            "type": "array",
                        },
                        "subitem_systemfile_mimetype": {
                            "format": "text",
                            "title": "SYSTEMFILE MimeType",
                            "type": "string",
                        },
                        "subitem_systemfile_size": {
                            "format": "text",
                            "title": "SYSTEMFILE Size",
                            "type": "string",
                        },
                        "subitem_systemfile_version": {
                            "format": "text",
                            "title": "SYSTEMFILE Version",
                            "type": "string",
                        },
                    },
                    "system_prop": True,
                    "title": "File Information",
                    "type": "object",
                },
                "system_identifier_doi": {
                    "format": "object",
                    "properties": {
                        "subitem_systemidt_identifier": {
                            "format": "text",
                            "title": "SYSTEMIDT Identifier",
                            "type": "string",
                        },
                        "subitem_systemidt_identifier_type": {
                            "enum": ["DOI", "HDL", "URI"],
                            "format": "select",
                            "title": "SYSTEMIDT Identifier Type",
                            "type": "string",
                        },
                    },
                    "system_prop": True,
                    "title": "Persistent Identifier(DOI)",
                    "type": "object",
                },
                "system_identifier_hdl": {
                    "format": "object",
                    "properties": {
                        "subitem_systemidt_identifier": {
                            "format": "text",
                            "title": "SYSTEMIDT Identifier",
                            "type": "string",
                        },
                        "subitem_systemidt_identifier_type": {
                            "enum": ["DOI", "HDL", "URI"],
                            "format": "select",
                            "title": "SYSTEMIDT Identifier Type",
                            "type": "string",
                        },
                    },
                    "system_prop": True,
                    "title": "Persistent Identifier(HDL)",
                    "type": "object",
                },
                "system_identifier_uri": {
                    "format": "object",
                    "properties": {
                        "subitem_systemidt_identifier": {
                            "format": "text",
                            "title": "SYSTEMIDT Identifier",
                            "type": "string",
                        },
                        "subitem_systemidt_identifier_type": {
                            "enum": ["DOI", "HDL", "URI"],
                            "format": "select",
                            "title": "SYSTEMIDT Identifier Type",
                            "type": "string",
                        },
                    },
                    "system_prop": True,
                    "title": "Persistent Identifier(URI)",
                    "type": "object",
                },
            },
            "required": ["pubdate", "item_1617186331708", "item_1617258105262"],
            "type": "object",
        }
    
        url = url_for(
            "weko_items_ui.get_json_schema",
            item_type_id=1,
            activity_id="A-00000000-00000",
            _external=True,
        )
        res = client.get(url)
>       assert res.status_code == status_code
E       assert 400 == 200
E         -400
E         +200

tests/test_views.py:4883: AssertionError
------------------------------ Captured log setup ------------------------------
ext.py                     255 WARNING  JSONSCHEMAS_HOST is set to localhost
------------------------------ Captured log call -------------------------------
views.py                   314 ERROR    Unexpected error: <class 'AttributeError'>
views.py                   314 ERROR    Unexpected error: <class 'TypeError'>
______________________ test_iframe_items_index_get_error _______________________

app = <Flask 'testapp'>, client = <FlaskClient <Flask 'testapp'>>
db_itemtype = {'item_type': <ItemType 1>, 'item_type_mapping': <ItemTypeMapping 1>, 'item_type_name': <ItemTypeName 1>}
users = [{'email': 'contributor@test.org', 'id': 2, 'obj': <User 2>}, {'email': 'repoadmin@test.org', 'id': 4, 'obj': <User 4>...eneraluser@test.org', 'id': 6, 'obj': <User 5>}, {'email': 'originalroleuser@test.org', 'id': 7, 'obj': <User 7>}, ...]
db_records = [(<PersistentIdentifier depid:1 / rec:4876f221-b701-495c-9b9a-5fabd3c5bff4 (R)>, <PersistentIdentifier recid:1 / rec:4...617258105262': {'resourceuri': 'http://purl.org/coar/resource_type/c_5794', 'resourcetype': 'conference paper'}}), ...]
db_workflow = {'activity': <Activity 1>, 'flow_action1': <FlowAction 1>, 'flow_action2': <FlowAction 2>, 'flow_action3': <FlowAction 3>, ...}
esindex = <invenio_search.ext._SearchState object at 0x7f8a39df8d30>

    def test_iframe_items_index_get_error(app, client, db_itemtype, users, db_records, db_workflow, esindex):
        login_user_via_session(client=client, email=users[0]["email"])
>       mocker.patch("weko_items_ui.views.set_files_display_type")
E       NameError: name 'mocker' is not defined

tests/test_views.py:20319: NameError
------------------------------ Captured log setup ------------------------------
ext.py                     255 WARNING  JSONSCHEMAS_HOST is set to localhost
__________________ test_iframe_items_index_update_index_error __________________

app = <Flask 'testapp'>, client = <FlaskClient <Flask 'testapp'>>
db_itemtype = {'item_type': <ItemType 1>, 'item_type_mapping': <ItemTypeMapping 1>, 'item_type_name': <ItemTypeName 1>}
users = [{'email': 'contributor@test.org', 'id': 2, 'obj': <User 2>}, {'email': 'repoadmin@test.org', 'id': 4, 'obj': <User 4>...eneraluser@test.org', 'id': 6, 'obj': <User 5>}, {'email': 'originalroleuser@test.org', 'id': 7, 'obj': <User 7>}, ...]
db_records = [(<PersistentIdentifier depid:1 / rec:45b1472d-0744-4bd6-8a4a-0fcf5f893003 (R)>, <PersistentIdentifier recid:1 / rec:4...617258105262': {'resourceuri': 'http://purl.org/coar/resource_type/c_5794', 'resourcetype': 'conference paper'}}), ...]
db_workflow = {'activity': <Activity 1>, 'flow_action1': <FlowAction 1>, 'flow_action2': <FlowAction 2>, 'flow_action3': <FlowAction 3>, ...}
esindex = <invenio_search.ext._SearchState object at 0x7f8a39b43780>

    def test_iframe_items_index_update_index_error(app, client, db_itemtype, users, db_records, db_workflow, esindex):
        login_user_via_session(client=client, email=users[0]["email"])
    
        url = url_for("weko_items_ui.iframe_items_index", pid_value=str(1), _external=True)
        with client.session_transaction() as session:
            activity = db_workflow['activity']
            activity.workflow_id = 2
            session["itemlogin_activity"] = activity
        depid, recid, parent, doi, record, item = db_records[0]
        redis_connection = RedisConnection()
>       datastore = redis_connection.connection(db=app.config['CACHE_REDIS_DB'], kv = True)

tests/test_views.py:20359: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 
../weko-redis/weko_redis/redis.py:44: in connection
    raise ex
../weko-redis/weko_redis/redis.py:40: in connection
    store = self.redis_connection(db)
../weko-redis/weko_redis/redis.py:68: in redis_connection
    raise ex
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

self = <weko_redis.redis.RedisConnection object at 0x7f8a399a99b0>, db = 0

    def redis_connection(self, db):
        """
        Establishes a direct Redis connection and returns the Redis store object.
    
        Args:
            db (int): The Redis database index to connect to.
    
        Returns:
            object: The Redis store object.
        """
        store = None
        try:
>           redis_url = 'redis://' + current_app.config['CACHE_REDIS_HOST'] + ':' + current_app.config['REDIS_PORT'] + '/' + str(db)
E           TypeError: must be str, not NoneType

../weko-redis/weko_redis/redis.py:65: TypeError
------------------------------ Captured log setup ------------------------------
ext.py                     255 WARNING  JSONSCHEMAS_HOST is set to localhost
_____________________ test_iframe_items_index_update_index _____________________

app = <Flask 'testapp'>, client = <FlaskClient <Flask 'testapp'>>
db_itemtype = {'item_type': <ItemType 1>, 'item_type_mapping': <ItemTypeMapping 1>, 'item_type_name': <ItemTypeName 1>}
users = [{'email': 'contributor@test.org', 'id': 2, 'obj': <User 2>}, {'email': 'repoadmin@test.org', 'id': 4, 'obj': <User 4>...eneraluser@test.org', 'id': 6, 'obj': <User 5>}, {'email': 'originalroleuser@test.org', 'id': 7, 'obj': <User 7>}, ...]
db_records = [(<PersistentIdentifier depid:1 / rec:daed9e07-b1a7-458a-8742-0f4242f3f506 (R)>, <PersistentIdentifier recid:1 / rec:d...617258105262': {'resourceuri': 'http://purl.org/coar/resource_type/c_5794', 'resourcetype': 'conference paper'}}), ...]
db_workflow = {'activity': <Activity 1>, 'flow_action1': <FlowAction 1>, 'flow_action2': <FlowAction 2>, 'flow_action3': <FlowAction 3>, ...}
esindex = <invenio_search.ext._SearchState object at 0x7f8a3d260780>

    def test_iframe_items_index_update_index(app, client, db_itemtype, users, db_records, db_workflow, esindex):
        login_user_via_session(client=client, email=users[0]["email"])
    
        url = url_for("weko_items_ui.iframe_items_index", pid_value=str(1), _external=True)
        with client.session_transaction() as session:
            activity = db_workflow['activity']
            activity.workflow_id = 2
            session["itemlogin_activity"] = activity
        depid, recid, parent, doi, record, item = db_records[0]
        record['$schema'] = "/items/jsonschema/1"
        redis_connection = RedisConnection()
>       datastore = redis_connection.connection(db=app.config['CACHE_REDIS_DB'], kv = True)

tests/test_views.py:20384: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 
../weko-redis/weko_redis/redis.py:44: in connection
    raise ex
../weko-redis/weko_redis/redis.py:40: in connection
    store = self.redis_connection(db)
../weko-redis/weko_redis/redis.py:68: in redis_connection
    raise ex
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

self = <weko_redis.redis.RedisConnection object at 0x7f8a3aac42e8>, db = 0

    def redis_connection(self, db):
        """
        Establishes a direct Redis connection and returns the Redis store object.
    
        Args:
            db (int): The Redis database index to connect to.
    
        Returns:
            object: The Redis store object.
        """
        store = None
        try:
>           redis_url = 'redis://' + current_app.config['CACHE_REDIS_HOST'] + ':' + current_app.config['REDIS_PORT'] + '/' + str(db)
E           TypeError: must be str, not NoneType

../weko-redis/weko_redis/redis.py:65: TypeError
------------------------------ Captured log setup ------------------------------
ext.py                     255 WARNING  JSONSCHEMAS_HOST is set to localhost
_________________________ test_iframe_items_index_get __________________________

app = <Flask 'testapp'>, client = <FlaskClient <Flask 'testapp'>>
db_itemtype = {'item_type': <ItemType 1>, 'item_type_mapping': <ItemTypeMapping 1>, 'item_type_name': <ItemTypeName 1>}
users = [{'email': 'contributor@test.org', 'id': 2, 'obj': <User 2>}, {'email': 'repoadmin@test.org', 'id': 4, 'obj': <User 4>...eneraluser@test.org', 'id': 6, 'obj': <User 5>}, {'email': 'originalroleuser@test.org', 'id': 7, 'obj': <User 7>}, ...]
db_records = [(<PersistentIdentifier depid:1 / rec:1539ffd8-2c3f-4ce7-b4ed-1d953a06d1ad (R)>, <PersistentIdentifier recid:1 / rec:1...617258105262': {'resourceuri': 'http://purl.org/coar/resource_type/c_5794', 'resourcetype': 'conference paper'}}), ...]
db_workflow = {'activity': <Activity 1>, 'flow_action1': <FlowAction 1>, 'flow_action2': <FlowAction 2>, 'flow_action3': <FlowAction 3>, ...}
esindex = <invenio_search.ext._SearchState object at 0x7f8a3aab6eb8>

    def test_iframe_items_index_get(app, client, db_itemtype, users, db_records, db_workflow, esindex):
        login_user_via_session(client=client, email=users[0]["email"])
    
        depid, recid, parent, doi, record, item = db_records[0]
        record['$schema'] = "/items/jsonschema/1"
        redis_connection = RedisConnection()
>       datastore = redis_connection.connection(db=app.config['CACHE_REDIS_DB'], kv = True)

tests/test_views.py:20404: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 
../weko-redis/weko_redis/redis.py:44: in connection
    raise ex
../weko-redis/weko_redis/redis.py:40: in connection
    store = self.redis_connection(db)
../weko-redis/weko_redis/redis.py:68: in redis_connection
    raise ex
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

self = <weko_redis.redis.RedisConnection object at 0x7f8a39ec7da0>, db = 0

    def redis_connection(self, db):
        """
        Establishes a direct Redis connection and returns the Redis store object.
    
        Args:
            db (int): The Redis database index to connect to.
    
        Returns:
            object: The Redis store object.
        """
        store = None
        try:
>           redis_url = 'redis://' + current_app.config['CACHE_REDIS_HOST'] + ':' + current_app.config['REDIS_PORT'] + '/' + str(db)
E           TypeError: must be str, not NoneType

../weko-redis/weko_redis/redis.py:65: TypeError
------------------------------ Captured log setup ------------------------------
ext.py                     255 WARNING  JSONSCHEMAS_HOST is set to localhost
_________________________ test_iframe_items_index_put __________________________

app = <Flask 'testapp'>, client = <FlaskClient <Flask 'testapp'>>
db_itemtype = {'item_type': <ItemType 1>, 'item_type_mapping': <ItemTypeMapping 1>, 'item_type_name': <ItemTypeName 1>}
users = [{'email': 'contributor@test.org', 'id': 2, 'obj': <User 2>}, {'email': 'repoadmin@test.org', 'id': 4, 'obj': <User 4>...eneraluser@test.org', 'id': 6, 'obj': <User 5>}, {'email': 'originalroleuser@test.org', 'id': 7, 'obj': <User 7>}, ...]
db_records = [(<PersistentIdentifier depid:1 / rec:430bd0b2-8009-4d21-ade3-f58e3a3a0e39 (R)>, <PersistentIdentifier recid:1 / rec:4...617258105262': {'resourceuri': 'http://purl.org/coar/resource_type/c_5794', 'resourcetype': 'conference paper'}}), ...]
db_workflow = {'activity': <Activity 1>, 'flow_action1': <FlowAction 1>, 'flow_action2': <FlowAction 2>, 'flow_action3': <FlowAction 3>, ...}
esindex = <invenio_search.ext._SearchState object at 0x7f8a3a0b0940>

    def test_iframe_items_index_put(app, client, db_itemtype, users, db_records, db_workflow, esindex):
        login_user_via_session(client=client, email=users[0]["email"])
        headers = {'content-type': 'application/json'}
    
        depid, recid, parent, doi, record, item = db_records[0]
        record['$schema'] = "/items/jsonschema/1"
        redis_connection = RedisConnection()
>       datastore = redis_connection.connection(db=app.config['ACCOUNTS_SESSION_REDIS_DB_NO'], kv = True)

tests/test_views.py:20472: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 
../weko-redis/weko_redis/redis.py:44: in connection
    raise ex
../weko-redis/weko_redis/redis.py:40: in connection
    store = self.redis_connection(db)
../weko-redis/weko_redis/redis.py:68: in redis_connection
    raise ex
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

self = <weko_redis.redis.RedisConnection object at 0x7f8a3981b518>, db = 1

    def redis_connection(self, db):
        """
        Establishes a direct Redis connection and returns the Redis store object.
    
        Args:
            db (int): The Redis database index to connect to.
    
        Returns:
            object: The Redis store object.
        """
        store = None
        try:
>           redis_url = 'redis://' + current_app.config['CACHE_REDIS_HOST'] + ':' + current_app.config['REDIS_PORT'] + '/' + str(db)
E           TypeError: must be str, not NoneType

../weko-redis/weko_redis/redis.py:65: TypeError
------------------------------ Captured log setup ------------------------------
ext.py                     255 WARNING  JSONSCHEMAS_HOST is set to localhost
_________________________ test_iframe_items_index_post _________________________

app = <Flask 'testapp'>, client = <FlaskClient <Flask 'testapp'>>
db_itemtype = {'item_type': <ItemType 1>, 'item_type_mapping': <ItemTypeMapping 1>, 'item_type_name': <ItemTypeName 1>}
users = [{'email': 'contributor@test.org', 'id': 2, 'obj': <User 2>}, {'email': 'repoadmin@test.org', 'id': 4, 'obj': <User 4>...eneraluser@test.org', 'id': 6, 'obj': <User 5>}, {'email': 'originalroleuser@test.org', 'id': 7, 'obj': <User 7>}, ...]
db_records = [(<PersistentIdentifier depid:1 / rec:26b5c965-5749-47c9-8168-34083e09e573 (R)>, <PersistentIdentifier recid:1 / rec:2...617258105262': {'resourceuri': 'http://purl.org/coar/resource_type/c_5794', 'resourcetype': 'conference paper'}}), ...]
db_workflow = {'activity': <Activity 1>, 'flow_action1': <FlowAction 1>, 'flow_action2': <FlowAction 2>, 'flow_action3': <FlowAction 3>, ...}
esindex = <invenio_search.ext._SearchState object at 0x7f8a3a79b710>

    def test_iframe_items_index_post(app, client, db_itemtype, users, db_records, db_workflow, esindex):
        login_user_via_session(client=client, email=users[0]["email"])
        headers = {'content-type': 'application/json'}
        depid, recid, parent, doi, record, item = db_records[0]
        record['$schema'] = "/items/jsonschema/1"
    
        url = url_for("weko_items_ui.iframe_items_index", pid_value=str(1), _external=True)
        res = client.post(url, data=json.dumps("{}"), headers=headers)
>       assert res.status_code == 200
E       assert 400 == 200
E         -400
E         +200

tests/test_views.py:20490: AssertionError
------------------------------ Captured log setup ------------------------------
ext.py                     255 WARNING  JSONSCHEMAS_HOST is set to localhost
------------------------------ Captured log call -------------------------------
views.py                   595 ERROR    Unexpected error: <class 'TypeError'>
_______________________________ test_to_links_js _______________________________

app = <Flask 'testapp'>
db_records = [(<PersistentIdentifier depid:1 / rec:b0f36768-e40b-4e3e-bbde-11b7c8d8eb9c (R)>, <PersistentIdentifier recid:1 / rec:b...617258105262': {'resourceuri': 'http://purl.org/coar/resource_type/c_5794', 'resourcetype': 'conference paper'}}), ...]

    def test_to_links_js(app, db_records):
        depid, recid, parent, doi, record, item = db_records[0]
>       assert to_links_js(depid) == {
            "self": "/api/deposits/items/1",
            "ret": "http://test_server/items/",
            "index": "/api/deposits/redirect/1",
            "r": "/items/index/1",
            "iframe_tree": "/items/iframe/index/1",
            "iframe_tree_upgrade": "/items/iframe/index/1.2",
        }
E       AssertionError: assert {'iframe_tree...index/1', ...} == {'iframe_tree'...index/1', ...}
E         Omitting 5 identical items, use -vv to show
E         Differing items:
E         {'ret': '/items/'} != {'ret': 'http://test_server/items/'}
E         Full diff:
E         {'iframe_tree': '/items/iframe/index/1',
E         'iframe_tree_upgrade': '/items/iframe/index/1.2',
E         'index': '/api/deposits/redirect/1',...
E         
E         ...Full output truncated (5 lines hidden), use '-vv' to show

tests/test_views.py:20506: AssertionError
------------------------------ Captured log setup ------------------------------
ext.py                     255 WARNING  JSONSCHEMAS_HOST is set to localhost
___________________________ test_get_search_data_acl ___________________________

client_api = <FlaskClient <Flask 'testapp'>>, db_sessionlifetime = None

    def test_get_search_data_acl(client_api, db_sessionlifetime):
        url = url_for(
            "weko_items_ui_api.get_search_data", data_type="username", _external=True
        )
        res = client_api.get(url)
>       assert res.status_code == 200
E       assert 403 == 200
E         -403
E         +200

tests/test_views.py:20553: AssertionError
------------------------------ Captured log setup ------------------------------
ext.py                     255 WARNING  JSONSCHEMAS_HOST is set to localhost
_____________________________ test_get_search_data _____________________________

client_api = <FlaskClient <Flask 'testapp'>>
users = [{'email': 'contributor@test.org', 'id': 2, 'obj': <User 2>}, {'email': 'repoadmin@test.org', 'id': 4, 'obj': <User 4>...eneraluser@test.org', 'id': 6, 'obj': <User 5>}, {'email': 'originalroleuser@test.org', 'id': 7, 'obj': <User 7>}, ...]
db_userprofile = {'comadmin@test.org': <UserProfile 3>, 'contributor@test.org': <UserProfile 2>, 'generaluser@test.org': <UserProfile 6>, 'originalroleuser2@test.org': <UserProfile 8>, ...}
db_sessionlifetime = None

    def test_get_search_data(client_api, users, db_userprofile, db_sessionlifetime):
        url = url_for(
            "weko_items_ui_api.get_search_data", data_type="username", _external=True
        )
        res = client_api.get(url)
>       assert res.status_code == 200
E       assert 403 == 200
E         -403
E         +200

tests/test_views.py:20571: AssertionError
------------------------------ Captured log setup ------------------------------
ext.py                     255 WARNING  JSONSCHEMAS_HOST is set to localhost
________________________ test_get_user_info_acl_nologin ________________________

client_api = <FlaskClient <Flask 'testapp'>>, db_sessionlifetime = None

    def test_get_user_info_acl_nologin(client_api, db_sessionlifetime):
        url = url_for(
            "weko_items_ui_api.get_user_info", owner=1, shared_user_id=1, _external=True
        )
        res = client_api.get(url)
>       assert res.status_code == 200
E       assert 403 == 200
E         -403
E         +200

tests/test_views.py:20691: AssertionError
------------------------------ Captured log setup ------------------------------
ext.py                     255 WARNING  JSONSCHEMAS_HOST is set to localhost
________________________ test_get_user_info_acl[4-200] _________________________

client_api = <FlaskClient <Flask 'testapp'>>, db_sessionlifetime = None
users = [{'email': 'contributor@test.org', 'id': 2, 'obj': <User 2>}, {'email': 'repoadmin@test.org', 'id': 4, 'obj': <User 4>...eneraluser@test.org', 'id': 6, 'obj': <User 5>}, {'email': 'originalroleuser@test.org', 'id': 7, 'obj': <User 7>}, ...]
id = 4, status_code = 200

    @pytest.mark.parametrize(
        "id, status_code",
        [
            (0, 200),
            (1, 200),
            (2, 200),
            (3, 200),
            (4, 200),
            (5, 200),
            (6, 200),
            (7, 200),
        ],
    )
    def test_get_user_info_acl(client_api, db_sessionlifetime, users, id, status_code):
        login_user_via_session(client=client_api, email=users[id]["email"])
        url = url_for(
            "weko_items_ui_api.get_user_info", owner=1, shared_user_id=1, _external=True
        )
        res = client_api.get(url)
>       assert res.status_code == status_code
E       assert 403 == 200
E         -403
E         +200

tests/test_views.py:20714: AssertionError
------------------------------ Captured log setup ------------------------------
ext.py                     255 WARNING  JSONSCHEMAS_HOST is set to localhost
________________________ test_get_user_info_acl[5-200] _________________________

client_api = <FlaskClient <Flask 'testapp'>>, db_sessionlifetime = None
users = [{'email': 'contributor@test.org', 'id': 2, 'obj': <User 2>}, {'email': 'repoadmin@test.org', 'id': 4, 'obj': <User 4>...eneraluser@test.org', 'id': 6, 'obj': <User 5>}, {'email': 'originalroleuser@test.org', 'id': 7, 'obj': <User 7>}, ...]
id = 5, status_code = 200

    @pytest.mark.parametrize(
        "id, status_code",
        [
            (0, 200),
            (1, 200),
            (2, 200),
            (3, 200),
            (4, 200),
            (5, 200),
            (6, 200),
            (7, 200),
        ],
    )
    def test_get_user_info_acl(client_api, db_sessionlifetime, users, id, status_code):
        login_user_via_session(client=client_api, email=users[id]["email"])
        url = url_for(
            "weko_items_ui_api.get_user_info", owner=1, shared_user_id=1, _external=True
        )
        res = client_api.get(url)
>       assert res.status_code == status_code
E       assert 403 == 200
E         -403
E         +200

tests/test_views.py:20714: AssertionError
------------------------------ Captured log setup ------------------------------
ext.py                     255 WARNING  JSONSCHEMAS_HOST is set to localhost
________________________ test_get_user_info_acl[7-200] _________________________

client_api = <FlaskClient <Flask 'testapp'>>, db_sessionlifetime = None
users = [{'email': 'contributor@test.org', 'id': 2, 'obj': <User 2>}, {'email': 'repoadmin@test.org', 'id': 4, 'obj': <User 4>...eneraluser@test.org', 'id': 6, 'obj': <User 5>}, {'email': 'originalroleuser@test.org', 'id': 7, 'obj': <User 7>}, ...]
id = 7, status_code = 200

    @pytest.mark.parametrize(
        "id, status_code",
        [
            (0, 200),
            (1, 200),
            (2, 200),
            (3, 200),
            (4, 200),
            (5, 200),
            (6, 200),
            (7, 200),
        ],
    )
    def test_get_user_info_acl(client_api, db_sessionlifetime, users, id, status_code):
        login_user_via_session(client=client_api, email=users[id]["email"])
        url = url_for(
            "weko_items_ui_api.get_user_info", owner=1, shared_user_id=1, _external=True
        )
        res = client_api.get(url)
>       assert res.status_code == status_code
E       assert 403 == 200
E         -403
E         +200

tests/test_views.py:20714: AssertionError
------------------------------ Captured log setup ------------------------------
ext.py                     255 WARNING  JSONSCHEMAS_HOST is set to localhost
_____________________ test_prepare_edit_item_login[0-200] ______________________

client_api = <FlaskClient <Flask 'testapp'>>
users = [{'email': 'contributor@test.org', 'id': 2, 'obj': <User 2>}, {'email': 'repoadmin@test.org', 'id': 4, 'obj': <User 4>...eneraluser@test.org', 'id': 6, 'obj': <User 5>}, {'email': 'originalroleuser@test.org', 'id': 7, 'obj': <User 7>}, ...]
id = 0, status_code = 200, db_sessionlifetime = None

    @pytest.mark.parametrize(
        "id, status_code",
        [
            (0, 200),
            (1, 200),
            (2, 200),
            (3, 200),
            (4, 200),
            (5, 200),
            (6, 200),
            (7, 200),
        ],
    )
    def test_prepare_edit_item_login(client_api, users, id, status_code, db_sessionlifetime):
        login_user_via_session(client=client_api, email=users[id]["email"])
        res = client_api.post(
            "/api/items/prepare_edit_item",
            data=json.dumps({}),
>           content_type="application/json",
        )

tests/test_views.py:20767: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 
.tox/c1/lib/python3.6/site-packages/werkzeug/test.py:1039: in post
    return self.open(*args, **kw)
.tox/c1/lib/python3.6/site-packages/flask/testing.py:227: in open
    follow_redirects=follow_redirects,
.tox/c1/lib/python3.6/site-packages/werkzeug/test.py:993: in open
    response = self.run_wsgi_app(environ.copy(), buffered=buffered)
.tox/c1/lib/python3.6/site-packages/werkzeug/test.py:884: in run_wsgi_app
    rv = run_wsgi_app(self.application, environ, buffered=buffered)
.tox/c1/lib/python3.6/site-packages/werkzeug/test.py:1119: in run_wsgi_app
    app_rv = app(environ, start_response)
.tox/c1/lib/python3.6/site-packages/flask/app.py:2463: in __call__
    return self.wsgi_app(environ, start_response)
.tox/c1/lib/python3.6/site-packages/flask/app.py:2449: in wsgi_app
    response = self.handle_exception(e)
.tox/c1/lib/python3.6/site-packages/flask/app.py:1866: in handle_exception
    reraise(exc_type, exc_value, tb)
.tox/c1/lib/python3.6/site-packages/flask/_compat.py:39: in reraise
    raise value
.tox/c1/lib/python3.6/site-packages/flask/app.py:2446: in wsgi_app
    response = self.full_dispatch_request()
.tox/c1/lib/python3.6/site-packages/flask/app.py:1951: in full_dispatch_request
    rv = self.handle_user_exception(e)
.tox/c1/lib/python3.6/site-packages/flask/app.py:1820: in handle_user_exception
    reraise(exc_type, exc_value, tb)
.tox/c1/lib/python3.6/site-packages/flask/_compat.py:39: in reraise
    raise value
.tox/c1/lib/python3.6/site-packages/flask/app.py:1949: in full_dispatch_request
    rv = self.dispatch_request()
.tox/c1/lib/python3.6/site-packages/flask/app.py:1935: in dispatch_request
    return self.view_functions[rule.endpoint](**req.view_args)
.tox/c1/lib/python3.6/site-packages/flask_login/utils.py:261: in decorated_view
    return func(*args, **kwargs)
weko_items_ui/views.py:881: in prepare_edit_item
    sessionstorage = redis_connection.connection(db=current_app.config['ACCOUNTS_SESSION_REDIS_DB_NO'], kv = True)
../weko-redis/weko_redis/redis.py:44: in connection
    raise ex
../weko-redis/weko_redis/redis.py:40: in connection
    store = self.redis_connection(db)
../weko-redis/weko_redis/redis.py:68: in redis_connection
    raise ex
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

self = <weko_redis.redis.RedisConnection object at 0x7f8a380e0390>, db = 1

    def redis_connection(self, db):
        """
        Establishes a direct Redis connection and returns the Redis store object.
    
        Args:
            db (int): The Redis database index to connect to.
    
        Returns:
            object: The Redis store object.
        """
        store = None
        try:
>           redis_url = 'redis://' + current_app.config['CACHE_REDIS_HOST'] + ':' + current_app.config['REDIS_PORT'] + '/' + str(db)
E           TypeError: must be str, not NoneType

../weko-redis/weko_redis/redis.py:65: TypeError
------------------------------ Captured log setup ------------------------------
ext.py                     255 WARNING  JSONSCHEMAS_HOST is set to localhost
_____________________ test_prepare_edit_item_login[1-200] ______________________

client_api = <FlaskClient <Flask 'testapp'>>
users = [{'email': 'contributor@test.org', 'id': 2, 'obj': <User 2>}, {'email': 'repoadmin@test.org', 'id': 4, 'obj': <User 4>...eneraluser@test.org', 'id': 6, 'obj': <User 5>}, {'email': 'originalroleuser@test.org', 'id': 7, 'obj': <User 7>}, ...]
id = 1, status_code = 200, db_sessionlifetime = None

    @pytest.mark.parametrize(
        "id, status_code",
        [
            (0, 200),
            (1, 200),
            (2, 200),
            (3, 200),
            (4, 200),
            (5, 200),
            (6, 200),
            (7, 200),
        ],
    )
    def test_prepare_edit_item_login(client_api, users, id, status_code, db_sessionlifetime):
        login_user_via_session(client=client_api, email=users[id]["email"])
        res = client_api.post(
            "/api/items/prepare_edit_item",
            data=json.dumps({}),
>           content_type="application/json",
        )

tests/test_views.py:20767: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 
.tox/c1/lib/python3.6/site-packages/werkzeug/test.py:1039: in post
    return self.open(*args, **kw)
.tox/c1/lib/python3.6/site-packages/flask/testing.py:227: in open
    follow_redirects=follow_redirects,
.tox/c1/lib/python3.6/site-packages/werkzeug/test.py:993: in open
    response = self.run_wsgi_app(environ.copy(), buffered=buffered)
.tox/c1/lib/python3.6/site-packages/werkzeug/test.py:884: in run_wsgi_app
    rv = run_wsgi_app(self.application, environ, buffered=buffered)
.tox/c1/lib/python3.6/site-packages/werkzeug/test.py:1119: in run_wsgi_app
    app_rv = app(environ, start_response)
.tox/c1/lib/python3.6/site-packages/flask/app.py:2463: in __call__
    return self.wsgi_app(environ, start_response)
.tox/c1/lib/python3.6/site-packages/flask/app.py:2449: in wsgi_app
    response = self.handle_exception(e)
.tox/c1/lib/python3.6/site-packages/flask/app.py:1866: in handle_exception
    reraise(exc_type, exc_value, tb)
.tox/c1/lib/python3.6/site-packages/flask/_compat.py:39: in reraise
    raise value
.tox/c1/lib/python3.6/site-packages/flask/app.py:2446: in wsgi_app
    response = self.full_dispatch_request()
.tox/c1/lib/python3.6/site-packages/flask/app.py:1951: in full_dispatch_request
    rv = self.handle_user_exception(e)
.tox/c1/lib/python3.6/site-packages/flask/app.py:1820: in handle_user_exception
    reraise(exc_type, exc_value, tb)
.tox/c1/lib/python3.6/site-packages/flask/_compat.py:39: in reraise
    raise value
.tox/c1/lib/python3.6/site-packages/flask/app.py:1949: in full_dispatch_request
    rv = self.dispatch_request()
.tox/c1/lib/python3.6/site-packages/flask/app.py:1935: in dispatch_request
    return self.view_functions[rule.endpoint](**req.view_args)
.tox/c1/lib/python3.6/site-packages/flask_login/utils.py:261: in decorated_view
    return func(*args, **kwargs)
weko_items_ui/views.py:881: in prepare_edit_item
    sessionstorage = redis_connection.connection(db=current_app.config['ACCOUNTS_SESSION_REDIS_DB_NO'], kv = True)
../weko-redis/weko_redis/redis.py:44: in connection
    raise ex
../weko-redis/weko_redis/redis.py:40: in connection
    store = self.redis_connection(db)
../weko-redis/weko_redis/redis.py:68: in redis_connection
    raise ex
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

self = <weko_redis.redis.RedisConnection object at 0x7f8a38102898>, db = 1

    def redis_connection(self, db):
        """
        Establishes a direct Redis connection and returns the Redis store object.
    
        Args:
            db (int): The Redis database index to connect to.
    
        Returns:
            object: The Redis store object.
        """
        store = None
        try:
>           redis_url = 'redis://' + current_app.config['CACHE_REDIS_HOST'] + ':' + current_app.config['REDIS_PORT'] + '/' + str(db)
E           TypeError: must be str, not NoneType

../weko-redis/weko_redis/redis.py:65: TypeError
------------------------------ Captured log setup ------------------------------
ext.py                     255 WARNING  JSONSCHEMAS_HOST is set to localhost
_____________________ test_prepare_edit_item_login[2-200] ______________________

client_api = <FlaskClient <Flask 'testapp'>>
users = [{'email': 'contributor@test.org', 'id': 2, 'obj': <User 2>}, {'email': 'repoadmin@test.org', 'id': 4, 'obj': <User 4>...eneraluser@test.org', 'id': 6, 'obj': <User 5>}, {'email': 'originalroleuser@test.org', 'id': 7, 'obj': <User 7>}, ...]
id = 2, status_code = 200, db_sessionlifetime = None

    @pytest.mark.parametrize(
        "id, status_code",
        [
            (0, 200),
            (1, 200),
            (2, 200),
            (3, 200),
            (4, 200),
            (5, 200),
            (6, 200),
            (7, 200),
        ],
    )
    def test_prepare_edit_item_login(client_api, users, id, status_code, db_sessionlifetime):
        login_user_via_session(client=client_api, email=users[id]["email"])
        res = client_api.post(
            "/api/items/prepare_edit_item",
            data=json.dumps({}),
>           content_type="application/json",
        )

tests/test_views.py:20767: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 
.tox/c1/lib/python3.6/site-packages/werkzeug/test.py:1039: in post
    return self.open(*args, **kw)
.tox/c1/lib/python3.6/site-packages/flask/testing.py:227: in open
    follow_redirects=follow_redirects,
.tox/c1/lib/python3.6/site-packages/werkzeug/test.py:993: in open
    response = self.run_wsgi_app(environ.copy(), buffered=buffered)
.tox/c1/lib/python3.6/site-packages/werkzeug/test.py:884: in run_wsgi_app
    rv = run_wsgi_app(self.application, environ, buffered=buffered)
.tox/c1/lib/python3.6/site-packages/werkzeug/test.py:1119: in run_wsgi_app
    app_rv = app(environ, start_response)
.tox/c1/lib/python3.6/site-packages/flask/app.py:2463: in __call__
    return self.wsgi_app(environ, start_response)
.tox/c1/lib/python3.6/site-packages/flask/app.py:2449: in wsgi_app
    response = self.handle_exception(e)
.tox/c1/lib/python3.6/site-packages/flask/app.py:1866: in handle_exception
    reraise(exc_type, exc_value, tb)
.tox/c1/lib/python3.6/site-packages/flask/_compat.py:39: in reraise
    raise value
.tox/c1/lib/python3.6/site-packages/flask/app.py:2446: in wsgi_app
    response = self.full_dispatch_request()
.tox/c1/lib/python3.6/site-packages/flask/app.py:1951: in full_dispatch_request
    rv = self.handle_user_exception(e)
.tox/c1/lib/python3.6/site-packages/flask/app.py:1820: in handle_user_exception
    reraise(exc_type, exc_value, tb)
.tox/c1/lib/python3.6/site-packages/flask/_compat.py:39: in reraise
    raise value
.tox/c1/lib/python3.6/site-packages/flask/app.py:1949: in full_dispatch_request
    rv = self.dispatch_request()
.tox/c1/lib/python3.6/site-packages/flask/app.py:1935: in dispatch_request
    return self.view_functions[rule.endpoint](**req.view_args)
.tox/c1/lib/python3.6/site-packages/flask_login/utils.py:261: in decorated_view
    return func(*args, **kwargs)
weko_items_ui/views.py:881: in prepare_edit_item
    sessionstorage = redis_connection.connection(db=current_app.config['ACCOUNTS_SESSION_REDIS_DB_NO'], kv = True)
../weko-redis/weko_redis/redis.py:44: in connection
    raise ex
../weko-redis/weko_redis/redis.py:40: in connection
    store = self.redis_connection(db)
../weko-redis/weko_redis/redis.py:68: in redis_connection
    raise ex
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

self = <weko_redis.redis.RedisConnection object at 0x7f8a37beadd8>, db = 1

    def redis_connection(self, db):
        """
        Establishes a direct Redis connection and returns the Redis store object.
    
        Args:
            db (int): The Redis database index to connect to.
    
        Returns:
            object: The Redis store object.
        """
        store = None
        try:
>           redis_url = 'redis://' + current_app.config['CACHE_REDIS_HOST'] + ':' + current_app.config['REDIS_PORT'] + '/' + str(db)
E           TypeError: must be str, not NoneType

../weko-redis/weko_redis/redis.py:65: TypeError
------------------------------ Captured log setup ------------------------------
ext.py                     255 WARNING  JSONSCHEMAS_HOST is set to localhost
_____________________ test_prepare_edit_item_login[3-200] ______________________

client_api = <FlaskClient <Flask 'testapp'>>
users = [{'email': 'contributor@test.org', 'id': 2, 'obj': <User 2>}, {'email': 'repoadmin@test.org', 'id': 4, 'obj': <User 4>...eneraluser@test.org', 'id': 6, 'obj': <User 5>}, {'email': 'originalroleuser@test.org', 'id': 7, 'obj': <User 7>}, ...]
id = 3, status_code = 200, db_sessionlifetime = None

    @pytest.mark.parametrize(
        "id, status_code",
        [
            (0, 200),
            (1, 200),
            (2, 200),
            (3, 200),
            (4, 200),
            (5, 200),
            (6, 200),
            (7, 200),
        ],
    )
    def test_prepare_edit_item_login(client_api, users, id, status_code, db_sessionlifetime):
        login_user_via_session(client=client_api, email=users[id]["email"])
        res = client_api.post(
            "/api/items/prepare_edit_item",
            data=json.dumps({}),
>           content_type="application/json",
        )

tests/test_views.py:20767: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 
.tox/c1/lib/python3.6/site-packages/werkzeug/test.py:1039: in post
    return self.open(*args, **kw)
.tox/c1/lib/python3.6/site-packages/flask/testing.py:227: in open
    follow_redirects=follow_redirects,
.tox/c1/lib/python3.6/site-packages/werkzeug/test.py:993: in open
    response = self.run_wsgi_app(environ.copy(), buffered=buffered)
.tox/c1/lib/python3.6/site-packages/werkzeug/test.py:884: in run_wsgi_app
    rv = run_wsgi_app(self.application, environ, buffered=buffered)
.tox/c1/lib/python3.6/site-packages/werkzeug/test.py:1119: in run_wsgi_app
    app_rv = app(environ, start_response)
.tox/c1/lib/python3.6/site-packages/flask/app.py:2463: in __call__
    return self.wsgi_app(environ, start_response)
.tox/c1/lib/python3.6/site-packages/flask/app.py:2449: in wsgi_app
    response = self.handle_exception(e)
.tox/c1/lib/python3.6/site-packages/flask/app.py:1866: in handle_exception
    reraise(exc_type, exc_value, tb)
.tox/c1/lib/python3.6/site-packages/flask/_compat.py:39: in reraise
    raise value
.tox/c1/lib/python3.6/site-packages/flask/app.py:2446: in wsgi_app
    response = self.full_dispatch_request()
.tox/c1/lib/python3.6/site-packages/flask/app.py:1951: in full_dispatch_request
    rv = self.handle_user_exception(e)
.tox/c1/lib/python3.6/site-packages/flask/app.py:1820: in handle_user_exception
    reraise(exc_type, exc_value, tb)
.tox/c1/lib/python3.6/site-packages/flask/_compat.py:39: in reraise
    raise value
.tox/c1/lib/python3.6/site-packages/flask/app.py:1949: in full_dispatch_request
    rv = self.dispatch_request()
.tox/c1/lib/python3.6/site-packages/flask/app.py:1935: in dispatch_request
    return self.view_functions[rule.endpoint](**req.view_args)
.tox/c1/lib/python3.6/site-packages/flask_login/utils.py:261: in decorated_view
    return func(*args, **kwargs)
weko_items_ui/views.py:881: in prepare_edit_item
    sessionstorage = redis_connection.connection(db=current_app.config['ACCOUNTS_SESSION_REDIS_DB_NO'], kv = True)
../weko-redis/weko_redis/redis.py:44: in connection
    raise ex
../weko-redis/weko_redis/redis.py:40: in connection
    store = self.redis_connection(db)
../weko-redis/weko_redis/redis.py:68: in redis_connection
    raise ex
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

self = <weko_redis.redis.RedisConnection object at 0x7f8a3809fa58>, db = 1

    def redis_connection(self, db):
        """
        Establishes a direct Redis connection and returns the Redis store object.
    
        Args:
            db (int): The Redis database index to connect to.
    
        Returns:
            object: The Redis store object.
        """
        store = None
        try:
>           redis_url = 'redis://' + current_app.config['CACHE_REDIS_HOST'] + ':' + current_app.config['REDIS_PORT'] + '/' + str(db)
E           TypeError: must be str, not NoneType

../weko-redis/weko_redis/redis.py:65: TypeError
------------------------------ Captured log setup ------------------------------
ext.py                     255 WARNING  JSONSCHEMAS_HOST is set to localhost
_____________________ test_prepare_edit_item_login[4-200] ______________________

client_api = <FlaskClient <Flask 'testapp'>>
users = [{'email': 'contributor@test.org', 'id': 2, 'obj': <User 2>}, {'email': 'repoadmin@test.org', 'id': 4, 'obj': <User 4>...eneraluser@test.org', 'id': 6, 'obj': <User 5>}, {'email': 'originalroleuser@test.org', 'id': 7, 'obj': <User 7>}, ...]
id = 4, status_code = 200, db_sessionlifetime = None

    @pytest.mark.parametrize(
        "id, status_code",
        [
            (0, 200),
            (1, 200),
            (2, 200),
            (3, 200),
            (4, 200),
            (5, 200),
            (6, 200),
            (7, 200),
        ],
    )
    def test_prepare_edit_item_login(client_api, users, id, status_code, db_sessionlifetime):
        login_user_via_session(client=client_api, email=users[id]["email"])
        res = client_api.post(
            "/api/items/prepare_edit_item",
            data=json.dumps({}),
>           content_type="application/json",
        )

tests/test_views.py:20767: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 
.tox/c1/lib/python3.6/site-packages/werkzeug/test.py:1039: in post
    return self.open(*args, **kw)
.tox/c1/lib/python3.6/site-packages/flask/testing.py:227: in open
    follow_redirects=follow_redirects,
.tox/c1/lib/python3.6/site-packages/werkzeug/test.py:993: in open
    response = self.run_wsgi_app(environ.copy(), buffered=buffered)
.tox/c1/lib/python3.6/site-packages/werkzeug/test.py:884: in run_wsgi_app
    rv = run_wsgi_app(self.application, environ, buffered=buffered)
.tox/c1/lib/python3.6/site-packages/werkzeug/test.py:1119: in run_wsgi_app
    app_rv = app(environ, start_response)
.tox/c1/lib/python3.6/site-packages/flask/app.py:2463: in __call__
    return self.wsgi_app(environ, start_response)
.tox/c1/lib/python3.6/site-packages/flask/app.py:2449: in wsgi_app
    response = self.handle_exception(e)
.tox/c1/lib/python3.6/site-packages/flask/app.py:1866: in handle_exception
    reraise(exc_type, exc_value, tb)
.tox/c1/lib/python3.6/site-packages/flask/_compat.py:39: in reraise
    raise value
.tox/c1/lib/python3.6/site-packages/flask/app.py:2446: in wsgi_app
    response = self.full_dispatch_request()
.tox/c1/lib/python3.6/site-packages/flask/app.py:1951: in full_dispatch_request
    rv = self.handle_user_exception(e)
.tox/c1/lib/python3.6/site-packages/flask/app.py:1820: in handle_user_exception
    reraise(exc_type, exc_value, tb)
.tox/c1/lib/python3.6/site-packages/flask/_compat.py:39: in reraise
    raise value
.tox/c1/lib/python3.6/site-packages/flask/app.py:1949: in full_dispatch_request
    rv = self.dispatch_request()
.tox/c1/lib/python3.6/site-packages/flask/app.py:1935: in dispatch_request
    return self.view_functions[rule.endpoint](**req.view_args)
.tox/c1/lib/python3.6/site-packages/flask_login/utils.py:261: in decorated_view
    return func(*args, **kwargs)
weko_items_ui/views.py:881: in prepare_edit_item
    sessionstorage = redis_connection.connection(db=current_app.config['ACCOUNTS_SESSION_REDIS_DB_NO'], kv = True)
../weko-redis/weko_redis/redis.py:44: in connection
    raise ex
../weko-redis/weko_redis/redis.py:40: in connection
    store = self.redis_connection(db)
../weko-redis/weko_redis/redis.py:68: in redis_connection
    raise ex
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

self = <weko_redis.redis.RedisConnection object at 0x7f8a3884eba8>, db = 1

    def redis_connection(self, db):
        """
        Establishes a direct Redis connection and returns the Redis store object.
    
        Args:
            db (int): The Redis database index to connect to.
    
        Returns:
            object: The Redis store object.
        """
        store = None
        try:
>           redis_url = 'redis://' + current_app.config['CACHE_REDIS_HOST'] + ':' + current_app.config['REDIS_PORT'] + '/' + str(db)
E           TypeError: must be str, not NoneType

../weko-redis/weko_redis/redis.py:65: TypeError
------------------------------ Captured log setup ------------------------------
ext.py                     255 WARNING  JSONSCHEMAS_HOST is set to localhost
_____________________ test_prepare_edit_item_login[5-200] ______________________

client_api = <FlaskClient <Flask 'testapp'>>
users = [{'email': 'contributor@test.org', 'id': 2, 'obj': <User 2>}, {'email': 'repoadmin@test.org', 'id': 4, 'obj': <User 4>...eneraluser@test.org', 'id': 6, 'obj': <User 5>}, {'email': 'originalroleuser@test.org', 'id': 7, 'obj': <User 7>}, ...]
id = 5, status_code = 200, db_sessionlifetime = None

    @pytest.mark.parametrize(
        "id, status_code",
        [
            (0, 200),
            (1, 200),
            (2, 200),
            (3, 200),
            (4, 200),
            (5, 200),
            (6, 200),
            (7, 200),
        ],
    )
    def test_prepare_edit_item_login(client_api, users, id, status_code, db_sessionlifetime):
        login_user_via_session(client=client_api, email=users[id]["email"])
        res = client_api.post(
            "/api/items/prepare_edit_item",
            data=json.dumps({}),
>           content_type="application/json",
        )

tests/test_views.py:20767: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 
.tox/c1/lib/python3.6/site-packages/werkzeug/test.py:1039: in post
    return self.open(*args, **kw)
.tox/c1/lib/python3.6/site-packages/flask/testing.py:227: in open
    follow_redirects=follow_redirects,
.tox/c1/lib/python3.6/site-packages/werkzeug/test.py:993: in open
    response = self.run_wsgi_app(environ.copy(), buffered=buffered)
.tox/c1/lib/python3.6/site-packages/werkzeug/test.py:884: in run_wsgi_app
    rv = run_wsgi_app(self.application, environ, buffered=buffered)
.tox/c1/lib/python3.6/site-packages/werkzeug/test.py:1119: in run_wsgi_app
    app_rv = app(environ, start_response)
.tox/c1/lib/python3.6/site-packages/flask/app.py:2463: in __call__
    return self.wsgi_app(environ, start_response)
.tox/c1/lib/python3.6/site-packages/flask/app.py:2449: in wsgi_app
    response = self.handle_exception(e)
.tox/c1/lib/python3.6/site-packages/flask/app.py:1866: in handle_exception
    reraise(exc_type, exc_value, tb)
.tox/c1/lib/python3.6/site-packages/flask/_compat.py:39: in reraise
    raise value
.tox/c1/lib/python3.6/site-packages/flask/app.py:2446: in wsgi_app
    response = self.full_dispatch_request()
.tox/c1/lib/python3.6/site-packages/flask/app.py:1951: in full_dispatch_request
    rv = self.handle_user_exception(e)
.tox/c1/lib/python3.6/site-packages/flask/app.py:1820: in handle_user_exception
    reraise(exc_type, exc_value, tb)
.tox/c1/lib/python3.6/site-packages/flask/_compat.py:39: in reraise
    raise value
.tox/c1/lib/python3.6/site-packages/flask/app.py:1949: in full_dispatch_request
    rv = self.dispatch_request()
.tox/c1/lib/python3.6/site-packages/flask/app.py:1935: in dispatch_request
    return self.view_functions[rule.endpoint](**req.view_args)
.tox/c1/lib/python3.6/site-packages/flask_login/utils.py:261: in decorated_view
    return func(*args, **kwargs)
weko_items_ui/views.py:881: in prepare_edit_item
    sessionstorage = redis_connection.connection(db=current_app.config['ACCOUNTS_SESSION_REDIS_DB_NO'], kv = True)
../weko-redis/weko_redis/redis.py:44: in connection
    raise ex
../weko-redis/weko_redis/redis.py:40: in connection
    store = self.redis_connection(db)
../weko-redis/weko_redis/redis.py:68: in redis_connection
    raise ex
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

self = <weko_redis.redis.RedisConnection object at 0x7f8a3ddb4fd0>, db = 1

    def redis_connection(self, db):
        """
        Establishes a direct Redis connection and returns the Redis store object.
    
        Args:
            db (int): The Redis database index to connect to.
    
        Returns:
            object: The Redis store object.
        """
        store = None
        try:
>           redis_url = 'redis://' + current_app.config['CACHE_REDIS_HOST'] + ':' + current_app.config['REDIS_PORT'] + '/' + str(db)
E           TypeError: must be str, not NoneType

../weko-redis/weko_redis/redis.py:65: TypeError
------------------------------ Captured log setup ------------------------------
ext.py                     255 WARNING  JSONSCHEMAS_HOST is set to localhost
_____________________ test_prepare_edit_item_login[6-200] ______________________

client_api = <FlaskClient <Flask 'testapp'>>
users = [{'email': 'contributor@test.org', 'id': 2, 'obj': <User 2>}, {'email': 'repoadmin@test.org', 'id': 4, 'obj': <User 4>...eneraluser@test.org', 'id': 6, 'obj': <User 5>}, {'email': 'originalroleuser@test.org', 'id': 7, 'obj': <User 7>}, ...]
id = 6, status_code = 200, db_sessionlifetime = None

    @pytest.mark.parametrize(
        "id, status_code",
        [
            (0, 200),
            (1, 200),
            (2, 200),
            (3, 200),
            (4, 200),
            (5, 200),
            (6, 200),
            (7, 200),
        ],
    )
    def test_prepare_edit_item_login(client_api, users, id, status_code, db_sessionlifetime):
        login_user_via_session(client=client_api, email=users[id]["email"])
        res = client_api.post(
            "/api/items/prepare_edit_item",
            data=json.dumps({}),
>           content_type="application/json",
        )

tests/test_views.py:20767: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 
.tox/c1/lib/python3.6/site-packages/werkzeug/test.py:1039: in post
    return self.open(*args, **kw)
.tox/c1/lib/python3.6/site-packages/flask/testing.py:227: in open
    follow_redirects=follow_redirects,
.tox/c1/lib/python3.6/site-packages/werkzeug/test.py:993: in open
    response = self.run_wsgi_app(environ.copy(), buffered=buffered)
.tox/c1/lib/python3.6/site-packages/werkzeug/test.py:884: in run_wsgi_app
    rv = run_wsgi_app(self.application, environ, buffered=buffered)
.tox/c1/lib/python3.6/site-packages/werkzeug/test.py:1119: in run_wsgi_app
    app_rv = app(environ, start_response)
.tox/c1/lib/python3.6/site-packages/flask/app.py:2463: in __call__
    return self.wsgi_app(environ, start_response)
.tox/c1/lib/python3.6/site-packages/flask/app.py:2449: in wsgi_app
    response = self.handle_exception(e)
.tox/c1/lib/python3.6/site-packages/flask/app.py:1866: in handle_exception
    reraise(exc_type, exc_value, tb)
.tox/c1/lib/python3.6/site-packages/flask/_compat.py:39: in reraise
    raise value
.tox/c1/lib/python3.6/site-packages/flask/app.py:2446: in wsgi_app
    response = self.full_dispatch_request()
.tox/c1/lib/python3.6/site-packages/flask/app.py:1951: in full_dispatch_request
    rv = self.handle_user_exception(e)
.tox/c1/lib/python3.6/site-packages/flask/app.py:1820: in handle_user_exception
    reraise(exc_type, exc_value, tb)
.tox/c1/lib/python3.6/site-packages/flask/_compat.py:39: in reraise
    raise value
.tox/c1/lib/python3.6/site-packages/flask/app.py:1949: in full_dispatch_request
    rv = self.dispatch_request()
.tox/c1/lib/python3.6/site-packages/flask/app.py:1935: in dispatch_request
    return self.view_functions[rule.endpoint](**req.view_args)
.tox/c1/lib/python3.6/site-packages/flask_login/utils.py:261: in decorated_view
    return func(*args, **kwargs)
weko_items_ui/views.py:881: in prepare_edit_item
    sessionstorage = redis_connection.connection(db=current_app.config['ACCOUNTS_SESSION_REDIS_DB_NO'], kv = True)
../weko-redis/weko_redis/redis.py:44: in connection
    raise ex
../weko-redis/weko_redis/redis.py:40: in connection
    store = self.redis_connection(db)
../weko-redis/weko_redis/redis.py:68: in redis_connection
    raise ex
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

self = <weko_redis.redis.RedisConnection object at 0x7f8a37ce04e0>, db = 1

    def redis_connection(self, db):
        """
        Establishes a direct Redis connection and returns the Redis store object.
    
        Args:
            db (int): The Redis database index to connect to.
    
        Returns:
            object: The Redis store object.
        """
        store = None
        try:
>           redis_url = 'redis://' + current_app.config['CACHE_REDIS_HOST'] + ':' + current_app.config['REDIS_PORT'] + '/' + str(db)
E           TypeError: must be str, not NoneType

../weko-redis/weko_redis/redis.py:65: TypeError
------------------------------ Captured log setup ------------------------------
ext.py                     255 WARNING  JSONSCHEMAS_HOST is set to localhost
_____________________ test_prepare_edit_item_login[7-200] ______________________

client_api = <FlaskClient <Flask 'testapp'>>
users = [{'email': 'contributor@test.org', 'id': 2, 'obj': <User 2>}, {'email': 'repoadmin@test.org', 'id': 4, 'obj': <User 4>...eneraluser@test.org', 'id': 6, 'obj': <User 5>}, {'email': 'originalroleuser@test.org', 'id': 7, 'obj': <User 7>}, ...]
id = 7, status_code = 200, db_sessionlifetime = None

    @pytest.mark.parametrize(
        "id, status_code",
        [
            (0, 200),
            (1, 200),
            (2, 200),
            (3, 200),
            (4, 200),
            (5, 200),
            (6, 200),
            (7, 200),
        ],
    )
    def test_prepare_edit_item_login(client_api, users, id, status_code, db_sessionlifetime):
        login_user_via_session(client=client_api, email=users[id]["email"])
        res = client_api.post(
            "/api/items/prepare_edit_item",
            data=json.dumps({}),
>           content_type="application/json",
        )

tests/test_views.py:20767: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 
.tox/c1/lib/python3.6/site-packages/werkzeug/test.py:1039: in post
    return self.open(*args, **kw)
.tox/c1/lib/python3.6/site-packages/flask/testing.py:227: in open
    follow_redirects=follow_redirects,
.tox/c1/lib/python3.6/site-packages/werkzeug/test.py:993: in open
    response = self.run_wsgi_app(environ.copy(), buffered=buffered)
.tox/c1/lib/python3.6/site-packages/werkzeug/test.py:884: in run_wsgi_app
    rv = run_wsgi_app(self.application, environ, buffered=buffered)
.tox/c1/lib/python3.6/site-packages/werkzeug/test.py:1119: in run_wsgi_app
    app_rv = app(environ, start_response)
.tox/c1/lib/python3.6/site-packages/flask/app.py:2463: in __call__
    return self.wsgi_app(environ, start_response)
.tox/c1/lib/python3.6/site-packages/flask/app.py:2449: in wsgi_app
    response = self.handle_exception(e)
.tox/c1/lib/python3.6/site-packages/flask/app.py:1866: in handle_exception
    reraise(exc_type, exc_value, tb)
.tox/c1/lib/python3.6/site-packages/flask/_compat.py:39: in reraise
    raise value
.tox/c1/lib/python3.6/site-packages/flask/app.py:2446: in wsgi_app
    response = self.full_dispatch_request()
.tox/c1/lib/python3.6/site-packages/flask/app.py:1951: in full_dispatch_request
    rv = self.handle_user_exception(e)
.tox/c1/lib/python3.6/site-packages/flask/app.py:1820: in handle_user_exception
    reraise(exc_type, exc_value, tb)
.tox/c1/lib/python3.6/site-packages/flask/_compat.py:39: in reraise
    raise value
.tox/c1/lib/python3.6/site-packages/flask/app.py:1949: in full_dispatch_request
    rv = self.dispatch_request()
.tox/c1/lib/python3.6/site-packages/flask/app.py:1935: in dispatch_request
    return self.view_functions[rule.endpoint](**req.view_args)
.tox/c1/lib/python3.6/site-packages/flask_login/utils.py:261: in decorated_view
    return func(*args, **kwargs)
weko_items_ui/views.py:881: in prepare_edit_item
    sessionstorage = redis_connection.connection(db=current_app.config['ACCOUNTS_SESSION_REDIS_DB_NO'], kv = True)
../weko-redis/weko_redis/redis.py:44: in connection
    raise ex
../weko-redis/weko_redis/redis.py:40: in connection
    store = self.redis_connection(db)
../weko-redis/weko_redis/redis.py:68: in redis_connection
    raise ex
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

self = <weko_redis.redis.RedisConnection object at 0x7f8a374836d8>, db = 1

    def redis_connection(self, db):
        """
        Establishes a direct Redis connection and returns the Redis store object.
    
        Args:
            db (int): The Redis database index to connect to.
    
        Returns:
            object: The Redis store object.
        """
        store = None
        try:
>           redis_url = 'redis://' + current_app.config['CACHE_REDIS_HOST'] + ':' + current_app.config['REDIS_PORT'] + '/' + str(db)
E           TypeError: must be str, not NoneType

../weko-redis/weko_redis/redis.py:65: TypeError
------------------------------ Captured log setup ------------------------------
ext.py                     255 WARNING  JSONSCHEMAS_HOST is set to localhost
___________________________ test_ranking_acl_nologin ___________________________

client = <FlaskClient <Flask 'testapp'>>, db_sessionlifetime = None

    def test_ranking_acl_nologin(client, db_sessionlifetime):
        url = url_for("weko_items_ui.ranking", _external=True)
        with patch("flask.templating._render", return_value=""):
>           res = client.get(url)

tests/test_views.py:20796: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 
.tox/c1/lib/python3.6/site-packages/werkzeug/test.py:1029: in get
    return self.open(*args, **kw)
.tox/c1/lib/python3.6/site-packages/flask/testing.py:227: in open
    follow_redirects=follow_redirects,
.tox/c1/lib/python3.6/site-packages/werkzeug/test.py:993: in open
    response = self.run_wsgi_app(environ.copy(), buffered=buffered)
.tox/c1/lib/python3.6/site-packages/werkzeug/test.py:884: in run_wsgi_app
    rv = run_wsgi_app(self.application, environ, buffered=buffered)
.tox/c1/lib/python3.6/site-packages/werkzeug/test.py:1119: in run_wsgi_app
    app_rv = app(environ, start_response)
.tox/c1/lib/python3.6/site-packages/flask/app.py:2463: in __call__
    return self.wsgi_app(environ, start_response)
.tox/c1/lib/python3.6/site-packages/flask/app.py:2449: in wsgi_app
    response = self.handle_exception(e)
.tox/c1/lib/python3.6/site-packages/flask/app.py:1866: in handle_exception
    reraise(exc_type, exc_value, tb)
.tox/c1/lib/python3.6/site-packages/flask/_compat.py:39: in reraise
    raise value
.tox/c1/lib/python3.6/site-packages/flask/app.py:2446: in wsgi_app
    response = self.full_dispatch_request()
.tox/c1/lib/python3.6/site-packages/flask/app.py:1951: in full_dispatch_request
    rv = self.handle_user_exception(e)
.tox/c1/lib/python3.6/site-packages/flask/app.py:1820: in handle_user_exception
    reraise(exc_type, exc_value, tb)
.tox/c1/lib/python3.6/site-packages/flask/_compat.py:39: in reraise
    raise value
.tox/c1/lib/python3.6/site-packages/flask/app.py:1949: in full_dispatch_request
    rv = self.dispatch_request()
.tox/c1/lib/python3.6/site-packages/flask/app.py:1935: in dispatch_request
    return self.view_functions[rule.endpoint](**req.view_args)
weko_items_ui/views.py:1043: in ranking
    rankings = get_ranking(settings)
weko_items_ui/utils.py:3613: in get_ranking
    index_json = Indexes.get_browsing_tree_ignore_more()
../weko-index-tree/weko_index_tree/api.py:611: in get_browsing_tree_ignore_more
    datastore = redis_connection.connection(db=current_app.config['CACHE_REDIS_DB'], kv = True)
../weko-redis/weko_redis/redis.py:44: in connection
    raise ex
../weko-redis/weko_redis/redis.py:40: in connection
    store = self.redis_connection(db)
../weko-redis/weko_redis/redis.py:68: in redis_connection
    raise ex
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

self = <weko_redis.redis.RedisConnection object at 0x7f8a374b0198>, db = 0

    def redis_connection(self, db):
        """
        Establishes a direct Redis connection and returns the Redis store object.
    
        Args:
            db (int): The Redis database index to connect to.
    
        Returns:
            object: The Redis store object.
        """
        store = None
        try:
>           redis_url = 'redis://' + current_app.config['CACHE_REDIS_HOST'] + ':' + current_app.config['REDIS_PORT'] + '/' + str(db)
E           TypeError: must be str, not NoneType

../weko-redis/weko_redis/redis.py:65: TypeError
------------------------------ Captured log setup ------------------------------
ext.py                     255 WARNING  JSONSCHEMAS_HOST is set to localhost
___________________ test_validate_bibtex_export_acl_nologin ____________________

app = <Flask 'testapp'>, client = <FlaskClient <Flask 'testapp'>>
users = [{'email': 'contributor@test.org', 'id': 2, 'obj': <User 2>}, {'email': 'repoadmin@test.org', 'id': 4, 'obj': <User 4>...eneraluser@test.org', 'id': 6, 'obj': <User 5>}, {'email': 'originalroleuser@test.org', 'id': 7, 'obj': <User 7>}, ...]
db_records = [(<PersistentIdentifier depid:1 / rec:56162207-8018-46bb-a3c5-5d689b8f1f2d (R)>, <PersistentIdentifier recid:1 / rec:5...617258105262': {'resourceuri': 'http://purl.org/coar/resource_type/c_5794', 'resourcetype': 'conference paper'}}), ...]
db_oaischema = None

    def test_validate_bibtex_export_acl_nologin(
        app, client, users, db_records, db_oaischema
    ):
        url = url_for("weko_items_ui.validate_bibtex_export", _external=True)
        res = client.post(
>           url, data=json.dumps({"record_ids": [1]}), content_type="application/json"
        )

tests/test_views.py:20879: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 
.tox/c1/lib/python3.6/site-packages/werkzeug/test.py:1039: in post
    return self.open(*args, **kw)
.tox/c1/lib/python3.6/site-packages/flask/testing.py:227: in open
    follow_redirects=follow_redirects,
.tox/c1/lib/python3.6/site-packages/werkzeug/test.py:993: in open
    response = self.run_wsgi_app(environ.copy(), buffered=buffered)
.tox/c1/lib/python3.6/site-packages/werkzeug/test.py:884: in run_wsgi_app
    rv = run_wsgi_app(self.application, environ, buffered=buffered)
.tox/c1/lib/python3.6/site-packages/werkzeug/test.py:1119: in run_wsgi_app
    app_rv = app(environ, start_response)
.tox/c1/lib/python3.6/site-packages/flask/app.py:2463: in __call__
    return self.wsgi_app(environ, start_response)
.tox/c1/lib/python3.6/site-packages/flask/app.py:2449: in wsgi_app
    response = self.handle_exception(e)
.tox/c1/lib/python3.6/site-packages/flask/app.py:1866: in handle_exception
    reraise(exc_type, exc_value, tb)
.tox/c1/lib/python3.6/site-packages/flask/_compat.py:39: in reraise
    raise value
.tox/c1/lib/python3.6/site-packages/flask/app.py:2446: in wsgi_app
    response = self.full_dispatch_request()
.tox/c1/lib/python3.6/site-packages/flask/app.py:1951: in full_dispatch_request
    rv = self.handle_user_exception(e)
.tox/c1/lib/python3.6/site-packages/flask/app.py:1820: in handle_user_exception
    reraise(exc_type, exc_value, tb)
.tox/c1/lib/python3.6/site-packages/flask/_compat.py:39: in reraise
    raise value
.tox/c1/lib/python3.6/site-packages/flask/app.py:1949: in full_dispatch_request
    rv = self.dispatch_request()
.tox/c1/lib/python3.6/site-packages/flask/app.py:1935: in dispatch_request
    return self.view_functions[rule.endpoint](**req.view_args)
weko_items_ui/views.py:1104: in validate_bibtex_export
    invalid_record_ids = validate_bibtex(record_ids)
weko_items_ui/utils.py:3496: in validate_bibtex
    from weko_schema_ui.serializers import WekoBibTexSerializer
../weko-schema-ui/weko_schema_ui/serializers/__init__.py:62: in <module>
    BibTexSerializer = WekoBibTexSerializer()
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

self = <weko_schema_ui.serializers.WekoBibTexSerializer.WekoBibTexSerializer object at 0x7f8a373062b0>

    def __init__(self):
        """Init."""
        # Load namespace
        self.__ns = cache_schema('jpcoar_mapping').get('namespaces')
        self.__lst_identifier_type = ['doi', 'hdl', 'url']
        # JPCOAR elements
>       jp_jp = '{' + self.__ns['jpcoar'] + '}'
E       KeyError: 'jpcoar'

../weko-schema-ui/weko_schema_ui/serializers/WekoBibTexSerializer.py:133: KeyError
------------------------------ Captured log setup ------------------------------
ext.py                     255 WARNING  JSONSCHEMAS_HOST is set to localhost
____________________________ test_prepare_edit_item ____________________________

app = <Flask 'testapp'>

    def test_prepare_edit_item(app):
        from weko_items_ui.views import blueprint_api
        app.login_manager._login_disabled = True
        app.register_blueprint(blueprint_api)
    
        with app.test_request_context():
            url = url_for('weko_items_ui_api.prepare_edit_item')
        # WekoItemsUI(app)
        with app.test_client() as client:
>           res = client.post(url, json={})

tests/test_weko_items_ui.py:88: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 
.tox/c1/lib/python3.6/site-packages/werkzeug/test.py:1039: in post
    return self.open(*args, **kw)
.tox/c1/lib/python3.6/site-packages/flask/testing.py:227: in open
    follow_redirects=follow_redirects,
.tox/c1/lib/python3.6/site-packages/werkzeug/test.py:993: in open
    response = self.run_wsgi_app(environ.copy(), buffered=buffered)
.tox/c1/lib/python3.6/site-packages/werkzeug/test.py:884: in run_wsgi_app
    rv = run_wsgi_app(self.application, environ, buffered=buffered)
.tox/c1/lib/python3.6/site-packages/werkzeug/test.py:1119: in run_wsgi_app
    app_rv = app(environ, start_response)
.tox/c1/lib/python3.6/site-packages/flask/app.py:2463: in __call__
    return self.wsgi_app(environ, start_response)
.tox/c1/lib/python3.6/site-packages/flask/app.py:2449: in wsgi_app
    response = self.handle_exception(e)
.tox/c1/lib/python3.6/site-packages/flask/app.py:1866: in handle_exception
    reraise(exc_type, exc_value, tb)
.tox/c1/lib/python3.6/site-packages/flask/_compat.py:39: in reraise
    raise value
.tox/c1/lib/python3.6/site-packages/flask/app.py:2446: in wsgi_app
    response = self.full_dispatch_request()
.tox/c1/lib/python3.6/site-packages/flask/app.py:1951: in full_dispatch_request
    rv = self.handle_user_exception(e)
.tox/c1/lib/python3.6/site-packages/flask/app.py:1820: in handle_user_exception
    reraise(exc_type, exc_value, tb)
.tox/c1/lib/python3.6/site-packages/flask/_compat.py:39: in reraise
    raise value
.tox/c1/lib/python3.6/site-packages/flask/app.py:1949: in full_dispatch_request
    rv = self.dispatch_request()
.tox/c1/lib/python3.6/site-packages/flask/app.py:1935: in dispatch_request
    return self.view_functions[rule.endpoint](**req.view_args)
.tox/c1/lib/python3.6/site-packages/flask_login/utils.py:258: in decorated_view
    return func(*args, **kwargs)
weko_items_ui/views.py:881: in prepare_edit_item
    sessionstorage = redis_connection.connection(db=current_app.config['ACCOUNTS_SESSION_REDIS_DB_NO'], kv = True)
../weko-redis/weko_redis/redis.py:44: in connection
    raise ex
../weko-redis/weko_redis/redis.py:40: in connection
    store = self.redis_connection(db)
../weko-redis/weko_redis/redis.py:68: in redis_connection
    raise ex
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

self = <weko_redis.redis.RedisConnection object at 0x7f8a36d73b00>, db = 1

    def redis_connection(self, db):
        """
        Establishes a direct Redis connection and returns the Redis store object.
    
        Args:
            db (int): The Redis database index to connect to.
    
        Returns:
            object: The Redis store object.
        """
        store = None
        try:
>           redis_url = 'redis://' + current_app.config['CACHE_REDIS_HOST'] + ':' + current_app.config['REDIS_PORT'] + '/' + str(db)
E           TypeError: must be str, not NoneType

../weko-redis/weko_redis/redis.py:65: TypeError
------------------------------ Captured log setup ------------------------------
ext.py                     255 WARNING  JSONSCHEMAS_HOST is set to localhost
=============================== warnings summary ===============================
tests/test_api.py::test_item_login
tests/test_views.py::test_index_acl_nologin
tests/test_views.py::test_index_acl[0-302]
tests/test_views.py::test_index_acl[1-302]
tests/test_views.py::test_index_acl[2-302]
tests/test_views.py::test_index_acl[3-302]
tests/test_views.py::test_index_acl[4-403]
tests/test_views.py::test_index_acl[5-403]
tests/test_views.py::test_index_acl[6-302]
tests/test_views.py::test_index_acl[7-403]
tests/test_views.py::test_index[0-200]
tests/test_views.py::test_index_noitemtype
tests/test_views.py::test_index_exception
tests/test_views.py::test_iframe_index_acl_nologin
tests/test_views.py::test_iframe_index_acl[0-200]
tests/test_views.py::test_iframe_index_acl[1-200]
tests/test_views.py::test_iframe_index_acl[2-200]
tests/test_views.py::test_iframe_index_acl[3-200]
tests/test_views.py::test_iframe_index_acl[4-403]
tests/test_views.py::test_iframe_index_acl[5-403]
tests/test_views.py::test_iframe_index_acl[6-200]
tests/test_views.py::test_iframe_index_acl[7-403]
tests/test_views.py::test_iframe_index_noitemtypeid[0-404]
tests/test_views.py::test_iframe_index[0-200]
tests/test_views.py::test_iframe_index_exception
tests/test_views.py::test_iframe_save_model_nologin
tests/test_views.py::test_iframe_save_model_acl[0-200]
tests/test_views.py::test_iframe_save_model_error[0-200]
tests/test_views.py::test_iframe_save_model[0-200]
tests/test_views.py::test_get_json_schema_acl_nologin
tests/test_views.py::test_get_json_schema_acl[0-200]
tests/test_views.py::test_get_json_schema_acl[1-200]
tests/test_views.py::test_get_json_schema_acl[2-200]
tests/test_views.py::test_get_json_schema_acl[3-200]
tests/test_views.py::test_get_json_schema_acl[4-200]
tests/test_views.py::test_get_json_schema_acl[5-200]
tests/test_views.py::test_get_json_schema_acl[6-200]
tests/test_views.py::test_get_json_schema_acl[7-200]
tests/test_views.py::test_get_json_schema[0-200]
tests/test_views.py::test_get_schema_form_acl_nologin
tests/test_views.py::test_get_schema_form_acl[0-200]
tests/test_views.py::test_get_schema_form_acl[1-200]
tests/test_views.py::test_get_schema_form_acl[2-200]
tests/test_views.py::test_get_schema_form_acl[3-200]
tests/test_views.py::test_get_schema_form_acl[4-200]
tests/test_views.py::test_get_schema_form_acl[5-200]
tests/test_views.py::test_get_schema_form_acl[6-200]
tests/test_views.py::test_get_schema_form_acl[7-200]
tests/test_views.py::test_get_schema_form[0-200]
tests/test_views.py::test_items_index_acl_nologin
tests/test_views.py::test_items_index_acl[0-200]
tests/test_views.py::test_items_index_acl[1-200]
tests/test_views.py::test_items_index_acl[2-200]
tests/test_views.py::test_items_index_acl[3-200]
tests/test_views.py::test_items_index_acl[4-403]
tests/test_views.py::test_items_index_acl[5-403]
tests/test_views.py::test_items_index_acl[6-200]
tests/test_views.py::test_items_index_acl[7-403]
tests/test_views.py::test_iframe_items_index_acl_nologin
tests/test_views.py::test_iframe_items_index_acl[0-302]
tests/test_views.py::test_iframe_items_index_acl[1-302]
tests/test_views.py::test_iframe_items_index_acl[2-302]
tests/test_views.py::test_iframe_items_index_acl[3-302]
tests/test_views.py::test_iframe_items_index_acl[4-302]
tests/test_views.py::test_iframe_items_index_acl[5-302]
tests/test_views.py::test_iframe_items_index_acl[6-302]
tests/test_views.py::test_iframe_items_index_acl[7-302]
tests/test_views.py::test_iframe_items_index_get_error
tests/test_views.py::test_iframe_items_index_update_index_error
tests/test_views.py::test_iframe_items_index_update_index
tests/test_views.py::test_iframe_items_index_get
tests/test_views.py::test_iframe_items_index_put_error
tests/test_views.py::test_iframe_items_index_put
tests/test_views.py::test_iframe_items_index_post
tests/test_views.py::test_index_upload_acl_nologin
tests/test_views.py::test_index_upload_acl[0-200]
tests/test_views.py::test_index_upload_acl[1-200]
tests/test_views.py::test_index_upload_acl[2-200]
tests/test_views.py::test_index_upload_acl[3-200]
tests/test_views.py::test_index_upload_acl[4-200]
tests/test_views.py::test_index_upload_acl[5-200]
tests/test_views.py::test_index_upload_acl[6-200]
tests/test_views.py::test_index_upload_acl[7-200]
tests/test_views.py::test_validate_user_email_and_index_login[0-200]
tests/test_views.py::test_validate_user_email_and_index_login[1-200]
tests/test_views.py::test_validate_user_email_and_index_login[2-200]
tests/test_views.py::test_validate_user_email_and_index_login[3-200]
tests/test_views.py::test_validate_user_email_and_index_login[4-200]
tests/test_views.py::test_validate_user_email_and_index_login[5-200]
tests/test_views.py::test_validate_user_email_and_index_login[6-200]
tests/test_views.py::test_validate_user_email_and_index_login[7-200]
tests/test_views.py::test_validate_user_info_login[0-200]
tests/test_views.py::test_validate_user_info_login[1-200]
tests/test_views.py::test_validate_user_info_login[2-200]
tests/test_views.py::test_validate_user_info_login[3-200]
tests/test_views.py::test_validate_user_info_login[4-200]
tests/test_views.py::test_validate_user_info_login[5-200]
tests/test_views.py::test_validate_user_info_login[6-200]
tests/test_views.py::test_validate_user_info_login[7-200]
tests/test_views.py::test_get_user_info_acl[0-200]
tests/test_views.py::test_get_user_info_acl[1-200]
tests/test_views.py::test_get_user_info_acl[2-200]
tests/test_views.py::test_get_user_info_acl[3-200]
tests/test_views.py::test_get_user_info_acl[4-200]
tests/test_views.py::test_get_user_info_acl[5-200]
tests/test_views.py::test_get_user_info_acl[6-200]
tests/test_views.py::test_get_user_info_acl[7-200]
tests/test_views.py::test_get_current_login_user_id_acl[0-200]
tests/test_views.py::test_get_current_login_user_id_acl[1-200]
tests/test_views.py::test_get_current_login_user_id_acl[2-200]
tests/test_views.py::test_get_current_login_user_id_acl[3-200]
tests/test_views.py::test_get_current_login_user_id_acl[4-200]
tests/test_views.py::test_get_current_login_user_id_acl[5-200]
tests/test_views.py::test_get_current_login_user_id_acl[6-200]
tests/test_views.py::test_get_current_login_user_id_acl[7-200]
tests/test_views.py::test_prepare_edit_item_login[0-200]
tests/test_views.py::test_prepare_edit_item_login[1-200]
tests/test_views.py::test_prepare_edit_item_login[2-200]
tests/test_views.py::test_prepare_edit_item_login[3-200]
tests/test_views.py::test_prepare_edit_item_login[4-200]
tests/test_views.py::test_prepare_edit_item_login[5-200]
tests/test_views.py::test_prepare_edit_item_login[6-200]
tests/test_views.py::test_prepare_edit_item_login[7-200]
tests/test_views.py::test_prepare_edit_item_guest
tests/test_views.py::test_check_restricted_content_login[0-200]
tests/test_views.py::test_check_restricted_content_login[1-200]
tests/test_views.py::test_check_restricted_content_login[2-200]
tests/test_views.py::test_check_restricted_content_login[3-200]
tests/test_views.py::test_check_restricted_content_login[4-200]
tests/test_views.py::test_check_restricted_content_login[5-200]
tests/test_views.py::test_check_restricted_content_login[6-200]
tests/test_views.py::test_check_restricted_content_login[7-200]
tests/test_views.py::test_validate_login[0-200]
tests/test_views.py::test_validate_login[1-200]
tests/test_views.py::test_validate_login[2-200]
tests/test_views.py::test_validate_login[3-200]
tests/test_views.py::test_validate_login[4-200]
tests/test_views.py::test_validate_login[5-200]
tests/test_views.py::test_validate_login[6-200]
tests/test_views.py::test_validate_login[7-200]
tests/test_views.py::test_validate_guest
tests/test_views.py::test_check_validation_error_msg_acl_nologin
tests/test_views.py::test_corresponding_activity_list_acl_nologin
tests/test_views.py::test_check_record_doi_acl_nologin
tests/test_views.py::test_check_record_doi_indexes_acl_nologin
tests/test_views.py::test_check_record_doi_indexes_acl[0-200]
tests/test_views.py::test_check_record_doi_indexes_acl[1-200]
tests/test_views.py::test_check_record_doi_indexes_acl[2-200]
tests/test_views.py::test_check_record_doi_indexes_acl[3-200]
tests/test_views.py::test_check_record_doi_indexes_acl[4-200]
tests/test_views.py::test_check_record_doi_indexes_acl[5-200]
tests/test_views.py::test_check_record_doi_indexes_acl[6-200]
tests/test_views.py::test_check_record_doi_indexes_acl[7-200]
tests/test_views.py::test_check_record_doi_indexes[0-200]
tests/test_weko_items_ui.py::test_view
  /code/modules/weko-items-ui/.tox/c1/lib/python3.6/site-packages/flask/sessions.py:211: UserWarning: "test_server" is not a valid cookie domain, it must contain a ".". Add an entry to your hosts file, for example "test_server.localdomain", and use that instead.
    ' "{rv}.localdomain", and use that instead.'.format(rv=rv)

tests/test_views.py::test_index_acl[0-302]
tests/test_views.py::test_index_acl[1-302]
tests/test_views.py::test_index_acl[2-302]
tests/test_views.py::test_index_acl[3-302]
tests/test_views.py::test_index_acl[6-302]
tests/test_views.py::test_index[0-200]
  /code/modules/weko-items-ui/.tox/c1/lib/python3.6/site-packages/sqlalchemy/sql/compiler.py:763: SAWarning: Can't resolve label reference 'item_type.tag'; converting to text() (this warning may be suppressed after 10 occurrences)
    util.ellipses_string(element.element),

-- Docs: https://docs.pytest.org/en/latest/warnings.html

---------- coverage: platform linux, python 3.6.15-final-0 -----------
Name                           Stmts   Miss Branch BrPart  Cover
----------------------------------------------------------------
weko_items_ui/__init__.py          5      0      0      0   100%
weko_items_ui/api.py              50      0     20      0   100%
weko_items_ui/bundles.py          15      0      0      0   100%
weko_items_ui/config.py           69      0      0      0   100%
weko_items_ui/errors.py           17      0     10      0   100%
weko_items_ui/ext.py              38      0     20      1    98%
weko_items_ui/permissions.py       9      0      0      0   100%
weko_items_ui/proxies.py           5      0      2      0   100%
weko_items_ui/rest.py            154      8     56      5    94%
weko_items_ui/scopes.py            7      0      0      0   100%
weko_items_ui/utils.py          2434    355   1330    125    83%
weko_items_ui/version.py           2      0      0      0   100%
weko_items_ui/views.py           640    266    214     30    53%
----------------------------------------------------------------
TOTAL                           3445    629   1652    161    79%
Coverage HTML written to dir htmlcov
Coverage XML written to file coverage.xml

============ 40 failed, 257 passed, 161 warnings in 2014.49 seconds ============
ERROR: InvocationError for command /code/modules/weko-items-ui/.tox/c1/bin/pytest --cov=weko_items_ui tests -v --cov-branch --cov-report=xml --cov-report=html --cov-report=term --basetemp=/code/modules/weko-items-ui/.tox/c1/tmp (exited with code 1)
___________________________________ summary ____________________________________
ERROR:   c1: commands failed
