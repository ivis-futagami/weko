GLOB sdist-make: /code/modules/weko-records/setup.py
c1 inst-nodeps: /code/modules/weko-records/.tox/.tmp/package/1/weko-records-0.1.0.dev20170000.zip
c1 installed: alabaster==0.7.13,alembic==0.9.6,amqp==2.6.0,angular-gettext-babel==0.3,aniso8601==8.0.0,arcp==0.2.1,arrow==0.12.1,asn1crypto==0.23.0,atomicwrites==1.4.1,attrs==17.4.0,b2handle==1.1.2,Babel==2.5.1,bagit==1.7.0,beautifulsoup4==4.9.3,bibtexparser==1.0.1,billiard==3.6.3.0,binaryornot==0.4.4,bioblend==0.11.0,bleach==3.1.0,blinker==1.4,boto==2.49.0,boto3==1.7.84,botocore==1.10.84,CacheControl==0.12.14,cachelib==0.1,cachetools==4.2.4,captcha==0.4,cchardet==2.1.1,celery==4.4.4,certifi==2017.11.5,cffi==1.11.2,chardet==3.0.4,citeproc-py==0.5.1,citeproc-py-styles==0.1.2,click==6.7,cookiecutter==1.6.0,counter-robots==2018.6,coverage==6.2,cryptography==2.1.4,datacite==1.0.1,DateTime==4.9,decorator==4.1.2,defusedxml==0.5.0,dictdiffer==0.7.0,distlib==0.3.6,dnspython==2.2.1,docutils==0.18.1,dojson==1.3.2,elasticsearch==6.1.1,elasticsearch-dsl==6.4.0,elementpath==1.0.6,email-validator==1.0.5,entrypoints==0.2.3,feedgen==0.7.0,filelock==3.4.1,Flask==1.1.0,Flask-Admin==1.5.3,Flask-Alembic==2.0.1,Flask-Assets==0.12,Flask-BabelEx==0.9.4,Flask-Breadcrumbs==0.5.0,Flask-Caching==1.10.1,Flask-CeleryExt==0.3.4,Flask-Collect==1.2.2,Flask-Cors==3.0.3,Flask-DebugToolbar==0.13.1,Flask-IIIF==0.6.1,Flask-KVSession==0.6.2,Flask-Limiter==1.1.0,Flask-Login==0.4.1,Flask-Mail==0.9.1,flask-marshmallow==0.14.0,Flask-Menu==0.6.0,-e git+https://github.com/RCOSDP/flask-oauthlib.git@98eb36e1dfc66256fa7ea62237e9879acb906e9d#egg=Flask_OAuthlib,Flask-Plugins==1.6.1,Flask-Principal==0.4.0,Flask-RESTful==0.3.8,Flask-Security==3.0.0,flask-shell-ipython==0.4.1,Flask-Sitemap==0.4.0,Flask-SQLAlchemy==2.3.2,flask-talisman==0.4.1,Flask-WTF==0.14.3,-e git+https://github.com/RCOSDP/pyfpdf.git@f9b032148283d535cabc7789858081c80de36fef#egg=fpdf,frozendict==2.3.8,fs==0.5.4,ftfy==4.4.3,future==0.16.0,galaxy2cwl==0.1.4,github3.py==1.1.0,gxformat2==0.20.0,html5lib==1.0.1,idna==2.6,iiif-prezi==0.3.0,imagesize==1.4.1,importlib-metadata==4.8.3,importlib-resources==5.4.0,infinity==1.4,intervals==0.8.0,invenio-access==1.1.0,-e git+https://github.com/ivis-futagami/weko.git@b57f801a126218109d001f469c439055107f1b03#egg=invenio_accounts&subdirectory=modules/invenio-accounts,invenio-admin==1.1.2,invenio-app==1.1.0,invenio-assets==1.0.0,invenio-base==1.0.2,invenio-cache==1.0.0,invenio-celery==1.1.3,-e git+https://github.com/ivis-futagami/weko.git@b57f801a126218109d001f469c439055107f1b03#egg=invenio_communities&subdirectory=modules/invenio-communities,invenio-config==1.0.0,invenio-csl-rest==1.0.0a1,-e git+https://github.com/ivis-futagami/weko.git@b57f801a126218109d001f469c439055107f1b03#egg=invenio_db&subdirectory=modules/invenio-db,-e git+https://github.com/ivis-futagami/weko.git@b57f801a126218109d001f469c439055107f1b03#egg=invenio_deposit&subdirectory=modules/invenio-deposit,-e git+https://github.com/ivis-futagami/weko.git@b57f801a126218109d001f469c439055107f1b03#egg=invenio_files_rest&subdirectory=modules/invenio-files-rest,invenio-formatter==1.0.0b3,invenio-i18n==1.0.0,-e git+https://github.com/ivis-futagami/weko.git@b57f801a126218109d001f469c439055107f1b03#egg=invenio_iiif&subdirectory=modules/invenio-iiif,-e git+https://github.com/ivis-futagami/weko.git@b57f801a126218109d001f469c439055107f1b03#egg=invenio_indexer&subdirectory=modules/invenio-indexer,invenio-jsonschemas==1.0.0,invenio-logging==1.0.0b3,-e git+https://github.com/ivis-futagami/weko.git@b57f801a126218109d001f469c439055107f1b03#egg=invenio_mail&subdirectory=modules/invenio-mail,invenio-marc21==1.0.0a8,-e git+https://github.com/ivis-futagami/weko.git@b57f801a126218109d001f469c439055107f1b03#egg=invenio_oaiharvester&subdirectory=modules/invenio-oaiharvester,-e git+https://github.com/ivis-futagami/weko.git@b57f801a126218109d001f469c439055107f1b03#egg=invenio_oaiserver&subdirectory=modules/invenio-oaiserver,-e git+https://github.com/ivis-futagami/weko.git@b57f801a126218109d001f469c439055107f1b03#egg=invenio_oauth2server&subdirectory=modules/invenio-oauth2server,invenio-oauthclient==1.0.0,invenio-pidrelations==1.0.0a4,invenio-pidstore==1.0.0,-e git+https://github.com/ivis-futagami/weko.git@b57f801a126218109d001f469c439055107f1b03#egg=invenio_previewer&subdirectory=modules/invenio-previewer,invenio-query-parser==0.6.0,-e git+https://github.com/ivis-futagami/weko.git@b57f801a126218109d001f469c439055107f1b03#egg=invenio_queues&subdirectory=modules/invenio-queues,-e git+https://github.com/ivis-futagami/weko.git@b57f801a126218109d001f469c439055107f1b03#egg=invenio_records&subdirectory=modules/invenio-records,invenio-records-files==1.0.0a10,-e git+https://github.com/ivis-futagami/weko.git@b57f801a126218109d001f469c439055107f1b03#egg=invenio_records_rest&subdirectory=modules/invenio-records-rest,invenio-records-ui==1.0.0,-e git+https://github.com/ivis-futagami/weko.git@b57f801a126218109d001f469c439055107f1b03#egg=invenio_resourcesyncclient&subdirectory=modules/invenio-resourcesyncclient,-e git+https://github.com/ivis-futagami/weko.git@b57f801a126218109d001f469c439055107f1b03#egg=invenio_resourcesyncserver&subdirectory=modules/invenio-resourcesyncserver,invenio-rest==1.1.2,-e git+https://github.com/ivis-futagami/weko.git@b57f801a126218109d001f469c439055107f1b03#egg=invenio_s3&subdirectory=modules/invenio-s3,-e git+https://github.com/RCOSDP/invenio-search.git@cff9744c5dc651893a9c51672c5b8da9adc21e16#egg=invenio_search,-e git+https://github.com/RCOSDP/invenio-search-ui.git@74bd3b2990ff27b39e01b6b31be9a0b5fda3dd0f#egg=invenio_search_ui,-e git+https://github.com/ivis-futagami/weko.git@b57f801a126218109d001f469c439055107f1b03#egg=invenio_stats&subdirectory=modules/invenio-stats,invenio-theme==1.0.0b4,ipaddress==1.0.19,ipython==6.2.1,ipython-genutils==0.2.0,isodate==0.6.1,itsdangerous==0.24,jedi==0.11.0,Jinja2==2.10.1,jinja2-cli==0.6.0,jinja2-time==0.2.0,jmespath==0.10.0,jsmin==2.2.2,jsonpatch==1.21,jsonpath-ng==1.5.2,jsonpointer==1.14,jsonref==0.1,jsonresolver==0.2.1,jsonschema==2.6.0,jupyter-client==5.2.2,jupyter-core==4.4.0,-e git+https://github.com/RCOSDP/kombu.git@f204fdf078d5e94393c86693f545e2d011f620f5#egg=kombu,limits==1.2.1,lockfile==0.12.2,lxml==4.1.1,Mako==1.0.7,MarkupSafe==1.1.1,marshmallow==2.20.1,marshmallow-sqlalchemy==0.23.1,maxminddb==1.5.2,maxminddb-geolite2==2017.803,mistune==0.8.3,mock==5.0.2,more-itertools==8.10.0,msgpack==0.6.2,nbconvert==5.3.1,nbformat==4.4.0,netaddr==0.8.0,node-semver==0.1.1,numpy==1.16.1,oauthlib==2.1.0,ordereddict==1.1,packaging==21.3,pandocfilters==1.4.2,parso==0.1.0,passlib==1.7.1,pbr==5.11.1,pexpect==4.3.0,pickleshare==0.7.4,Pillow==8.1.2,platformdirs==2.4.0,pluggy==0.13.1,ply==3.11,poyo==0.4.1,prompt-toolkit==1.0.15,psycopg2==2.7.3.2,ptyprocess==0.5.2,py==1.11.0,pycparser==2.18,Pygments==2.2.0,PyJWT==1.5.3,PyLD==2.0.3,pyparsing==3.1.0,-e git+https://github.com/RCOSDP/PyPDF2.git@fefc684a3a74aff6f99e5dff24f9b4dd1c95169d#egg=PyPDF2,pyPEG2==2.15.2,pytest==4.2.0,pytest-cov==2.9.0,pytest-flask==0.15.1,pytest-invenio==1.2.1,pytest-mock==3.2.0,python-dateutil==2.8.2,python-editor==1.0.3,python-geoip==1.2,pytz==2017.3,PyYAML==6.0.1,pyzmq==17.0.0,rdflib==5.0.0,rdflib-jsonld==0.6.1,redis==2.10.6,requests==2.18.4,requests-oauthlib==1.1.0,requests-toolbelt==1.0.0,resync==2.0.1,rocrate==0.6.0,ruamel.yaml==0.17.21,ruamel.yaml.clib==0.2.8,s3fs==0.1.6,s3transfer==0.1.13,schema-salad==8.3.20221115203138,selenium==3.141.0,Sickle==0.6.4,simplegeneric==0.8.1,simplejson==3.12.0,simplekv==0.11.2,six==1.16.0,snowballstemmer==2.2.0,soupsieve==2.3.2.post1,speaklater==1.3,Sphinx==1.8.4,sphinxcontrib-serializinghtml==1.1.5,sphinxcontrib-websupport==1.2.4,SQLAlchemy==1.2.19,SQLAlchemy-Continuum==1.3.6,SQLAlchemy-Utils==0.35.0,stevedore==3.5.2,sword3common==0.1.1,testpath==0.3.1,tika==2.6.0,toml==0.10.2,tornado==4.5.3,tox==3.28.0,traitlets==4.3.2,typing_extensions==4.1.1,ua-parser==0.7.3,uritemplate==4.1.1,uritools==2.1.0,urllib3==1.22,uWSGI==2.0.21,uwsgitop==0.11,validators==0.12.0,vine==1.3.0,virtualenv==20.17.1,virtualenv-clone==0.5.7,virtualenvwrapper==4.8.4,Wand==0.6.1,wcwidth==0.1.7,webargs==5.5.2,webassets==0.12.1,webencodings==0.5.1,-e git+https://github.com/ivis-futagami/weko.git@b57f801a126218109d001f469c439055107f1b03#egg=weko_accounts&subdirectory=modules/weko-accounts,-e git+https://github.com/ivis-futagami/weko.git@b57f801a126218109d001f469c439055107f1b03#egg=weko_admin&subdirectory=modules/weko-admin,-e git+https://github.com/ivis-futagami/weko.git@b57f801a126218109d001f469c439055107f1b03#egg=weko_authors&subdirectory=modules/weko-authors,-e git+https://github.com/ivis-futagami/weko.git@b57f801a126218109d001f469c439055107f1b03#egg=weko_bulkupdate&subdirectory=modules/weko-bulkupdate,-e git+https://github.com/ivis-futagami/weko.git@b57f801a126218109d001f469c439055107f1b03#egg=weko_deposit&subdirectory=modules/weko-deposit,-e git+https://github.com/ivis-futagami/weko.git@b57f801a126218109d001f469c439055107f1b03#egg=weko_gridlayout&subdirectory=modules/weko-gridlayout,-e git+https://github.com/ivis-futagami/weko.git@b57f801a126218109d001f469c439055107f1b03#egg=weko_groups&subdirectory=modules/weko-groups,-e git+https://github.com/ivis-futagami/weko.git@b57f801a126218109d001f469c439055107f1b03#egg=weko_handle&subdirectory=modules/weko-handle,-e git+https://github.com/ivis-futagami/weko.git@b57f801a126218109d001f469c439055107f1b03#egg=weko_index_tree&subdirectory=modules/weko-index-tree,-e git+https://github.com/ivis-futagami/weko.git@b57f801a126218109d001f469c439055107f1b03#egg=weko_indextree_journal&subdirectory=modules/weko-indextree-journal,-e git+https://github.com/ivis-futagami/weko.git@b57f801a126218109d001f469c439055107f1b03#egg=weko_items_autofill&subdirectory=modules/weko-items-autofill,-e git+https://github.com/ivis-futagami/weko.git@b57f801a126218109d001f469c439055107f1b03#egg=weko_items_ui&subdirectory=modules/weko-items-ui,-e git+https://github.com/ivis-futagami/weko.git@b57f801a126218109d001f469c439055107f1b03#egg=weko_itemtypes_ui&subdirectory=modules/weko-itemtypes-ui,-e git+https://github.com/ivis-futagami/weko.git@b57f801a126218109d001f469c439055107f1b03#egg=weko_logging&subdirectory=modules/weko-logging,weko-records @ file:///code/modules/weko-records/.tox/.tmp/package/1/weko-records-0.1.0.dev20170000.zip,-e git+https://github.com/ivis-futagami/weko.git@b57f801a126218109d001f469c439055107f1b03#egg=weko_records_ui&subdirectory=modules/weko-records-ui,-e git+https://github.com/ivis-futagami/weko.git@b57f801a126218109d001f469c439055107f1b03#egg=weko_redis&subdirectory=modules/weko-redis,-e git+https://github.com/ivis-futagami/weko.git@b57f801a126218109d001f469c439055107f1b03#egg=weko_schema_ui&subdirectory=modules/weko-schema-ui,-e git+https://github.com/ivis-futagami/weko.git@b57f801a126218109d001f469c439055107f1b03#egg=weko_search_ui&subdirectory=modules/weko-search-ui,-e git+https://github.com/ivis-futagami/weko.git@b57f801a126218109d001f469c439055107f1b03#egg=weko_sitemap&subdirectory=modules/weko-sitemap,-e git+https://github.com/ivis-futagami/weko.git@b57f801a126218109d001f469c439055107f1b03#egg=weko_swordserver&subdirectory=modules/weko-swordserver,-e git+https://github.com/ivis-futagami/weko.git@b57f801a126218109d001f469c439055107f1b03#egg=weko_theme&subdirectory=modules/weko-theme,-e git+https://github.com/ivis-futagami/weko.git@b57f801a126218109d001f469c439055107f1b03#egg=weko_user_profiles&subdirectory=modules/weko-user-profiles,-e git+https://github.com/ivis-futagami/weko.git@b57f801a126218109d001f469c439055107f1b03#egg=weko_workflow&subdirectory=modules/weko-workflow,Werkzeug==0.15.2,whichcraft==0.4.1,WTForms==2.1,WTForms-Alchemy==0.16.5,WTForms-Components==0.10.3,xmlschema==0.9.30,xmltodict==0.12.0,zipp==3.6.0,zope.interface==5.5.2
c1 run-test-pre: PYTHONHASHSEED='3892750207'
c1 run-test: commands[0] | pytest --cov=weko_records tests -v -s -vv --cov-branch --cov-report=term --cov-report=xml --cov-report=html --cov-config=tox.ini --basetemp=/code/modules/weko-records/.tox/c1/tmp
============================= test session starts ==============================
platform linux -- Python 3.6.15, pytest-4.2.0, py-1.11.0, pluggy-0.13.1 -- /code/modules/weko-records/.tox/c1/bin/python
cachedir: .tox/c1/.pytest_cache
rootdir: /code/modules/weko-records, inifile:
plugins: celery-4.4.4, flask-0.15.1, cov-2.9.0, mock-3.2.0, invenio-1.2.1
collecting ... collected 233 items

tests/test_api.py::test_recordbase PASSED
tests/test_api.py::test_itemtypenames PASSED
tests/test_api.py::test_itemtypes_create PASSED
tests/test_api.py::test_itemtypes_update PASSED
tests/test_api.py::test_itemtypes_update_item_type PASSED
tests/test_api.py::test_itemtypes_get_record PASSED
tests/test_api.py::test_itemtypes_get_records PASSED
tests/test_api.py::test_itemtypes_get_by_id PASSED
tests/test_api.py::test_itemtypes_get_by_name_id PASSED
tests/test_api.py::test_itemtypes_get_records_by_name_id PASSED
tests/test_api.py::test_itemtypes_get_latest PASSED
tests/test_api.py::test_itemtypes_get_latest_with_item_type PASSED
tests/test_api.py::test_itemtypes_get_latest_custorm_harvesting PASSED
tests/test_api.py::test_itemtypes_get_all PASSED
tests/test_api.py::test_patch_ItemTypes PASSED
tests/test_api.py::test_itemtypes_commit PASSED
tests/test_api.py::test_itemtypes_delete PASSED
tests/test_api.py::test_itemtypes_revert PASSED
tests/test_api.py::test_itemtypes_restore PASSED
tests/test_api.py::test_revision_ItemTypes PASSED
tests/test_api.py::TestItemTypes::test_update_property_enum FAILED
tests/test_api.py::TestItemTypes::test_update_attribute_options FAILED
tests/test_api.py::test_item_type_edit_history PASSED
tests/test_api.py::test_mapping_create PASSED
tests/test_api.py::test_mapping_get_record PASSED
tests/test_api.py::test_patch_Mapping PASSED
tests/test_api.py::test_mapping_commit PASSED
tests/test_api.py::test_mapping_delete PASSED
tests/test_api.py::test_mapping_revert PASSED
tests/test_api.py::test_revisions_Mapping PASSED
tests/test_api.py::test_mapping_get_mapping_by_item_type_ids PASSED
tests/test_api.py::test_item_type_props PASSED
tests/test_api.py::test_revisions_ItemTypeProps PASSED
tests/test_api.py::test_item_metadata_create PASSED
tests/test_api.py::test_item_metadata_get_record PASSED
tests/test_api.py::test_item_metadata_get_records PASSED
tests/test_api.py::test_item_metadata_get_by_item_type_id PASSED
tests/test_api.py::test_get_registered_item_metadata_ItemsMetadata PASSED
tests/test_api.py::test_item_metadata_get_by_object_id PASSED
tests/test_api.py::test_patch_ItemsMetadata PASSED
tests/test_api.py::test_item_metadata_commit PASSED
tests/test_api.py::test_item_metadata_delete PASSED
tests/test_api.py::test_item_metadata_revert PASSED
tests/test_api.py::test_revision_ItemsMetadata PASSED
tests/test_api.py::test_files_metadata_create PASSED
tests/test_api.py::test_files_metadata_get_record PASSED
tests/test_api.py::test_files_metadata_get_records PASSED
tests/test_api.py::test_patch_FilesMetadata PASSED
tests/test_api.py::test_files_metadata_update_data PASSED
tests/test_api.py::test_files_metadata_commit PASSED
tests/test_api.py::test_files_metadata_delete PASSED
tests/test_api.py::test_files_metadata_revert PASSED
tests/test_api.py::test_revision_FilesMetadata PASSED
tests/test_api.py::test_site_license_get_records PASSED
tests/test_api.py::test_site_license_update PASSED
tests/test_api.py::test_wekorecord_get_record PASSED
tests/test_api.py::test_pid_WekoRecord PASSED
tests/test_api.py::test_depid_WekoRecord PASSED
tests/test_api.py::test_feedback_mail_list_create_and_update PASSED
tests/test_api.py::test_get_feedback_mail_list PASSED
tests/test_api.py::test_feedback_mail_list_delete FAILED
tests/test_api.py::test_request_mail_list_create_and_update PASSED
tests/test_api.py::test_request_mail_list_delete PASSED
tests/test_api.py::test_item_link_update PASSED
tests/test_api.py::test_item_link_bulk_create PASSED
tests/test_api.py::test_item_link_bulk_update PASSED
tests/test_api.py::test_item_link_bulk_delete PASSED
tests/test_ext.py::test_init_config PASSED
tests/test_fetchers.py::test_weko_record_fetcher PASSED
tests/test_fetchers.py::test_weko_doi_fetcher PASSED
tests/test_models.py::test_latest_edit_history PASSED
tests/test_models.py::test_get_latest_by_item_type_id PASSED
tests/test_models.py::test_get_src_references PASSED
tests/test_models.py::test_get_dst_references PASSED
tests/test_models.py::test_relation_exists PASSED
tests/test_serializers_atom.py::test_serialize_search PASSED
tests/test_serializers_csl.py::TestObjectType::test_get_openaire_subtype PASSED
tests/test_serializers_dc.py::test_extend_atom PASSED
tests/test_serializers_dc.py::test_extend_jpcoar PASSED
tests/test_serializers_depositschema.py::test_dump_links PASSED
tests/test_serializers_depositschema.py::test_remove_envelope PASSED
tests/test_serializers_entry.py::test_weko_feed_entry PASSED
tests/test_serializers_entry.py::test_atom_entry PASSED
tests/test_serializers_entry.py::test_rss_entry PASSED
tests/test_serializers_entry.py::test_id PASSED
tests/test_serializers_entry.py::test_updated PASSED
tests/test_serializers_entry.py::test_author PASSED
tests/test_serializers_entry.py::test_content PASSED
tests/test_serializers_entry.py::test_summary PASSED
tests/test_serializers_entry.py::test_description PASSED
tests/test_serializers_entry.py::test_category PASSED
tests/test_serializers_entry.py::test_contributor PASSED
tests/test_serializers_entry.py::test_load_extension PASSED
tests/test_serializers_entry.py::test_register_extension PASSED
tests/test_serializers_feed.py::test_weko_feed_entry PASSED
tests/test_serializers_feed.py::test__create_atom PASSED
tests/test_serializers_feed.py::test_atom_file PASSED
tests/test_serializers_feed.py::test__create_rss PASSED
tests/test_serializers_feed.py::test_rss_file PASSED
tests/test_serializers_feed.py::test_updated PASSED
tests/test_serializers_feed.py::test_lastBuildDate PASSED
tests/test_serializers_feed.py::test_author PASSED
tests/test_serializers_feed.py::test_category PASSED
tests/test_serializers_feed.py::test_cloud PASSED
tests/test_serializers_feed.py::test_contributor PASSED
tests/test_serializers_feed.py::test_generator PASSED
tests/test_serializers_feed.py::test_icon PASSED
tests/test_serializers_feed.py::test_logo PASSED
tests/test_serializers_feed.py::test_image PASSED
tests/test_serializers_feed.py::test_rights PASSED
tests/test_serializers_feed.py::test_copyright PASSED
tests/test_serializers_feed.py::test_subtitle PASSED
tests/test_serializers_feed.py::test_description PASSED
tests/test_serializers_feed.py::test_docs PASSED
tests/test_serializers_feed.py::test_language PASSED
tests/test_serializers_feed.py::test_requestUrl PASSED
tests/test_serializers_feed.py::test_items PASSED
tests/test_serializers_feed.py::test_managingEditor PASSED
tests/test_serializers_feed.py::test_pubDate PASSED
tests/test_serializers_feed.py::test_rating PASSED
tests/test_serializers_feed.py::test_skipHours PASSED
tests/test_serializers_feed.py::test_skipDays PASSED
tests/test_serializers_feed.py::test_textInput PASSED
tests/test_serializers_feed.py::test_ttl PASSED
tests/test_serializers_feed.py::test_webMaster PASSED
tests/test_serializers_feed.py::test_add_entry PASSED
tests/test_serializers_feed.py::test_add_item PASSED
tests/test_serializers_feed.py::test_entry PASSED
tests/test_serializers_feed.py::test_item PASSED
tests/test_serializers_feed.py::test_remove_entry PASSED
tests/test_serializers_feed.py::test_remove_item PASSED
tests/test_serializers_feed.py::test_load_extension PASSED
tests/test_serializers_feed.py::test_register_extension PASSED
tests/test_serializers_jpcoar.py::test_jpcoar_serializer[data/record_hit/record_hit1.json] PASSED
tests/test_serializers_json.py::test_json_serializer[data/record_hit/record_hit1.json] PASSED
tests/test_serializers_json.py::test_json_serializer_2[data/record_hit/record_hit4.json] PASSED
tests/test_serializers_json.py::test_json_serializer_3[data/record_hit/record_hit5.json] PASSED
tests/test_serializers_opensearch.py::test_extend_atom_OpensearchBaseExtension PASSED
tests/test_serializers_opensearch.py::test_extend_atom_OpensearchEntryExtension PASSED
tests/test_serializers_opensearch_response.py::test_oepnsearch_responsify[data/record_hit/record_hit1.json] FAILED
tests/test_serializers_opensearch_response.py::test_add_link_header PASSED
tests/test_serializers_opensearchserializer.py::test_serialize_search_OpenSearchSerializer PASSED
tests/test_serializers_pidrelations.py::test_serialize_related_identifiers PASSED
tests/test_serializers_pidrelations.py::test_preprocess_related_identifiers PASSED
tests/test_serializers_prism.py::test_serialize_search_PrismBaseExtension PASSED
tests/test_serializers_prism.py::test_issn_PrismBaseExtension PASSED
tests/test_serializers_prism.py::test_number_PrismBaseExtension PASSED
tests/test_serializers_prism.py::test_serialize_search_PrismEntryExtension PASSED
tests/test_serializers_rss.py::test_serialize_search PASSED
tests/test_serializers_schemas_csl.py::test_record_schema_csljson[data/item_type/item_type_render1.json-data/item_type/item_type_form1.json-data/item_type/item_type_mapping1.json-data/record_hit/record_hit1.json-True] PASSED
tests/test_serializers_schemas_csl.py::test_get_data_from_mapping PASSED
tests/test_serializers_schemas_csl.py::test_get_version_RecordSchemaCSLJSON PASSED
tests/test_serializers_schemas_csl.py::test_get_issue_date_RecordSchemaCSLJSON PASSED
tests/test_serializers_schemas_csl.py::test_get_page_RecordSchemaCSLJSON PASSED
tests/test_serializers_schemas_csl.py::test_get_doi_RecordSchemaCSLJSON PASSED
tests/test_serializers_utils.py::test_get_mapping FAILED
tests/test_serializers_utils.py::test_get_full_mapping PASSED
tests/test_serializers_utils.py::test_get_mapping_inactive_show_list PASSED
tests/test_serializers_utils.py::test_get_metadata_from_map PASSED
tests/test_serializers_utils.py::test_get_attribute_schema PASSED
tests/test_serializers_utils.py::test_get_item_type_name_id PASSED
tests/test_serializers_utils.py::test_get_item_type_name PASSED
tests/test_serializers_utils.py::test_open_search_detail_data[data/item_type/item_type_render1.json-data/item_type/item_type_form1.json-data/item_type/item_type_mapping1.json-data/record_hit/record_hit1.json-True] PASSED
tests/test_serializers_utils.py::test_output_open_search_detail_data PASSED
tests/test_serializers_utils.py::test__set_publication_date PASSED
tests/test_serializers_utils.py::test__set_source_identifier PASSED
tests/test_serializers_utils.py::test__set_author_info PASSED
tests/test_serializers_utils.py::test__set_publisher PASSED
tests/test_serializers_utils.py::test__set_description PASSED
tests/test_utils.py::test_json_loader PASSED
tests/test_utils.py::test_copy_field_test PASSED
tests/test_utils.py::test_copy_field_test_with_condition PASSED
tests/test_utils.py::test_convert_range_value PASSED
tests/test_utils.py::test_convert_date_range_value PASSED
tests/test_utils.py::test_makeDateRangeValue PASSED
tests/test_utils.py::test_get_value_from_dict PASSED
tests/test_utils.py::test_get_values_from_dict PASSED
tests/test_utils.py::test_get_values_from_dict_with_condition PASSED
tests/test_utils.py::test_copy_value_xml_path PASSED
tests/test_utils.py::test_copy_value_json_path PASSED
tests/test_utils.py::test_copy_values_json_path PASSED
tests/test_utils.py::test_set_timestamp PASSED
tests/test_utils.py::test_sort_records PASSED
tests/test_utils.py::test_sort_op PASSED
tests/test_utils.py::test_find_items PASSED
tests/test_utils.py::test_get_all_items PASSED
tests/test_utils.py::test_get_all_items2 PASSED
tests/test_utils.py::test_to_orderdict PASSED
tests/test_utils.py::test_get_options_and_order_list PASSED
tests/test_utils.py::test_sort_meta_data_by_options[data/item_type/item_type_render1.json-data/item_type/item_type_form1.json-data/item_type/item_type_mapping1.json-data/record_hit/record_hit1.json-True] PASSED
tests/test_utils.py::test_sort_meta_data_by_options[data/item_type/item_type_render2.json-data/item_type/item_type_form2.json-data/item_type/item_type_mapping2.json-data/record_hit/record_hit2.json-False] PASSED
tests/test_utils.py::test_sort_meta_data_by_options[data/item_type/item_type_render3.json-data/item_type/item_type_form3.json-data/item_type/item_type_mapping2.json-data/record_hit/record_hit3.json-False] PASSED
tests/test_utils.py::test_sort_meta_data_by_options[data/item_type/item_type_render_title.json-data/item_type/item_type_form_title.json-data/item_type/item_type_mapping_title.json-data/record_hit/record_hit_title1.json-False] PASSED
tests/test_utils.py::test_sort_meta_data_by_options[data/item_type/item_type_render_title.json-data/item_type/item_type_form_title.json-data/item_type/item_type_mapping_title.json-data/record_hit/record_hit_title2.json-False] PASSED
tests/test_utils.py::test_sort_meta_data_by_options[data/item_type/item_type_render_title.json-data/item_type/item_type_form_title.json-data/item_type/item_type_mapping_title.json-data/record_hit/record_hit_title3.json-False] PASSED
tests/test_utils.py::test_sort_meta_data_by_options_exception PASSED
tests/test_utils.py::test_sort_meta_data_by_options_no_item_type_id PASSED
tests/test_utils.py::test_sort_meta_data_by_options_sample_1 PASSED
tests/test_utils.py::test_get_keywords_data_load PASSED
tests/test_utils.py::test_is_valid_openaire_type PASSED
tests/test_utils.py::test_check_has_attribute_value PASSED
tests/test_utils.py::test_set_file_date PASSED
tests/test_utils.py::test_get_attribute_value_all_items PASSED
tests/test_utils.py::test_check_input_value PASSED
tests/test_utils.py::test_remove_key PASSED
tests/test_utils.py::test_remove_keys PASSED
tests/test_utils.py::test_remove_multiple PASSED
tests/test_utils.py::test_check_to_upgrade_version PASSED
tests/test_utils.py::test_remove_weko2_special_character PASSED
tests/test_utils.py::test_selected_value_by_language PASSED
tests/test_utils.py::test_selected_value_by_language_3 PASSED
tests/test_utils.py::test_selected_value_by_language_2 PASSED
tests/test_utils.py::test_check_info_in_metadata PASSED
tests/test_utils.py::test_get_value_and_lang_by_key PASSED
tests/test_utils.py::test_get_value_by_selected_lang PASSED
tests/test_utils.py::test_get_show_list_author PASSED
tests/test_utils.py::test_get_show_list_author_test0 PASSED
tests/test_utils.py::test_format_creates PASSED
tests/test_utils.py::test_get_creator PASSED
tests/test_utils.py::test_get_creator_by_languages PASSED
tests/test_utils.py::test_get_affiliation PASSED
tests/test_utils.py::test_get_author_has_language PASSED
tests/test_utils.py::test_add_author PASSED
tests/test_utils.py::test_add_author_test PASSED
tests/test_utils.py::test_convert_bibliographic PASSED
tests/test_utils.py::test_add_biographic PASSED
tests/test_utils.py::test_custom_record_medata_for_export PASSED
tests/test_utils.py::test_replace_fqdn PASSED
tests/test_utils.py::test_replace_fqdn_of_file_metadata PASSED
tests/test_weko_records.py::test_version PASSED
tests/test_weko_records.py::test_init PASSED
tests/test_weko_records.py::test_feed_entry PASSED
tests/test_weko_records.py::test_weko_feed_generator PASSED

=================================== FAILURES ===================================
___________________ TestItemTypes.test_update_property_enum ____________________

app = <tests.test_api.TestItemTypes object at 0x7f39566259e8>

    def test_update_property_enum(app):
        old_value = {'type': 'array', 'items': {'type': 'object', 'title': 'dcterms_date', 'format': 'object', 'properties': {'subitem_dcterms_date': {'type': 'string', 'title': '日付（リテラル）', 'format': 'text', 'title_i18n': {'en': 'Date Literal', 'ja': '日付（リテラル）'}}, 'subitem_dcterms_date_language': {'enum': [None, 'ja', 'ja-Kana', 'ja-Latn', 'en', 'fr', 'it', 'de', 'es', 'zh-cn', 'zh-tw', 'ru', 'la', 'ms', 'eo', 'ar', 'el', 'ko'], 'type': ['null', 'string'], 'title': '言語', 'format': 'select', 'editAble': True}}, 'system_prop': False}, 'title': 'dcterms_date', 'maxItems': 9999, 'minItems': 1, 'system_prop': False}
        new_value = {'type': 'array', 'items': {'type': 'object', 'title': 'dcterms_date', 'format': 'object', 'properties': {'subitem_dcterms_date': {'type': 'string', 'title': '日付（リテラル）', 'format': 'text', 'title_i18n': {'en': 'Date Literal', 'ja': '日付（リテラル）'}}, 'subitem_dcterms_date_language': {'enum': [None, 'ja', 'ja-Kana', 'ja-Latn', 'en', 'fr', 'it', 'de', 'es', 'zh-cn', 'zh-tw', 'ru', 'la', 'ms', 'eo', 'ar', 'el', 'ko'], 'type': ['null', 'string'], 'title': '言語', 'format': 'select', 'editAble': True}}, 'system_prop': False}, 'title': 'dcterms_date', 'maxItems': 9999, 'minItems': 1, 'system_prop': False}
        expected_dict = {'type': 'array', 'items': {'type': 'object', 'title': 'dcterms_date', 'format': 'object', 'properties': {'subitem_dcterms_date': {'type': 'string', 'title': '日付（リテラル）', 'format': 'text', 'title_i18n': {'en': 'Date Literal', 'ja': '日付（リテラル）'}}, 'subitem_dcterms_date_language': {'enum': [None, 'ja', 'ja-Kana', 'ja-Latn', 'en', 'fr', 'it', 'de', 'es', 'zh-cn', 'zh-tw', 'ru', 'la', 'ms', 'eo', 'ar', 'el', 'ko'], 'type': ['null', 'string'], 'title': '言語', 'format': 'select', 'editAble': True}}, 'system_prop': False}, 'title': 'dcterms_date', 'maxItems': 9999, 'minItems': 1, 'system_prop': False}
>       ItemTypes.update_property_enum(old_value,new_value)

tests/test_api.py:875: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 
weko_records/api.py:1024: in update_property_enum
    managed_key_list = current_app.config.get("WEKO_RECORDS_MANAGED_KEYS")
.tox/c1/lib/python3.6/site-packages/werkzeug/local.py:348: in __getattr__
    return getattr(self._get_current_object(), name)
.tox/c1/lib/python3.6/site-packages/werkzeug/local.py:307: in _get_current_object
    return self.__local()
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

    def _find_app():
        top = _app_ctx_stack.top
        if top is None:
>           raise RuntimeError(_app_ctx_err_msg)
E           RuntimeError: Working outside of application context.
E           
E           This typically means that you attempted to use functionality that needed
E           to interface with the current application object in some way. To solve
E           this, set up an application context with app.app_context().  See the
E           documentation for more information.

.tox/c1/lib/python3.6/site-packages/flask/globals.py:52: RuntimeError
_________________ TestItemTypes.test_update_attribute_options __________________

app = <tests.test_api.TestItemTypes object at 0x7f3956ea4e48>

    def test_update_attribute_options(app):
    
        a = {"key": "key", "type": "fieldset", "items": [{"key": "key.subkey", "type": "text", "title": "バージョン情報","isHide":True, "required": True, "isShowList": True, "title_i18n": {"en": "Version", "ja": "バージョン情報"}, "isNonDisplay": True, "title_i18n_temp": {"en": "Version", "ja": "バージョン情報"}, "isSpecifyNewline": True}], "title": "Version", "title_i18n": {"en": "Version", "ja": "バージョン情報"}}
        b = {"key": "key", "type": "fieldset", "items": [{"key": "key.subkey", "type": "text", "title": "バージョン情報", "isHide":True, "required": True, "isShowList": True, "title_i18n": {"en": "Version", "ja": "バージョン情報"}, "isNonDisplay": True, "title_i18n_temp": {"en": "Version", "ja": "バージョン情報"}, "isSpecifyNewline": True}], "title": "Version", "title_i18n": {"en": "Version", "ja": "バージョン情報"}}
        expected_dict = {"key": "key", "type": "fieldset", "items": [{"key": "key.subkey", "type": "text", "title": "バージョン情報", "isHide":True, "required": True, "isShowList": True, "title_i18n": {"en": "Version", "ja": "バージョン情報"}, "isNonDisplay": True, "title_i18n_temp": {"en": "Version", "ja": "バージョン情報"}, "isSpecifyNewline": True}], "title": "Version", "title_i18n": {"en": "Version", "ja": "バージョン情報"}}
>       ItemTypes.update_attribute_options(a,b,"None")

tests/test_api.py:889: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 
weko_records/api.py:1049: in update_attribute_options
    managed_key_list = current_app.config.get("WEKO_RECORDS_MANAGED_KEYS")
.tox/c1/lib/python3.6/site-packages/werkzeug/local.py:348: in __getattr__
    return getattr(self._get_current_object(), name)
.tox/c1/lib/python3.6/site-packages/werkzeug/local.py:307: in _get_current_object
    return self.__local()
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

    def _find_app():
        top = _app_ctx_stack.top
        if top is None:
>           raise RuntimeError(_app_ctx_err_msg)
E           RuntimeError: Working outside of application context.
E           
E           This typically means that you attempted to use functionality that needed
E           to interface with the current application object in some way. To solve
E           this, set up an application context with app.app_context().  See the
E           documentation for more information.

.tox/c1/lib/python3.6/site-packages/flask/globals.py:52: RuntimeError
________________________ test_feedback_mail_list_delete ________________________

app = <Flask 'testapp'>
db = <SQLAlchemy engine=postgresql+psycopg2://invenio:***@postgresql:5432/wekotest>

    def test_feedback_mail_list_delete(app, db):
        _item_id1 = uuid.uuid4()
        _item_id2 = uuid.uuid4()
        _item_id3 = uuid.uuid4()
        _item_id4 = uuid.uuid4()
        _feedback_maillist = ['nii@nii.co.jp']
>       FeedbackMailList.update_by_list_item_id([_item_id1, _item_id2, _item_id3, _item_id4], _feedback_maillist)

tests/test_api.py:1844: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 
weko_records/api.py:2277: in update_by_list_item_id
    cls.update(item_id, feedback_maillist)
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

cls = <class 'weko_records.api.FeedbackMailList'>
item_id = UUID('cd882bd9-adda-4789-9202-d7f76ff923f9')
feedback_maillist = ['nii@nii.co.jp']

    @classmethod
    def update(cls, item_id, feedback_maillist):
        """Create a new instance feedback_mail_list.
    
        :param item_id: Item Identifier
        :param feedback_maillist: list mail feedback
        :return boolean: True if success
        """
        with db.session.begin_nested():
            query_object = _FeedbackMailList.query.filter_by(
                item_id=item_id).one_or_none()
            if not query_object:
                mail_list = []
                account_author_set = set()
                for d in feedback_maillist:
>                   author_id = d.get("author_id")
E                   AttributeError: 'str' object has no attribute 'get'

weko_records/api.py:2243: AttributeError
_________ test_oepnsearch_responsify[data/record_hit/record_hit1.json] _________

app = <Flask 'testapp'>
db = <SQLAlchemy engine=postgresql+psycopg2://invenio:***@postgresql:5432/wekotest>
hit = 'data/record_hit/record_hit1.json'

    @pytest.mark.parametrize("hit", params)
    def test_oepnsearch_responsify(app, db, hit):
        def fetcher(obj_uuid, data):
            assert obj_uuid=="1"
            return PersistentIdentifier(pid_type='recid', pid_value=data['pid'])
    
        _search_result = {'hits': {'total': 1, 'hits': [json_data(hit)]}}
        opensearch_v1 = OpenSearchSerializer(RecordSchemaJSONV1)
        opensearch = oepnsearch_responsify(opensearch_v1)
        with app.test_request_context():
>           result = opensearch(fetcher, _search_result)

tests/test_serializers_opensearch_response.py:26: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 
weko_records/serializers/opensearchresponse.py:34: in view
    pid_fetcher, search_result, links=links, item_links_factory=item_links_factory)
weko_records/serializers/opensearchserializer.py:69: in serialize_search
    **kwargs), mimetype
../invenio-records-rest/invenio_records_rest/serializers/json.py:85: in serialize_search
    hit['_source']['_item_metadata'] = hide_by_email(hit['_source']['_item_metadata'], True)
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

item_metadata = {'control_number': '1', 'item_date': {'attribute_name': 'Date', 'attribute_value_mlt': [{'subitem_date_type': 'Availab...ute_name': 'Publisher', 'attribute_value_mlt': [{'subitem_publisher': 'takeshi', 'subitem_publisherLang': 'en'}]}, ...}
force_flag = True, item_type = None

    def hide_by_email(item_metadata, force_flag=False, item_type=None):
        """Hiding emails.
    
        :param item_metadata:
        :param force_flag: force to hide
        :param item_type: item type data
        :return:
        """
        from weko_items_ui.utils import get_options_and_order_list, get_hide_list_by_schema_form
        show_email_flag = item_setting_show_email()
        subitem_keys = current_app.config['WEKO_RECORDS_UI_EMAIL_ITEM_KEYS']
    
        item_type_id = item_metadata.get('item_type_id')
    
        if item_type_id:
            hide_list = []
            if item_type:
                meta_options = get_options_and_order_list(
                    item_type_id,
                    item_type_data=ItemTypes(item_type.schema, model=item_type),
                    mapping_flag=False)
                hide_list = get_hide_list_by_schema_form(schemaform=item_type.render.get('table_row_map', {}).get('form', []))
            else:
                meta_options = get_options_and_order_list(item_type_id, mapping_flag=False)
    
            # Hidden owners_ext info
            if item_metadata.get('_deposit') and \
                    item_metadata['_deposit'].get('owners_ext'):
                del item_metadata['_deposit']['owners_ext']
    
            for item in item_metadata:
                _item = item_metadata[item]
                prop_hidden = meta_options.get(item, {}).get('option', {}).get('hidden', False)
                if isinstance(_item, dict) and \
                        _item.get('attribute_value_mlt'):
                    for _idx, _value in enumerate(_item['attribute_value_mlt']):
                        if _value is not None:
                            for key in subitem_keys:
                                for h in hide_list:
                                    if h.startswith(item) and h.endswith(key):
                                        prop_hidden = True
>                               if key in _value.keys() and (force_flag or not show_email_flag or prop_hidden):
E                               AttributeError: 'str' object has no attribute 'keys'

../weko-records-ui/weko_records_ui/utils.py:749: AttributeError
_______________________________ test_get_mapping _______________________________

app = <Flask 'testapp'>
db = <SQLAlchemy engine=postgresql+psycopg2://invenio:***@postgresql:5432/wekotest>
item_type = {'properties': {'item_1': {'type': 'string', 'title': 'item_1', 'format': 'text'}}}
item_type_mapping = {'item_1': {'jpcoar_mapping': {'item': {'@value': 'interim'}}}}

    def test_get_mapping(app, db, item_type, item_type_mapping):
        # mapping = json_data("data/item_type_mapping.json")
        result = get_mapping(1, 'jpcoar_mapping')
        assert result == {"item.@value": "item_1.interim"}
    
>       result = get_mapping(1, 'jpcoar_mapping', item_type=item_type)

tests/test_serializers_utils.py:27: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

item_type_id = 1, mapping_type = 'jpcoar_mapping'
item_type = {'properties': {'item_1': {'type': 'string', 'title': 'item_1', 'format': 'text'}}}

    def get_mapping(item_type_id, mapping_type, item_type=None):
        """Format itemtype mapping data.
    
        [Key:Schema, Value:ItemId]
        :param item_type_id:
        :param mapping_type:
        :param item_type:
        :return:
        """
        def get_schema_key_info(schema, parent_key, schema_json={}):
    
            for k, v in schema.items():
                key = parent_key + '.' + k if parent_key else k
                if isinstance(v, dict):
                    child_key = pickle.loads(pickle.dumps(key, -1))
                    get_schema_key_info(v, child_key, schema_json)
                else:
                    schema_json[key] = v
    
            return schema_json
    
        schema = {}
        item_type_list = []
        item_type_mapping = Mapping.get_record(item_type_id)
        if item_type:
>           item_type_list = item_type.render.get('table_row')
E           AttributeError: 'ItemTypes' object has no attribute 'render'

weko_records/serializers/utils.py:65: AttributeError
=============================== warnings summary ===============================
tests/test_api.py::test_itemtypenames
tests/test_api.py::test_itemtypes_delete
  /code/modules/weko-records/.tox/c1/lib/python3.6/site-packages/sqlalchemy/sql/compiler.py:763: SAWarning: Can't resolve label reference 'item_type.tag'; converting to text() (this warning may be suppressed after 10 occurrences)
    util.ellipses_string(element.element),

tests/test_serializers_entry.py::test_weko_feed_entry
tests/test_serializers_feed.py::test_weko_feed_entry
  /code/modules/weko-records/weko_records/serializers/entry.py:686: UserWarning: pubdate(... is deprecated and may be removed in feedgen > 0.8. Use pubDate(...) instead.
    warnings.warn('pubdate(... is deprecated and may be removed in feedgen '

tests/test_utils.py::test_sort_meta_data_by_options[data/item_type/item_type_render1.json-data/item_type/item_type_form1.json-data/item_type/item_type_mapping1.json-data/record_hit/record_hit1.json-True]
tests/test_utils.py::test_sort_meta_data_by_options[data/item_type/item_type_render2.json-data/item_type/item_type_form2.json-data/item_type/item_type_mapping2.json-data/record_hit/record_hit2.json-False]
tests/test_utils.py::test_sort_meta_data_by_options[data/item_type/item_type_render3.json-data/item_type/item_type_form3.json-data/item_type/item_type_mapping2.json-data/record_hit/record_hit3.json-False]
tests/test_utils.py::test_sort_meta_data_by_options[data/item_type/item_type_render_title.json-data/item_type/item_type_form_title.json-data/item_type/item_type_mapping_title.json-data/record_hit/record_hit_title1.json-False]
tests/test_utils.py::test_sort_meta_data_by_options[data/item_type/item_type_render_title.json-data/item_type/item_type_form_title.json-data/item_type/item_type_mapping_title.json-data/record_hit/record_hit_title2.json-False]
tests/test_utils.py::test_sort_meta_data_by_options[data/item_type/item_type_render_title.json-data/item_type/item_type_form_title.json-data/item_type/item_type_mapping_title.json-data/record_hit/record_hit_title3.json-False]
  /code/modules/weko-records/.tox/c1/lib/python3.6/site-packages/_pytest/python.py:166: RuntimeWarning: coroutine 'test_sort_meta_data_by_options' was never awaited
    testfunction(**testargs)

tests/test_utils.py::test_sort_meta_data_by_options_exception
  /code/modules/weko-records/.tox/c1/lib/python3.6/site-packages/_pytest/python.py:166: RuntimeWarning: coroutine 'test_sort_meta_data_by_options_exception' was never awaited
    testfunction(**testargs)

tests/test_utils.py::test_sort_meta_data_by_options_no_item_type_id
  /code/modules/weko-records/.tox/c1/lib/python3.6/site-packages/_pytest/python.py:166: RuntimeWarning: coroutine 'test_sort_meta_data_by_options_no_item_type_id' was never awaited
    testfunction(**testargs)

tests/test_utils.py::test_sort_meta_data_by_options_sample_1
  /code/modules/weko-records/.tox/c1/lib/python3.6/site-packages/_pytest/python.py:166: RuntimeWarning: coroutine 'test_sort_meta_data_by_options_sample_1' was never awaited
    testfunction(**testargs)

-- Docs: https://docs.pytest.org/en/latest/warnings.html

---------- coverage: platform linux, python 3.6.15-final-0 -----------
Name                                               Stmts   Miss Branch BrPart  Cover
------------------------------------------------------------------------------------
weko_records/__init__.py                               4      0      0      0   100%
weko_records/api.py                                 1137    281    492     34    71%
weko_records/config.py                                26      0      0      0   100%
weko_records/ext.py                                   15      0     10      0   100%
weko_records/fetchers.py                               7      0      0      0   100%
weko_records/models.py                               143      1     68     11    94%
weko_records/serializers/__init__.py                  21      0      0      0   100%
weko_records/serializers/atom.py                       7      0      2      0   100%
weko_records/serializers/csl.py                       57      5     18      3    89%
weko_records/serializers/dc.py                        51     17     28      2    56%
weko_records/serializers/depositschema.py             20      0      6      2    92%
weko_records/serializers/entry.py                    387      3    231     47    92%
weko_records/serializers/feed.py                     564     10    316     74    90%
weko_records/serializers/jpcoar.py                    36      0      4      0   100%
weko_records/serializers/json.py                      38      1     14      2    94%
weko_records/serializers/opensearch.py                60      0     30     10    89%
weko_records/serializers/opensearchresponse.py        32      7     20      3    73%
weko_records/serializers/opensearchserializer.py      25      0      8      0   100%
weko_records/serializers/pidrelations.py              35      0     18      4    92%
weko_records/serializers/prism.py                    132     42     78     16    55%
weko_records/serializers/rss.py                        7      0      2      0   100%
weko_records/serializers/schemas/__init__.py           1      0      0      0   100%
weko_records/serializers/schemas/csl.py              135      2     90     16    92%
weko_records/serializers/searchserializer.py           5      1      2      0    86%
weko_records/serializers/utils.py                    474    107    304     47    70%
weko_records/utils.py                               1515    531    968     92    62%
weko_records/version.py                                2      0      0      0   100%
------------------------------------------------------------------------------------
TOTAL                                               4936   1008   2709    363    74%
Coverage HTML written to dir htmlcov
Coverage XML written to file coverage.xml

============= 5 failed, 228 passed, 13 warnings in 296.89 seconds ==============
ERROR: InvocationError for command /code/modules/weko-records/.tox/c1/bin/pytest --cov=weko_records tests -v -s -vv --cov-branch --cov-report=term --cov-report=xml --cov-report=html --cov-config=tox.ini --basetemp=/code/modules/weko-records/.tox/c1/tmp (exited with code 1)
___________________________________ summary ____________________________________
ERROR:   c1: commands failed
